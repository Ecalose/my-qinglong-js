# -*- coding: utf-8 -*-
#!/usr/bin/env python3
"""
* 仅供学习交流，请在下载后的24小时内完全删除 请勿将任何内容用于商业或非法目的，否则后果自负。
* 猫猫看看 V1.50

* 活动入口,微信打开：
* 如果连接过期了运行一下就出来了最新的入口！
* https://fz0n.ug2j8.shop/haobaobao/auth/58487f291985c5f32c16b3b01b96a912
* 打开活动入口，抓包的任意接口cookies中的Cookie参数
* 
* 变量格式：
* 新建同名环境变量
* 变量名：mykkyd
* 变量值：
* # 3000 代表 3毛，后面两个推送参数可不填，那就必须配置全局推送！
* 账号备注#Cookie参数#提现金额如3000#wxpushApptoken#wxpushTopicId
* 
* 其他参数说明（脚本最下方填写参数）
* wxpusher全局参数：wxpusherAppToken、wxpusherTopicId
* 具体使用方法请看文档地址：https://wxpusher.zjiecode.com/docs/#/
* 
* 也可使用 微信机器人：wechatBussinessKey
* 
* 支持支付宝提现：账号备注#Cookie参数#提现金额如3000#wxpushApptoken#wxpushTopicId#支付宝姓名#支付宝账号
* 只想提现支付宝，不想填写其他参数，最少的参数就是：账号备注#Cookie参数###支付宝姓名#支付宝账号
*
* 增加 自定义检测文章等待时间：mykkydReadPostDelay，默认值是 15-20秒
* 定时运行每半小时一次
* 达到标准自动提现
* 达到标准，自动提现
"""
# This file requires Python 3.x and the following dependencies:
# - base64
try:
    import base64
    exec(base64.b64decode('IiIiCiog5LuF5L6b5a2m5Lmg5Lqk5rWB77yM6K+35Zyo5LiL6L295ZCO55qEMjTlsI/ml7blhoXlrozlhajliKDpmaQg6K+35Yu/5bCG5Lu75L2V5YaF5a6555So5LqO5ZWG5Lia5oiW6Z2e5rOV55uu55qE77yM5ZCm5YiZ5ZCO5p6c6Ieq6LSf44CCCiog54yr54yr55yL55yLIFYxLjUwCgoqIOa0u+WKqOWFpeWPoyzlvq7kv6HmiZPlvIDvvJoKKiDlpoLmnpzov57mjqXov4fmnJ/kuobov5DooYzkuIDkuIvlsLHlh7rmnaXkuobmnIDmlrDnmoTlhaXlj6PvvIEKKiBodHRwczovL3MxaTYuMW9iZy5zaG9wL2hhb2Jhb2Jhby9hdXRoLzU4NDg3ZjI5MTk4NWM1ZjMyYzE2YjNiMDFiOTZhOTEyCiog5omT5byA5rS75Yqo5YWl5Y+j77yM5oqT5YyF55qE5Lu75oSP5o6l5Y+jY29va2llc+S4reeahENvb2tpZeWPguaVsAoqIAoqIOWPmOmHj+agvOW8j++8mgoqIOaWsOW7uuWQjOWQjeeOr+Wig+WPmOmHjwoqIOWPmOmHj+WQje+8mm15a2t5ZAoqIOWPmOmHj+WAvO+8mgoqICMgMzAwMCDku6PooaggM+avm++8jOWQjumdouS4pOS4quaOqOmAgeWPguaVsOWPr+S4jeWhq++8jOmCo+WwseW/hemhu+mFjee9ruWFqOWxgOaOqOmAge+8gQoqIOi0puWPt+Wkh+azqCNDb29raWXlj4LmlbAj5o+Q546w6YeR6aKd5aaCMzAwMCN3eHB1c2hBcHB0b2tlbiN3eHB1c2hUb3BpY0lkCiogCiog5YW25LuW5Y+C5pWw6K+05piO77yI6ISa5pys5pyA5LiL5pa55aGr5YaZ5Y+C5pWw77yJCiogd3hwdXNoZXLlhajlsYDlj4LmlbDvvJp3eHB1c2hlckFwcFRva2Vu44CBd3hwdXNoZXJUb3BpY0lkCiog5YW35L2T5L2/55So5pa55rOV6K+355yL5paH5qGj5Zyw5Z2A77yaaHR0cHM6Ly93eHB1c2hlci56amllY29kZS5jb20vZG9jcy8jLwoqIAoqIOS5n+WPr+S9v+eUqCDlvq7kv6HmnLrlmajkurrvvJp3ZWNoYXRCdXNzaW5lc3NLZXkKKiAKKiDmlK/mjIHmlK/ku5jlrp3mj5DnjrDvvJrotKblj7flpIfms6gjQ29va2ll5Y+C5pWwI+aPkOeOsOmHkemineWmgjMwMDAjd3hwdXNoQXBwdG9rZW4jd3hwdXNoVG9waWNJZCPmlK/ku5jlrp3lp5PlkI0j5pSv5LuY5a6d6LSm5Y+3Ciog5Y+q5oOz5o+Q546w5pSv5LuY5a6d77yM5LiN5oOz5aGr5YaZ5YW25LuW5Y+C5pWw77yM5pyA5bCR55qE5Y+C5pWw5bCx5piv77ya6LSm5Y+35aSH5rOoI0Nvb2tpZeWPguaVsCMjI+aUr+S7mOWuneWnk+WQjSPmlK/ku5jlrp3otKblj7cKKgoqIOWinuWKoCDoh6rlrprkuYnmo4DmtYvmlofnq6DnrYnlvoXml7bpl7TvvJpteWtreWRSZWFkUG9zdERlbGF577yM6buY6K6k5YC85pivIDE1LTIw56eSCiog5a6a5pe26L+Q6KGM5q+P5Y2K5bCP5pe25LiA5qyhCiog6L6+5Yiw5qCH5YeG6Ieq5Yqo5o+Q546wCiog6L6+5Yiw5qCH5YeG77yM6Ieq5Yqo5o+Q546wCiIiIgoKaW1wb3J0IGhhc2hsaWIKaW1wb3J0IGpzb24KaW1wb3J0IG1hdGgKaW1wb3J0IG9zCmltcG9ydCBzdHJpbmcKaW1wb3J0IHN5cwppbXBvcnQgdGltZQppbXBvcnQgcmVxdWVzdHMKaW1wb3J0IHJhbmRvbQppbXBvcnQgcmUKZnJvbSB1cmxsaWIucGFyc2UgaW1wb3J0IHF1b3RlLCB1cmxwYXJzZSwgcGFyc2VfcXMKaW1wb3J0IHVybGxpYjMKZnJvbSB1cmxsaWIucGFyc2UgaW1wb3J0IHBhcnNlX3FzLCB1cmxzcGxpdAoKdXJsbGliMy5kaXNhYmxlX3dhcm5pbmdzKCkKCiMg5aGrd3hwdXNoZXLnmoRhcHBUb2tlbu+8jOmFjee9ruWcqOeOr+Wig+WPmOmHj+mHjOi/meagt+ayoemFjee9rueahOi0puWPt+S8muiHquWKqOS9v+eUqOi/meS4quaOqOmAgQp3eHB1c2hlckFwcFRva2VuID0gb3MuZ2V0ZW52KCJ3eHB1c2hlckFwcFRva2VuIikgb3IgIiIKd3hwdXNoZXJUb3BpY0lkID0gb3MuZ2V0ZW52KCJ3eHB1c2hlclRvcGljSWQiKSBvciAiIgp3ZWNoYXRCdXNzaW5lc3NLZXkgPSBvcy5nZXRlbnYoIndlY2hhdEJ1c3NpbmVzc0tleSIpIG9yICIiCm15a2t5ZERldGVjdGluZ1NlYWxTdGF0dXMgPSBUcnVlCm15a2t5ZERpc2FibGVkRGV0ZWN0aW5nU2VhbFNldHRpbmcgPSBvcy5nZXRlbnYoIm15a2t5ZERpc2FibGVkRGV0ZWN0aW5nU2VhbCIpCmlmIG15a2t5ZERpc2FibGVkRGV0ZWN0aW5nU2VhbFNldHRpbmcgbm90IGluIFsiIiwgTm9uZV06CiAgICBpZiBteWtreWREaXNhYmxlZERldGVjdGluZ1NlYWxTZXR0aW5nIGluIFsiMSIsICJ0cnVlIiwgVHJ1ZV06CiAgICAgICAgbXlra3lkRGV0ZWN0aW5nU2VhbFN0YXR1cyA9IEZhbHNlCnJlYWRQb3N0RGVsYXkgPSAwCmlmIG9zLmdldGVudigibXlra3lkUmVhZFBvc3REZWxheSIpIGFuZCBvcy5nZXRlbnYoIm15a2t5ZFJlYWRQb3N0RGVsYXkiKS5pc2RlY2ltYWwoKToKICAgIHJlYWRQb3N0RGVsYXkgPSBpbnQob3MuZ2V0ZW52KCJteWtreWRSZWFkUG9zdERlbGF5IikpCgoKZGVmIGV4dHJhY3RfbWlkZGxlX3RleHQoc291cmNlLCBiZWZvcmVfdGV4dCwgYWZ0ZXJfdGV4dCwgYWxsX21hdGNoZXM9RmFsc2UpOgogICAgcmVzdWx0cyA9IFtdCiAgICBzdGFydF9pbmRleCA9IHNvdXJjZS5maW5kKGJlZm9yZV90ZXh0KQoKICAgIHdoaWxlIHN0YXJ0X2luZGV4ICE9IC0xOgogICAgICAgIHNvdXJjZV9hZnRlcl9iZWZvcmVfdGV4dCA9IHNvdXJjZVtzdGFydF9pbmRleCArIGxlbihiZWZvcmVfdGV4dCkgOl0KICAgICAgICBlbmRfaW5kZXggPSBzb3VyY2VfYWZ0ZXJfYmVmb3JlX3RleHQuZmluZChhZnRlcl90ZXh0KQoKICAgICAgICBpZiBlbmRfaW5kZXggPT0gLTE6CiAgICAgICAgICAgIGJyZWFrCgogICAgICAgIHJlc3VsdHMuYXBwZW5kKHNvdXJjZV9hZnRlcl9iZWZvcmVfdGV4dFs6ZW5kX2luZGV4XSkKICAgICAgICBpZiBub3QgYWxsX21hdGNoZXM6CiAgICAgICAgICAgIGJyZWFrCgogICAgICAgIHNvdXJjZSA9IHNvdXJjZV9hZnRlcl9iZWZvcmVfdGV4dFtlbmRfaW5kZXggKyBsZW4oYWZ0ZXJfdGV4dCkgOl0KICAgICAgICBzdGFydF9pbmRleCA9IHNvdXJjZS5maW5kKGJlZm9yZV90ZXh0KQoKICAgIHJldHVybiByZXN1bHRzIGlmIGFsbF9tYXRjaGVzIGVsc2UgcmVzdWx0c1swXSBpZiByZXN1bHRzIGVsc2UgIiIKCgpkZWYgcHVzaChhcHBUb2tlbiwgdG9waWNJZHMsIHRpdGxlLCBsaW5rLCB0ZXh0LCB0eXBlKToKICAgIGRhdGFwdXN0ID0gewogICAgICAgICJhcHBUb2tlbiI6IGFwcFRva2VuLAogICAgICAgICJjb250ZW50IjogZiIiIjxib2R5IG9ubG9hZD0id2luZG93LmxvY2F0aW9uLmhyZWY9J3tsaW5rfSciPuWHuueOsOajgOa1i+aWh+eroO+8ge+8ge+8gVxuPGEgc3R5bGU9J3BhZGRpbmc6MTBweDtjb2xvcjpyZWQ7Zm9udC1zaXplOjIwcHg7JyBocmVmPSd7bGlua30nPueCueWHu+aIkeaJk+W8gOW+heajgOa1i+aWh+eroDwvYT5cbuivt+WwveW/q+eCueWHu+mTvuaOpeWujOaIkOmYheivu1xu5aSH5rOo77yae3RleHR9PC9ib2R5PiIiIiwKICAgICAgICAic3VtbWFyeSI6IHRpdGxlIG9yICLnjKvnjKvnnIvnnIvpmIXor7siLAogICAgICAgICJjb250ZW50VHlwZSI6IDIsCiAgICAgICAgInRvcGljSWRzIjogW3RvcGljSWRzIG9yICIxMTY4NiJdLAogICAgICAgICJ1cmwiOiBsaW5rLAogICAgfQogICAgIyBwcmludChkYXRhcHVzdCkKICAgIHVybHB1c3QgPSAiaHR0cDovL3d4cHVzaGVyLnpqaWVjb2RlLmNvbS9hcGkvc2VuZC9tZXNzYWdlIgogICAgdHJ5OgogICAgICAgIHAgPSByZXF1ZXN0cy5wb3N0KHVybD11cmxwdXN0LCBqc29uPWRhdGFwdXN0LCB2ZXJpZnk9RmFsc2UpCiAgICAgICAgIyBwcmludChwKQogICAgICAgIGlmIHAuanNvbigpWyJjb2RlIl0gPT0gMTAwMDoKICAgICAgICAgICAgcHJpbnQoIuKchSDmjqjpgIHmlofnq6DliLDlvq7kv6HmiJDlip/vvIzor7flsL3lv6vliY3lvoDngrnlh7vmlofnq6DvvIzkuI3nhLblsLHpu5Hlj7fllabvvIEiKQogICAgICAgICAgICByZXR1cm4gVHJ1ZQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHByaW50KCLinYwg5o6o6YCB5paH56ug5Yiw5b6u5L+h5aSx6LSl77yM5a6M54qK5a2Q77yM6KaB6buR5Y+35LqG77yBIikKICAgICAgICAgICAgcmV0dXJuIEZhbHNlCiAgICBleGNlcHQ6CiAgICAgICAgcHJpbnQoIuKdjCDmjqjpgIHmlofnq6DliLDlvq7kv6HlpLHotKXvvIzlrozniorlrZDvvIzopoHpu5Hlj7fkuobvvIEiKQogICAgICAgIHJldHVybiBGYWxzZQoKCmRlZiBwdXNoV2VjaGF0QnVzc2luZXNzKHJvYm90S2V5LCBsaW5rKToKICAgIGRhdGFwdXN0ID0geyJtc2d0eXBlIjogInRleHQiLCAidGV4dCI6IHsiY29udGVudCI6IGxpbmt9fQogICAgIyBwcmludChkYXRhcHVzdCkKICAgIHVybHB1c3QgPSAiaHR0cHM6Ly9xeWFwaS53ZWl4aW4ucXEuY29tL2NnaS1iaW4vd2ViaG9vay9zZW5kP2tleT0iICsgcm9ib3RLZXkKICAgIHRyeToKICAgICAgICBwID0gcmVxdWVzdHMucG9zdCh1cmw9dXJscHVzdCwganNvbj1kYXRhcHVzdCwgdmVyaWZ5PUZhbHNlKQogICAgICAgICMgcHJpbnQocCkKICAgICAgICBpZiBwLmpzb24oKVsiZXJyY29kZSJdID09IDA6CiAgICAgICAgICAgIHByaW50KCLinIUg5o6o6YCB5paH56ug5Yiw5LyB5Lia5b6u5L+h5oiQ5Yqf77yBIikKICAgICAgICAgICAgcmV0dXJuIFRydWUKICAgICAgICBlbHNlOgogICAgICAgICAgICBwcmludCgi4p2MIOaOqOmAgeaWh+eroOWIsOS8geS4muW+ruS/oeWksei0pe+8gSIpCiAgICAgICAgICAgIHJldHVybiBGYWxzZQogICAgZXhjZXB0OgogICAgICAgIHByaW50KCLinYwg5o6o6YCB5paH56ug5Yiw5LyB5Lia5b6u5L+h5aSx6LSl77yBIikKICAgICAgICByZXR1cm4gRmFsc2UKCgpkZWYgZ2V0aW5mbyhsaW5rKToKICAgIHRyeToKICAgICAgICByID0gcmVxdWVzdHMuZ2V0KGxpbmssIHZlcmlmeT1GYWxzZSkKICAgICAgICAjIHByaW50KGxpbmssIHIudGV4dCkKICAgICAgICBodG1sID0gcmUuc3ViKCJccyIsICIiLCByLnRleHQpCiAgICAgICAgYml6ID0gcmUuZmluZGFsbCgndmFyYml6PSIoLio/KSJcfFx8JywgaHRtbCkKICAgICAgICBpZiBiaXogIT0gW106CiAgICAgICAgICAgIGJpeiA9IGJpelswXQogICAgICAgIGlmIGJpeiA9PSAiIiBvciBiaXogPT0gW106CiAgICAgICAgICAgIGlmICJfX2JpeiIgaW4gbGluazoKICAgICAgICAgICAgICAgIGJpeiA9IHJlLmZpbmRhbGwoIl9fYml6PSguKj8pJiIsIGxpbmspCiAgICAgICAgICAgICAgICBpZiBiaXogIT0gW106CiAgICAgICAgICAgICAgICAgICAgYml6ID0gYml6WzBdCiAgICAgICAgbmlja25hbWUgPSByZS5maW5kYWxsKCd2YXJuaWNrbmFtZT1odG1sRGVjb2RlXCgiKC4qPykiXCk7JywgaHRtbCkKICAgICAgICBpZiBuaWNrbmFtZSAhPSBbXToKICAgICAgICAgICAgbmlja25hbWUgPSBuaWNrbmFtZVswXQogICAgICAgIHVzZXJfbmFtZSA9IHJlLmZpbmRhbGwoJ3ZhcnVzZXJfbmFtZT0iKC4qPykiOycsIGh0bWwpCiAgICAgICAgaWYgdXNlcl9uYW1lICE9IFtdOgogICAgICAgICAgICB1c2VyX25hbWUgPSB1c2VyX25hbWVbMF0KICAgICAgICBtc2dfdGl0bGUgPSByZS5maW5kYWxsKCJ2YXJtc2dfdGl0bGU9JyguKj8pJ1wuaHRtbFwoIiwgaHRtbCkKICAgICAgICBpZiBtc2dfdGl0bGUgIT0gW106CiAgICAgICAgICAgIG1zZ190aXRsZSA9IG1zZ190aXRsZVswXQogICAgICAgIHRleHQgPSBmIuWFrOS8l+WPt+WUr+S4gOagh+ivhu+8mntiaXp9fOaWh+eroDp7bXNnX3RpdGxlfXzkvZzogIU6e25pY2tuYW1lfXzotKblj7c6e3VzZXJfbmFtZX0iCiAgICAgICAgcHJpbnQodGV4dCkKICAgICAgICByZXR1cm4gbmlja25hbWUsIHVzZXJfbmFtZSwgbXNnX3RpdGxlLCB0ZXh0LCBiaXoKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAjIHByaW50KGUpCiAgICAgICAgcHJpbnQoIuKdjCDmj5Dlj5bmlofnq6Dkv6Hmga/lpLHotKUiKQogICAgICAgIHJldHVybiBGYWxzZQoKCmRlZiB0cygpOgogICAgcmV0dXJuIHN0cihpbnQodGltZS50aW1lKCkpKSArICIwMDAiCgoKY2hlY2tEaWN0ID0gewogICAgIk16a3hOVEUzTXpRNE1RPT0iOiBbIummmeWnkOeIseaXheihjCIsICJnaF81NGE2NWRjNjAwMzkiXSwKICAgICJNemc1TWpNME1ERXdOdz09IjogWyLmiJHmnKzpnZ7lh6EiLCAiZ2hfNDZiMDc2OTAzNDczIl0sCiAgICAiTXpVek9EWTROekUyT1E9PSI6IFsi5aSa6IKJ6JGh6JCEMjAyMCIsICJnaF9iM2Q3OWNkMWUxYjUiXSwKICAgICJNemt5TWpFM016WXhNZz09IjogWyJZb3VoZnVsIiwgImdoX2IzZDc5Y2QxZTFiNSJdLAogICAgIk16a3hOak13TkRJek9BPT0iOiBbIuWwkeW5tOayoeacieS5jOaJmOmCpjMiLCAiZ2hfYjNkNzljZDFlMWI1Il0sCiAgICAiTXpnM056VXhNamM1TWc9PSI6IFsi5pif5pif6K+66KiAIiwgImdoX2IzZDc5Y2QxZTFiNSJdLAogICAgIk16ZzROVGN3T0RFMU5BPT0iOiBbIuaWkemprOi/mOayoeedoTEyMyIsICJnaF9iM2Q3OWNkMWUxYjUiXSwKICAgICJNemswT0RJeE9ERTRPUT09IjogWyLmjIHlrrblppnmi5vlrp3lhbgiLCAiZ2hfYjNkNzljZDFlMWI1Il0sCiAgICAiTXpnMk5qVXlNakkxTkE9PSI6IFsiTGlsaW5uZyIsICJnaF9iM2Q3OWNkMWUxYjUiXSwKICAgICJNekl6TURjek9EZzRNdz09IjogWyLmnInmlYXkuovnmoTlkIzlraZZIiwgImdoX2IzZDc5Y2QxZTFiNSJdLAogICAgIk16ZzVPRFV5TXpZek1RPT0iOiBbIjc4OeS5n+S4jeihjCIsICJnaF9iM2Q3OWNkMWUxYjUiXSwKICAgICJNelUwTnpJNU1qYzRPUT09IjogWyLnmq7om4vnmKbogonnjKoiLCAiZ2hfNThkN2VlNTkzYjg2Il0sCiAgICAiTXpnNU1EZ3hPREF6TWc9PSI6IFsi5YyX5YyX5bCP5Yqp5omLIiwgImdoXzU4ZDdlZTU5M2I4NiJdLAogICAgIk16SXpNRGN6T0RnNE13PT0iOiBbIuacieaVheS6i+eahOWQjOWtplkiLCAiZ2hfYjhiOTI5MzRkYTVmIl0sCiAgICAiTXpreE5EVTFOREV6Tnc9PSI6IFsi54yr54yr55yL55yL5pyN5YqhIiwgImdoX2U1MGNmZWZlZjllNSJdLAp9CgoKY2xhc3MgSEhZRDoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBjZyk6CiAgICAgICAgc2VsZi5Db29raWUgPSBjZ1siQ29va2llIl0KICAgICAgICBzZWxmLnR4YnogPSBjZ1sidHhieiJdCiAgICAgICAgc2VsZi50b3BpY0lkcyA9IGNnWyJ0b3BpY0lkcyJdCiAgICAgICAgc2VsZi5hcHBUb2tlbiA9IGNnWyJhcHBUb2tlbiJdCiAgICAgICAgZ2xvYmFsIHdlY2hhdEJ1c3NpbmVzc0tleQogICAgICAgIHNlbGYud2VjaGF0QnVzc2luZXNzS2V5ID0gd2VjaGF0QnVzc2luZXNzS2V5IG9yICIiCiAgICAgICAgc2VsZi5hbGlBY2NvdW50ID0gY2dbImFsaUFjY291bnQiXSBvciAiIgogICAgICAgIHNlbGYuYWxpTmFtZSA9IGNnWyJhbGlOYW1lIl0gb3IgIiIKICAgICAgICBzZWxmLm5hbWUgPSBjZ1sibmFtZSJdCiAgICAgICAgc2VsZi5kb21uYWluSG9zdCA9ICIxNjk4ODU1MTM5Lmh4aW9uZy50b3AiCiAgICAgICAgc2VsZi5yZXF1ZXN0X2lkID0gIiIKICAgICAgICBzZWxmLmhlYWRlcnMgPSB7CiAgICAgICAgICAgICJDb25uZWN0aW9uIjogImtlZXAtYWxpdmUiLAogICAgICAgICAgICAiQWNjZXB0IjogImFwcGxpY2F0aW9uL2pzb24sIHRleHQvamF2YXNjcmlwdCwgKi8qOyBxPTAuMDEiLAogICAgICAgICAgICAiVXNlci1BZ2VudCI6ICJNb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wOyBXaW42NDsgeDY0KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvMTA3LjAuMC4wIFNhZmFyaS81MzcuMzYgTmV0VHlwZS9XSUZJIE1pY3JvTWVzc2VuZ2VyLzcuMC4yMC4xNzgxKDB4NjcwMDE0M0IpIFdpbmRvd3NXZWNoYXQoMHg2MzA5MDYyMSkgWFdFQi84MzUxIEZsdWUiLAogICAgICAgICAgICAiWC1SZXF1ZXN0ZWQtV2l0aCI6ICJYTUxIdHRwUmVxdWVzdCIsCiAgICAgICAgICAgICJSZWZlcmVyIjogZiJodHRwOi8ve3NlbGYuZG9tbmFpbkhvc3R9LyIsCiAgICAgICAgICAgICJPcmlnaW4iOiBmImh0dHA6Ly97c2VsZi5kb21uYWluSG9zdH0iLAogICAgICAgICAgICAjICJIb3N0IjogZiJ7c2VsZi5kb21uYWluSG9zdH0iLAogICAgICAgICAgICAiQWNjZXB0LUVuY29kaW5nIjogImd6aXAsIGRlZmxhdGUiLAogICAgICAgICAgICAiQWNjZXB0LUxhbmd1YWdlIjogInpoLUNOLHpoIiwKICAgICAgICAgICAgIkNvbnRlbnQtVHlwZSI6ICJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7IGNoYXJzZXQ9VVRGLTgiLAogICAgICAgICAgICAiQ29va2llIjogc2VsZi5Db29raWUsCiAgICAgICAgfQogICAgICAgIHNlbGYuc2VjID0gcmVxdWVzdHMuc2Vzc2lvbigpCiAgICAgICAgc2VsZi5zZWMudmVyaWZ5ID0gRmFsc2UKICAgICAgICBzZWxmLnNlYy5oZWFkZXJzID0gc2VsZi5oZWFkZXJzCiAgICAgICAgc2VsZi5sYXN0Yml6ID0gIiIKICAgICAgICBzZWxmLnJlYWRKdW1wUGF0aCA9ICIiCgogICAgZGVmIHVzZXJfaW5mbyhzZWxmKToKICAgICAgICB1ID0gZiJodHRwOi8ve3NlbGYuZG9tbmFpbkhvc3R9L2hhb2Jhb2Jhby91c2VyIgogICAgICAgIHIgPSAiIgogICAgICAgIHRyeToKICAgICAgICAgICAgciA9IHNlbGYuc2VjLmdldCh1KQogICAgICAgICAgICByaiA9IHIuanNvbigpCiAgICAgICAgICAgIGlmIHJqLmdldCgiZXJyY29kZSIpID09IDA6CiAgICAgICAgICAgICAgICBwcmludChmIui0puWPt1t7c2VsZi5uYW1lfV3ojrflj5bkv6Hmga/miJDlip/vvIznlKjmiLdJROS4uiB7ci5qc29uKClbJ2RhdGEnXVsndXNlcmlkJ119IikKICAgICAgICAgICAgICAgIHJldHVybiBUcnVlCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBwcmludChmIui0puWPt1t7c2VsZi5uYW1lfV3ojrflj5bnlKjmiLfkv6Hmga/lpLHotKXvvIzotKblj7flvILluLgg5oiW6ICFIENvb2tpZeaXoOaViO+8jOivt+ajgOa1i0Nvb2tpZeaYr+WQpuato+ehriIpCiAgICAgICAgICAgICAgICByZXR1cm4gRmFsc2UKICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgIHByaW50KHIudGV4dCkKICAgICAgICAgICAgcHJpbnQoZiLotKblj7dbe3NlbGYubmFtZX1d6I635Y+W55So5oi35L+h5oGv5aSx6LSlLENvb2tpZeaXoOaViO+8jOivt+ajgOa1i0Nvb2tpZeaYr+WQpuato+ehriIpCiAgICAgICAgICAgIHJldHVybiBGYWxzZQoKICAgIGRlZiBnb2xkKHNlbGYpOgogICAgICAgIHIgPSAiIgogICAgICAgIHRyeToKICAgICAgICAgICAgdSA9IGYiaHR0cDovL3tzZWxmLmRvbW5haW5Ib3N0fS9oYW9iYW9iYW8vd29ya2luZm8iCiAgICAgICAgICAgIHIgPSBzZWxmLnNlYy5nZXQodSkKICAgICAgICAgICAgIyBwcmludChyLmpzb24oKSkKICAgICAgICAgICAgcmogPSByLmpzb24oKQogICAgICAgICAgICBzZWxmLnJlbWFpbl9nb2xkID0gbWF0aC5mbG9vcihpbnQocmouZ2V0KCJkYXRhIikuZ2V0KCJyZW1haW5fZ29sZCIpKSkKICAgICAgICAgICAgc2VsZi5yZW1haW4gPSBmbG9hdChyai5nZXQoImRhdGEiKS5nZXQoInJlbWFpbiIpKQogICAgICAgICAgICBwcmludCgKICAgICAgICAgICAgICAgIGYn5LuK5pel5bey57uP6ZiF6K+75LqGe3JqLmdldCgiZGF0YSIpLmdldCgiZGF5cmVhZHMiKX3nr4fmlofnq6Ag5b2T5YmN6YeR5biBe3JqLmdldCgiZGF0YSIpLmdldCgicmVtYWluX2dvbGQiKX0g5b2T5YmN5L2Z6aKde3NlbGYucmVtYWlufScKICAgICAgICAgICAgKQogICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgcHJpbnQoZiLotKblj7dbe3NlbGYubmFtZX1d6I635Y+W6YeR5biB5aSx6LSlIikKICAgICAgICAgICAgcmV0dXJuIEZhbHNlCgogICAgZGVmIGdldEtleShzZWxmKToKICAgICAgICB1ayA9ICIiCiAgICAgICAgdWtSZXMgPSBOb25lCiAgICAgICAgZm9yIGkgaW4gcmFuZ2UoMTApOgogICAgICAgICAgICB1ID0gZiJodHRwOi8ve3NlbGYuZG9tbmFpbkhvc3R9e3NlbGYucmVhZEp1bXBQYXRofSIKICAgICAgICAgICAgIyBwcmludCgi5o+Q56S6IGdldEtlee+8miIsIHUpCiAgICAgICAgICAgIHAgPSBmIiIKICAgICAgICAgICAgciA9IHJlcXVlc3RzLnBvc3QodSwgaGVhZGVycz1zZWxmLmhlYWRlcnMsIGRhdGE9cCwgdmVyaWZ5PUZhbHNlKQogICAgICAgICAgICAjIHByaW50KCJnZXRLZXnvvJoiLCByLnRleHQpCiAgICAgICAgICAgIHJqID0gci5qc29uKCkKICAgICAgICAgICAgZG9tYWluID0gcmouZ2V0KCJkYXRhIikuZ2V0KCJkb21haW4iKQogICAgICAgICAgICAjIHByaW50KCLor7fmsYLkuK3ovazpobXvvJoiLCByLnRleHQpCiAgICAgICAgICAgIHBwID0gcGFyc2VfcXModXJscGFyc2UoZG9tYWluKS5xdWVyeSkKICAgICAgICAgICAgaG4gPSB1cmxwYXJzZShkb21haW4pLm5ldGxvYwogICAgICAgICAgICB1ayA9IHBwLmdldCgidWsiKVswXQogICAgICAgICAgICB1a1JlcyA9IHIudGV4dAogICAgICAgICAgICBpZiB1azoKICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgaWYgdWsgPT0gIiI6CiAgICAgICAgICAgIHByaW50KGYi6LSm5Y+3W3tzZWxmLm5hbWV9XeiOt+WPlnVr5aSx6LSl77yM6L+U5Zue6ZSZ6K+v77yae3VrUmVzfSIpCiAgICAgICAgICAgIHJldHVybgogICAgICAgIHRpbWUuc2xlZXAoOCkKICAgICAgICByID0gcmVxdWVzdHMuZ2V0KAogICAgICAgICAgICBkb21haW4sCiAgICAgICAgICAgIGhlYWRlcnM9ewogICAgICAgICAgICAgICAgIkFjY2VwdCI6ICJ0ZXh0L2h0bWwsYXBwbGljYXRpb24veGh0bWwreG1sLGFwcGxpY2F0aW9uL3htbDtxPTAuOSxpbWFnZS9hdmlmLGltYWdlL3dlYnAsaW1hZ2UvYXBuZywqLyo7cT0wLjgsYXBwbGljYXRpb24vc2lnbmVkLWV4Y2hhbmdlO3Y9YjM7cT0wLjkiLAogICAgICAgICAgICAgICAgIkFjY2VwdC1FbmNvZGluZyI6ICJnemlwLCBkZWZsYXRlLCBiciIsCiAgICAgICAgICAgICAgICAiQWNjZXB0LUxhbmd1YWdlIjogInpoLUNOLHpoO3E9MC45IiwKICAgICAgICAgICAgICAgICJDb25uZWN0aW9uIjogImtlZXAtYWxpdmUiLAogICAgICAgICAgICAgICAgIkhvc3QiOiBmIntobn0iLAogICAgICAgICAgICAgICAgIlNlYy1GZXRjaC1EZXN0IjogImRvY3VtZW50IiwKICAgICAgICAgICAgICAgICJTZWMtRmV0Y2gtTW9kZSI6ICJuYXZpZ2F0ZSIsCiAgICAgICAgICAgICAgICAiU2VjLUZldGNoLVNpdGUiOiAibm9uZSIsCiAgICAgICAgICAgICAgICAiU2VjLUZldGNoLVVzZXIiOiAiPzEiLAogICAgICAgICAgICAgICAgIlVwZ3JhZGUtSW5zZWN1cmUtUmVxdWVzdHMiOiAiMSIsCiAgICAgICAgICAgICAgICAiVXNlci1BZ2VudCI6ICJNb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wOyBXaW42NDsgeDY0KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvMTA3LjAuMC4wIFNhZmFyaS81MzcuMzYgTmV0VHlwZS9XSUZJIE1pY3JvTWVzc2VuZ2VyLzcuMC4yMC4xNzgxKDB4NjcwMDE0M0IpIFdpbmRvd3NXZWNoYXQoMHg2MzA5MDcxZCkgWFdFQi84NDYxIEZsdWUiLAogICAgICAgICAgICB9LAogICAgICAgICAgICB2ZXJpZnk9RmFsc2UsCiAgICAgICAgKQogICAgICAgICMgcHJpbnQoZiLotKblj7dbe3NlbGYubmFtZX1dIOmYheivu+WHhuWkh+WujOaIkO+8mnt1a33vvIzmj5Dlj5bliLDnmoTlnLDlnYDvvJp7ZG9tYWlufSIpCiAgICAgICAgcHJpbnQoZiLotKblj7dbe3NlbGYubmFtZX1dIOmYheivu+WHhuWkh+aIkOWKnyDljbPlsIblvIDlp4vpmIXor7sg4pyFIO+8jOmYheivu+WPguaVsOS4uu+8mnt1a30iKQogICAgICAgIGggPSB7CiAgICAgICAgICAgICJBY2NlcHQiOiAiYXBwbGljYXRpb24vanNvbiwgdGV4dC9qYXZhc2NyaXB0LCAqLyo7IHE9MC4wMSIsCiAgICAgICAgICAgICJBY2NlcHQtRW5jb2RpbmciOiAiZ3ppcCwgZGVmbGF0ZSwgYnIiLAogICAgICAgICAgICAiQWNjZXB0LUxhbmd1YWdlIjogInpoLUNOLHpoO3E9MC45IiwKICAgICAgICAgICAgIkNvbm5lY3Rpb24iOiAia2VlcC1hbGl2ZSIsCiAgICAgICAgICAgICJIb3N0IjogaG4sCiAgICAgICAgICAgICJPcmlnaW4iOiBmImh0dHBzOi8ve2hufSIsCiAgICAgICAgICAgICJTZWMtRmV0Y2gtRGVzdCI6ICJlbXB0eSIsCiAgICAgICAgICAgICJTZWMtRmV0Y2gtTW9kZSI6ICJjb3JzIiwKICAgICAgICAgICAgIlNlYy1GZXRjaC1TaXRlIjogImNyb3NzLXNpdGUiLAogICAgICAgICAgICAiVXNlci1BZ2VudCI6ICJNb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wOyBXaW42NDsgeDY0KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvMTA3LjAuMC4wIFNhZmFyaS81MzcuMzYgTmV0VHlwZS9XSUZJIE1pY3JvTWVzc2VuZ2VyLzcuMC4yMC4xNzgxKDB4NjcwMDE0M0IpIFdpbmRvd3NXZWNoYXQoMHg2MzA5MDcxZCkgWFdFQi84NDYxIEZsdWUiLAogICAgICAgIH0KICAgICAgICByZXR1cm4gdWssIGgKCiAgICBkZWYgcmVhZChzZWxmKToKICAgICAgICBpbmZvID0gc2VsZi5nZXRLZXkoKQogICAgICAgIGlmIGxlbihpbmZvKSA9PSAwOgogICAgICAgICAgICBwcmludChmIui0puWPt1t7c2VsZi5uYW1lfV3ojrflj5bpmIXor7vlj4LmlbDlpLHotKXvvIzlgZzmraLlvoDlkI7pmIXor7vvvIHimqDvuI8gIikKICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgIyBwcmludChpbmZvKQogICAgICAgIHRpbWUuc2xlZXAoMikKICAgICAgICBhcmN0aWxlVGltZSA9IDEKICAgICAgICB3aGlsZSBUcnVlOgogICAgICAgICAgICByZXMgPSB7ImVycmNvZGUiOiAtMX0KICAgICAgICAgICAgcmVmcmVzaFRpbWUgPSAwCiAgICAgICAgICAgIHdoaWxlIHJlc1siZXJyY29kZSJdICE9IDA6CiAgICAgICAgICAgICAgICB0aW1lU3RhbXAgPSBzdHIodHMoKSkKICAgICAgICAgICAgICAgIG15c2lnbiA9IGhhc2hsaWIubWQ1KAogICAgICAgICAgICAgICAgICAgIChpbmZvWzFdWyJIb3N0Il0gKyB0aW1lU3RhbXAgKyAiTGoqP1EzI3BPdmlXIikuZW5jb2RlKCkKICAgICAgICAgICAgICAgICkuaGV4ZGlnZXN0KCkKICAgICAgICAgICAgICAgIHNlbGYucGFyYW1zID0gewogICAgICAgICAgICAgICAgICAgICJ1ayI6IGluZm9bMF0sCiAgICAgICAgICAgICAgICAgICAgInRpbWUiOiB0aW1lU3RhbXAsCiAgICAgICAgICAgICAgICAgICAgIm15c2lnbiI6IG15c2lnbiwKICAgICAgICAgICAgICAgICAgICAidiI6ICI0LjAiLAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdSA9IGYiaHR0cHM6Ly9uc3IuenNmMjAyM2U0NTguY2xvdWQvaGFvYmFvYmFvL2dldHJlYWQyIgogICAgICAgICAgICAgICAgIyBwcmludCgKICAgICAgICAgICAgICAgICMgICAgICLpmIXor7vmlofnq6Dlj4LmlbDmn6XnnIvvvJoiLAogICAgICAgICAgICAgICAgIyAgICAgdSwKICAgICAgICAgICAgICAgICMgICAgIHNlbGYucGFyYW1zLAogICAgICAgICAgICAgICAgIyAgICAgaW5mbywKICAgICAgICAgICAgICAgICMgICAgIGluZm9bMV1bIk9yaWdpbiJdLnJlcGxhY2UoImh0dHBzOi8vIiwgIiIpLnJlcGxhY2UoIi8iLCAiIiksCiAgICAgICAgICAgICAgICAjICkKICAgICAgICAgICAgICAgIHIgPSByZXF1ZXN0cy5nZXQoCiAgICAgICAgICAgICAgICAgICAgdSwgaGVhZGVycz1pbmZvWzFdLCBwYXJhbXM9c2VsZi5wYXJhbXMsIHZlcmlmeT1GYWxzZSwgdGltZW91dD02MAogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgcHJpbnQoIi0iICogNTApCiAgICAgICAgICAgICAgICAjIHByaW50KAogICAgICAgICAgICAgICAgIyAgICAgZiLotKblj7dbe3NlbGYubmFtZX1d56ysW3tyZWZyZXNoVGltZSsxfV3mrKHojrflj5bpmIXor7vmlofnq6Bbe2luZm9bMF19XeebrueahOmhte+8mntyLnRleHR9IgogICAgICAgICAgICAgICAgIyApCiAgICAgICAgICAgICAgICBpZiByLnRleHQgYW5kIHIuanNvbigpWyJlcnJjb2RlIl0gPT0gMDoKICAgICAgICAgICAgICAgICAgICByZXMgPSByLmpzb24oKQogICAgICAgICAgICAgICAgICAgIHByaW50KAogICAgICAgICAgICAgICAgICAgICAgICBmIui0puWPt1t7c2VsZi5uYW1lfV3nrKxbe3JlZnJlc2hUaW1lKzF9XeasoeiOt+WPluesrFt7YXJjdGlsZVRpbWV9Xeevh+mYheivu+aWh+eroFt7aW5mb1swXX1d6Lez6L2s6ZO+5o6l5oiQ5YqfIgogICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgZGVjb2RlZF9zdHIgPSBqc29uLmxvYWRzKHIudGV4dCkKICAgICAgICAgICAgICAgICAgICBpZiBkZWNvZGVkX3N0clsibXNnIl06CiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZiLotKblj7dbe3NlbGYubmFtZX1d56ysW3tyZWZyZXNoVGltZSsxfV3mrKHojrflj5bnrKxbe2FyY3RpbGVUaW1lfV3nr4fpmIXor7vmlofnq6Bbe2luZm9bMF19Xei3s+i9rOmTvuaOpeWksei0pe+8mntkZWNvZGVkX3N0clsnbXNnJ119IgogICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBGYWxzZQogICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZiLotKblj7dbe3NlbGYubmFtZX1d56ysW3tyZWZyZXNoVGltZSsxfV3mrKHojrflj5bnrKxbe2FyY3RpbGVUaW1lfV3nr4fpmIXor7vmlofnq6Bbe2luZm9bMF19Xei3s+i9rOmTvuaOpeWksei0pe+8mntyLnRleHR9IgogICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDEuNSkKICAgICAgICAgICAgICAgIHJlZnJlc2hUaW1lID0gcmVmcmVzaFRpbWUgKyAxCiAgICAgICAgICAgICAgICBpZiByZWZyZXNoVGltZSA+PSA1OgogICAgICAgICAgICAgICAgICAgIHByaW50KGYi4pqg77iPIOi0puWPt1t7c2VsZi5uYW1lfV3ojrflj5bpmIXor7vnrKxbe2FyY3RpbGVUaW1lfV3nr4fmlofnq6Bbe2luZm9bMF19Xei2heaXtuKApuKApiIpCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICAgIHdlY2hhdFBvc3RMaW5rID0gIiIKICAgICAgICAgICAgaWYgcmVzLmdldCgiZXJyY29kZSIpID09IDA6CiAgICAgICAgICAgICAgICByZXR1cm5MaW5rID0gIiIKICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICByZXR1cm5MaW5rID0gcmVzLmdldCgiZGF0YSIpLmdldCgibGluayIpCiAgICAgICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgICAgICAgICAgcHJpbnQoCiAgICAgICAgICAgICAgICAgICAgICAgIGYi4pqg77iPIOi0puWPt1t7c2VsZi5uYW1lfV3ojrflj5bpmIXor7vnrKxbe2FyY3RpbGVUaW1lfV3nr4fmlofnq6Bbe2luZm9bMF19XemTvuaOpeWksei0pe+8jOeWkeS8vOWPsOWtkOaOpeWPo+WkquWeg+Wcvu+8jOW0qeS6hu+8jOi/lOWbnuaVsOaNruS4uu+8miIsCiAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5nZXQoImRhdGEiKSwKICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgICAgIGlmICJtcC53ZWl4aW4ucXEuY29tIiBpbiByZXR1cm5MaW5rOgogICAgICAgICAgICAgICAgICAgIHByaW50KGYi6LSm5Y+3W3tzZWxmLm5hbWV9XSDpmIXor7vnrKxbe2FyY3RpbGVUaW1lfV3nr4flvq7kv6Hmlofnq6DvvJp7cmV0dXJuTGlua30iKQogICAgICAgICAgICAgICAgICAgIHdlY2hhdFBvc3RMaW5rID0gcmV0dXJuTGluawogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAjIHByaW50KGYi6LSm5Y+3W3tzZWxmLm5hbWV9XSDpmIXor7vnrKxbe2FyY3RpbGVUaW1lfV3nr4fmlofnq6Dlh4blpIfot7PovazvvJp7bGlua30iKQogICAgICAgICAgICAgICAgICAgIHdlY2hhdFBvc3RMaW5rID0gc2VsZi5qdW1wKHJldHVybkxpbmspCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoZiLotKblj7dbe3NlbGYubmFtZX1dIOmYheivu+esrFt7YXJjdGlsZVRpbWV9Xeevh+W+ruS/oeaWh+eroO+8mnt3ZWNoYXRQb3N0TGlua30iKQogICAgICAgICAgICAgICAgcHJpbnQoZiLotKblj7dbe3NlbGYubmFtZX1dIOmYheivu+esrFt7YXJjdGlsZVRpbWV9Xeevh+aWh+eroO+8mnt3ZWNoYXRQb3N0TGlua30iKQogICAgICAgICAgICAgICAgYSA9IGdldGluZm8od2VjaGF0UG9zdExpbmspCiAgICAgICAgICAgICAgICBpZiBhID09IEZhbHNlOgogICAgICAgICAgICAgICAgICAgIHByaW50KAogICAgICAgICAgICAgICAgICAgICAgICBmIuKaoO+4jyDotKblj7dbe3NlbGYubmFtZX1d5ZugIOiOt+WPluWFrOS8l+WPt+aWh+eroOS/oeaBr+S4jeaIkOWKn++8jOWvvOiHtOmYheivu+esrFt7YXJjdGlsZVRpbWV9Xeevh+aWh+eroFt7aW5mb1swXX1dIOWksei0peKApuKApiIKICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEZhbHNlCiAgICAgICAgICAgICAgICBzbGVlcFRpbWUgPSByYW5kb20ucmFuZGludCg3LCAxMCkKICAgICAgICAgICAgICAgICMg5aaC5p6c5piv5qOA5rWL54m55b6B5Yiw55qE5paH56ugIOaIluiAhSDlkI7kuIDnr4fmlofnq6DkuI7liY3kuIDnr4fnm7jkvLwKICAgICAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICAgICAgICBjaGVja0RpY3QuZ2V0KGFbNF0pICE9IE5vbmUKICAgICAgICAgICAgICAgICAgICBvciAocmVzLmdldCgiZGF0YSIpLmdldCgiYSIpID09IDIpCiAgICAgICAgICAgICAgICAgICAgb3IgKCImY2hrc209IiBpbiB3ZWNoYXRQb3N0TGluaykKICAgICAgICAgICAgICAgICk6CiAgICAgICAgICAgICAgICAgICAgc2xlZXBUaW1lID0gcmVhZFBvc3REZWxheSBvciByYW5kb20ucmFuZGludCgxNSwgMjApCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoCiAgICAgICAgICAgICAgICAgICAgICAgIGYi4pqg77iPIOi0puWPt1t7c2VsZi5uYW1lfV3pmIXor7vnrKxbe2FyY3RpbGVUaW1lfV3nr4fmlofnq6Bbe2luZm9bMF19XSDmo4DmtYvliLDnlpHkvLzmo4DmtYvmlofnq6DvvIzmraPlnKjmjqjpgIHvvIznrYnlvoXov4fmo4DmtYvvvIznrYnlvoXml7bpl7TvvJp7c2xlZXBUaW1lfeenkuOAguOAguOAgiIKICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgaWYgc2VsZi53ZWNoYXRCdXNzaW5lc3NLZXk6CiAgICAgICAgICAgICAgICAgICAgICAgIHB1c2hXZWNoYXRCdXNzaW5lc3Moc2VsZi53ZWNoYXRCdXNzaW5lc3NLZXksIHdlY2hhdFBvc3RMaW5rKQogICAgICAgICAgICAgICAgICAgIGVsaWYgc2VsZi5hcHBUb2tlbjoKICAgICAgICAgICAgICAgICAgICAgICAgcHVzaCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuYXBwVG9rZW4sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnRvcGljSWRzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIueMq+eMq+eci+eci+mYheivu+i/h+ajgOa1iyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3ZWNoYXRQb3N0TGluaywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGYi6LSm5Y+3W3tzZWxmLm5hbWV9XemYheivu+esrFt7YXJjdGlsZVRpbWV9Xeevh+aWh+eroFt7aW5mb1swXX1dIOato+WcqOetieW+hei/h+ajgOa1i++8jOetieW+heaXtumXtO+8mntzbGVlcFRpbWV956eSXG7lubvnlJ/mj5DnpLrvvJrlv6vngrnvvIzliKvogL3mkIHml7bpl7TkuobvvIEiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIm15a2t5ZCIsCiAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICBwcmludCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGYi4pqg77iPIOi0puWPt1t7c2VsZi5uYW1lfV3pmIXor7vnrKxbe2FyY3RpbGVUaW1lfV3nr4fmlofnq6Bbe2luZm9bMF19XSDpnIDopoHov4fmo4DmtYvvvIzkvYbmmK/mnKrphY3nva7mjqjpgIF0b2tlbu+8jOS4uuS6humBv+WFjem7keWPt++8jOWBnOatoumYheivu+OAguOAguOAgiIKICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gRmFsc2UKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgcHJpbnQoCiAgICAgICAgICAgICAgICAgICAgICAgIGYi4pyFIOi0puWPt1t7c2VsZi5uYW1lfV3pmIXor7vnrKxbe2FyY3RpbGVUaW1lfV3nr4fmlofnq6Bbe2luZm9bMF19XSDpnZ7mo4DmtYvmlofnq6DvvIzmqKHmi5/or7t7c2xlZXBUaW1lfeenkiIKICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICBsYXN0ZXN0QXJjdGljbGVJZCA9IHdlY2hhdFBvc3RMaW5rCiAgICAgICAgICAgICAgICBzZWxmLmxhc3RiaXogPSBhWzRdCiAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKHNsZWVwVGltZSkKICAgICAgICAgICAgICAgIHUxID0gZiJodHRwOi8vbnNyLnpzZjIwMjNlNDU4LmNsb3VkL2hhb2Jhb2Jhby9hZGRnb2xkczI/dGltZT17c2xlZXBUaW1lfSZ1az17aW5mb1swXX0mcHNpZ249e215c2lnbn0iCiAgICAgICAgICAgICAgICByMSA9IHJlcXVlc3RzLmdldCh1MSwgaGVhZGVycz1pbmZvWzFdLCB2ZXJpZnk9RmFsc2UpCiAgICAgICAgICAgICAgICBpZiByMS50ZXh0IGFuZCByMS5qc29uKCk6CiAgICAgICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgICAgICBwcmludCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGYi4pyFIOi0puWPt1t7c2VsZi5uYW1lfV3pmIXor7vnrKxbe2FyY3RpbGVUaW1lfV3nr4fmlofnq6Bbe2luZm9bMF19XeaJgOW+l+mHkeW4ge+8mntyMS5qc29uKClbJ2RhdGEnXVsnZ29sZCddfeS4qu+8jOi0puaIt+W9k+WJjemHkeW4ge+8mntyMS5qc29uKClbJ2RhdGEnXVsnbGFzdF9nb2xkJ1195Liq77yM5LuK5pel5bey6K+777yae3IxLmpzb24oKVsnZGF0YSddWydkYXlfcmVhZCddfeasoe+8jOS7iuaXpeacquivuyB7cjEuanNvbigpWydkYXRhJ11bJ3JlbWFpbl9yZWFkJ11956+H5paH56ugIgogICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICAgICAgICAgICAgICBwcmludCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGYi4p2MIOi0puWPt1t7c2VsZi5uYW1lfV3pmIXor7vnrKxbe2FyY3RpbGVUaW1lfV3nr4fmlofnq6Bbe2luZm9bMF19XeW8guW4uO+8mntyMS5qc29uKCkuZ2V0KCdtc2cnKX0iCiAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgaWYgIuacrOasoemYheivu+aXoOaViCIgaW4gcjEuanNvbigpLmdldCgibXNnIik6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgcHJpbnQoCiAgICAgICAgICAgICAgICAgICAgICAgIGYi4p2MIOi0puWPt1t7c2VsZi5uYW1lfV3pmIXor7vnrKxbe2FyY3RpbGVUaW1lfV3nr4fmlofnq6Bbe2luZm9bMF19XeWksei0pe+8mntyMS50ZXh0fSIKICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgZWxpZiByZXMuZ2V0KCJlcnJjb2RlIikgPT0gNDA1OgogICAgICAgICAgICAgICAgcHJpbnQoZiLimqDvuI8g6LSm5Y+3W3tzZWxmLm5hbWV9XemYheivu+esrFt7YXJjdGlsZVRpbWV9Xeevh+aWh+eroFt7aW5mb1swXX1d6ZiF6K+76YeN5aSNIikKICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoMS41KQogICAgICAgICAgICBlbGlmIHJlcy5nZXQoImVycmNvZGUiKSA9PSA0MDc6CiAgICAgICAgICAgICAgICBwcmludChmIuKaoO+4jyDotKblj7dbe3NlbGYubmFtZX1d6ZiF6K+756ysW3thcmN0aWxlVGltZX1d56+H5paH56ugW3tpbmZvWzBdfV3pmIXor7vnu5PmnZ8iKQogICAgICAgICAgICAgICAgcmV0dXJuIFRydWUKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHByaW50KGYi4pqg77iPIOi0puWPt1t7c2VsZi5uYW1lfV3pmIXor7vnrKxbe2FyY3RpbGVUaW1lfV3nr4fmlofnq6Bbe2luZm9bMF19XeacquefpeaDheWGtSIpCiAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDEuNSkKICAgICAgICAgICAgYXJjdGlsZVRpbWUgPSBhcmN0aWxlVGltZSArIDEKCiAgICBkZWYganVtcChzZWxmLCBsaW5rKToKICAgICAgICBwcmludChmIui0puWPt1t7c2VsZi5uYW1lfV3lvIDlp4vmnKzmrKHpmIXor7vigKbigKYiKQogICAgICAgIGhuID0gdXJscGFyc2UobGluaykubmV0bG9jCiAgICAgICAgaCA9IHsKICAgICAgICAgICAgIkhvc3QiOiBobiwKICAgICAgICAgICAgIkNvbm5lY3Rpb24iOiAia2VlcC1hbGl2ZSIsCiAgICAgICAgICAgICJVcGdyYWRlLUluc2VjdXJlLVJlcXVlc3RzIjogIjEiLAogICAgICAgICAgICAiVXNlci1BZ2VudCI6ICJNb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wOyBXaW42NDsgeDY0KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvMTA3LjAuMC4wIFNhZmFyaS81MzcuMzYgTmV0VHlwZS9XSUZJIE1pY3JvTWVzc2VuZ2VyLzcuMC4yMC4xNzgxKDB4NjcwMDE0M0IpIFdpbmRvd3NXZWNoYXQoMHg2MzA5MDYyMSkgWFdFQi84MzUxIEZsdWUiLAogICAgICAgICAgICAiQWNjZXB0IjogInRleHQvaHRtbCxhcHBsaWNhdGlvbi94aHRtbCt4bWwsYXBwbGljYXRpb24veG1sO3E9MC45LGltYWdlL2F2aWYsaW1hZ2Uvd2VicCxpbWFnZS9hcG5nLCovKjtxPTAuOCxhcHBsaWNhdGlvbi9zaWduZWQtZXhjaGFuZ2U7dj1iMztxPTAuOSIsCiAgICAgICAgICAgICJBY2NlcHQtRW5jb2RpbmciOiAiZ3ppcCwgZGVmbGF0ZSIsCiAgICAgICAgICAgICJBY2NlcHQtTGFuZ3VhZ2UiOiAiemgtQ04semgiLAogICAgICAgICAgICAiQ29va2llIjogc2VsZi5Db29raWUsCiAgICAgICAgfQogICAgICAgIHIgPSByZXF1ZXN0cy5nZXQobGluaywgaGVhZGVycz1oLCBhbGxvd19yZWRpcmVjdHM9RmFsc2UsIHZlcmlmeT1GYWxzZSkKICAgICAgICAjIHByaW50KHIuc3RhdHVzX2NvZGUpCiAgICAgICAgTG9jYXRpb24gPSByLmhlYWRlcnMuZ2V0KCJMb2NhdGlvbiIpCiAgICAgICAgcHJpbnQoZiLotKblj7dbe3NlbGYubmFtZX1d5byA5aeL6ZiF6K+75paH56ugIC0ge0xvY2F0aW9ufSIpCiAgICAgICAgcmV0dXJuIExvY2F0aW9uCgogICAgZGVmIHdpdGhkcmF3UG9zdChzZWxmKToKICAgICAgICB1ID0gZiJodHRwOi8ve3NlbGYuZG9tbmFpbkhvc3R9L2hhb2Jhb2Jhby9nZXR3aXRoZHJhdyIKICAgICAgICBwID0gZiJzaWduaWQ9e3NlbGYucmVxdWVzdF9pZH0mdWE9MCZwdHlwZT0wJnBhY2NvdW50PSZwbmFtZT0iCiAgICAgICAgaWYgc2VsZi5hbGlBY2NvdW50IGFuZCBzZWxmLmFsaU5hbWU6CiAgICAgICAgICAgIHAgPSBmInNpZ25pZD17c2VsZi5yZXF1ZXN0X2lkfSZ1YT0yJnB0eXBlPTEmcGFjY291bnQ9e3F1b3RlKHNlbGYuYWxpQWNjb3VudCl9JnBuYW1lPXtxdW90ZShzZWxmLmFsaU5hbWUpfSIKICAgICAgICByID0gcmVxdWVzdHMucG9zdCgKICAgICAgICAgICAgdSwKICAgICAgICAgICAgaGVhZGVycz17CiAgICAgICAgICAgICAgICAiQWNjZXB0IjogImFwcGxpY2F0aW9uL2pzb24sIHRleHQvamF2YXNjcmlwdCwgKi8qOyBxPTAuMDEiLAogICAgICAgICAgICAgICAgIkFjY2VwdC1FbmNvZGluZyI6ICJnemlwLCBkZWZsYXRlIiwKICAgICAgICAgICAgICAgICJBY2NlcHQtTGFuZ3VhZ2UiOiAiemgtQ04semg7cT0wLjkiLAogICAgICAgICAgICAgICAgIkNvbnRlbnQtVHlwZSI6ICJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7IGNoYXJzZXQ9VVRGLTgiLAogICAgICAgICAgICAgICAgIkNvb2tpZSI6IHNlbGYuQ29va2llLAogICAgICAgICAgICAgICAgIkhvc3QiOiBmIntzZWxmLmRvbW5haW5Ib3N0fSIsCiAgICAgICAgICAgICAgICAiT3JpZ2luIjogZiJodHRwOi8ve3NlbGYuZG9tbmFpbkhvc3R9IiwKICAgICAgICAgICAgICAgICJQcm94eS1Db25uZWN0aW9uIjogImtlZXAtYWxpdmUiLAogICAgICAgICAgICAgICAgIlJlZmVyZXIiOiBmImh0dHA6Ly97c2VsZi5kb21uYWluSG9zdH0vaGFvYmFvYmFvL3dpdGhkcmF3IiwKICAgICAgICAgICAgICAgICJYLVJlcXVlc3RlZC1XaXRoIjogIlhNTEh0dHBSZXF1ZXN0IiwKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZGF0YT1wLAogICAgICAgICAgICB2ZXJpZnk9RmFsc2UsCiAgICAgICAgKQogICAgICAgIHByaW50KGYi4pyFIOi0puWPt1t7c2VsZi5uYW1lfV0g5o+Q546w57uT5p6c77yaIiwgci5qc29uKClbIm1zZyJdKQoKICAgIGRlZiB3aXRoZHJhdyhzZWxmKToKICAgICAgICBnb2xkID0gaW50KGludChzZWxmLnJlbWFpbl9nb2xkKSAvIDEwMDApICogMTAwMAogICAgICAgIHByaW50KGYi6LSm5Y+3W3tzZWxmLm5hbWV9XSDmnKzmrKHmj5DnjrDph5Hpop0gIiwgc2VsZi5yZW1haW4sICLlhYMgIiwgZ29sZCwgIumHkeW4gSIpCiAgICAgICAgd2l0aGRyYXdCYWxhbmNlID0gcm91bmQoKGludChzZWxmLnR4YnopIC8gMTAwMDApLCAzKQogICAgICAgIGlmIGdvbGQgb3IgKHNlbGYucmVtYWluID49IHdpdGhkcmF3QmFsYW5jZSk6CiAgICAgICAgICAgIGlmIGdvbGQ6CiAgICAgICAgICAgICAgICAjIOW8gOWni+aPkOeOsAogICAgICAgICAgICAgICAgdTEgPSBmImh0dHA6Ly97c2VsZi5kb21uYWluSG9zdH0vaGFvYmFvYmFvL2dldGdvbGQiCiAgICAgICAgICAgICAgICBwMSA9IGYicmVxdWVzdF9pZD17c2VsZi5yZXF1ZXN0X2lkfSZnb2xkPXtnb2xkfSIKICAgICAgICAgICAgICAgIHIgPSByZXF1ZXN0cy5wb3N0KAogICAgICAgICAgICAgICAgICAgIHUxLAogICAgICAgICAgICAgICAgICAgIGRhdGE9cDEsCiAgICAgICAgICAgICAgICAgICAgaGVhZGVycz17CiAgICAgICAgICAgICAgICAgICAgICAgICJBY2NlcHQiOiAiYXBwbGljYXRpb24vanNvbiwgdGV4dC9qYXZhc2NyaXB0LCAqLyo7IHE9MC4wMSIsCiAgICAgICAgICAgICAgICAgICAgICAgICJBY2NlcHQtRW5jb2RpbmciOiAiZ3ppcCwgZGVmbGF0ZSIsCiAgICAgICAgICAgICAgICAgICAgICAgICJBY2NlcHQtTGFuZ3VhZ2UiOiAiemgtQ04semg7cT0wLjkiLAogICAgICAgICAgICAgICAgICAgICAgICAiQ29udGVudC1UeXBlIjogImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZDsgY2hhcnNldD1VVEYtOCIsCiAgICAgICAgICAgICAgICAgICAgICAgICJDb29raWUiOiBzZWxmLkNvb2tpZSwKICAgICAgICAgICAgICAgICAgICAgICAgIkhvc3QiOiBmIntzZWxmLmRvbW5haW5Ib3N0fSIsCiAgICAgICAgICAgICAgICAgICAgICAgICJPcmlnaW4iOiBmImh0dHA6Ly97c2VsZi5kb21uYWluSG9zdH0iLAogICAgICAgICAgICAgICAgICAgICAgICAiUHJveHktQ29ubmVjdGlvbiI6ICJrZWVwLWFsaXZlIiwKICAgICAgICAgICAgICAgICAgICAgICAgIlJlZmVyZXIiOiBmImh0dHA6Ly97c2VsZi5kb21uYWluSG9zdH0vaGFvYmFvYmFvL3dpdGhkcmF3IiwKICAgICAgICAgICAgICAgICAgICAgICAgIlVzZXItQWdlbnQiOiAiTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzEwNy4wLjAuMCBTYWZhcmkvNTM3LjM2IE5ldFR5cGUvV0lGSSBNaWNyb01lc3Nlbmdlci83LjAuMjAuMTc4MSgweDY3MDAxNDNCKSBXaW5kb3dzV2VjaGF0KDB4NjMwOTA3MWQpIFhXRUIvODQ2MSBGbHVlIiwKICAgICAgICAgICAgICAgICAgICAgICAgIlgtUmVxdWVzdGVkLVdpdGgiOiAiWE1MSHR0cFJlcXVlc3QiLAogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgdmVyaWZ5PUZhbHNlLAogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgIHJlcyA9IHIuanNvbigpCiAgICAgICAgICAgICAgICAgICAgaWYgcmVzLmdldCgiZXJyY29kZSIpID09IDA6CiAgICAgICAgICAgICAgICAgICAgICAgIHdpdGhkcmF3QmFsYW5jZU51bSA9IHNlbGYucmVtYWluICsgZmxvYXQocmVzWyJkYXRhIl1bIm1vbmV5Il0pCiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZiLinIUg6LSm5Y+3W3tzZWxmLm5hbWV9XSDph5HluIHlhZHmjaLkuLrnjrDph5HmiJDlip/vvIzlvIDlp4vmj5DnjrDvvIzpooTorqHliLDotKYge3dpdGhkcmF3QmFsYW5jZU51bX0g5YWDID4+PiAiCiAgICAgICAgICAgICAgICAgICAgICAgICkKCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHdpdGhkcmF3QmFsYW5jZU51bSA8IHdpdGhkcmF3QmFsYW5jZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KGYi6LSm5Y+3W3tzZWxmLm5hbWV9Xeayoeaciei+vuWIsOaPkOeOsOagh+WHhiB7d2l0aGRyYXdCYWxhbmNlfSDlhYMiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEZhbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYud2l0aGRyYXdQb3N0KCkKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmIui0puWPt1t7c2VsZi5uYW1lfV0g6YeR5biB5YWR5o2i5Li6546w6YeR5aSx6LSl77yaIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIudGV4dCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICIg5o+Q546w5Zyw5Z2A77yaIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHUxLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIiDmj5DnjrDlj4LmlbDvvJoiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcDEsCiAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgICAgICAgICAjIHJhaXNlIGUKICAgICAgICAgICAgICAgICAgICAjIOWkhOeQhuW8guW4uAogICAgICAgICAgICAgICAgICAgIHByaW50KGYi6LSm5Y+3W3tzZWxmLm5hbWV9XSDmj5DnjrDlpLHotKXvvJoiLCBlKQogICAgICAgICAgICBzZWxmLndpdGhkcmF3UG9zdCgpCgogICAgZGVmIGluaXQoc2VsZik6CiAgICAgICAgdHJ5OgogICAgICAgICAgICByID0gcmVxdWVzdHMuZ2V0KAogICAgICAgICAgICAgICAgZ2V0TmV3SW52aXRlVXJsKCksCiAgICAgICAgICAgICAgICBoZWFkZXJzPXsKICAgICAgICAgICAgICAgICAgICAiVXBncmFkZS1JbnNlY3VyZS1SZXF1ZXN0cyI6ICIxIiwKICAgICAgICAgICAgICAgICAgICAiVXNlci1BZ2VudCI6ICJNb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wOyBXaW42NDsgeDY0KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvMTA3LjAuMC4wIFNhZmFyaS81MzcuMzYgTmV0VHlwZS9XSUZJIE1pY3JvTWVzc2VuZ2VyLzcuMC4yMC4xNzgxKDB4NjcwMDE0M0IpIFdpbmRvd3NXZWNoYXQoMHg2MzA5MDcxZCkgWFdFQi84NDYxIEZsdWUiLAogICAgICAgICAgICAgICAgICAgICJBY2NlcHQiOiAidGV4dC9odG1sLGFwcGxpY2F0aW9uL3hodG1sK3htbCxhcHBsaWNhdGlvbi94bWw7cT0wLjksaW1hZ2UvYXZpZixpbWFnZS93ZWJwLGltYWdlL2FwbmcsKi8qO3E9MC44LGFwcGxpY2F0aW9uL3NpZ25lZC1leGNoYW5nZTt2PWIzO3E9MC45IiwKICAgICAgICAgICAgICAgICAgICAiQWNjZXB0LUVuY29kaW5nIjogImd6aXAsIGRlZmxhdGUiLAogICAgICAgICAgICAgICAgICAgICJBY2NlcHQtTGFuZ3VhZ2UiOiAiemgtQ04semg7cT0wLjkiLAogICAgICAgICAgICAgICAgICAgICJDb29raWUiOiBzZWxmLkNvb2tpZSwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB2ZXJpZnk9RmFsc2UsCiAgICAgICAgICAgICAgICAjIOemgeatoumHjeWumuWQkQogICAgICAgICAgICAgICAgYWxsb3dfcmVkaXJlY3RzPUZhbHNlLAogICAgICAgICAgICApCiAgICAgICAgICAgIHNlbGYuZG9tbmFpbkhvc3QgPSByLmhlYWRlcnMuZ2V0KCJMb2NhdGlvbiIpLnNwbGl0KCIvIilbMl0KICAgICAgICAgICAgIyBwcmludChyLnRleHQpCiAgICAgICAgICAgIHByaW50KGYi6LSm5Y+3W3tzZWxmLm5hbWV9XeaPkOWPluWIsOeahOWfn+WQje+8mntzZWxmLmRvbW5haW5Ib3N0fSIpCiAgICAgICAgICAgICMgc2VsZi5oZWFkZXJzID0gewogICAgICAgICAgICAjICAgICAiQ29ubmVjdGlvbiI6ICJrZWVwLWFsaXZlIiwKICAgICAgICAgICAgIyAgICAgIkFjY2VwdCI6ICJhcHBsaWNhdGlvbi9qc29uLCB0ZXh0L2phdmFzY3JpcHQsICovKjsgcT0wLjAxIiwKICAgICAgICAgICAgIyAgICAgIlVzZXItQWdlbnQiOiAiTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzEwNy4wLjAuMCBTYWZhcmkvNTM3LjM2IE5ldFR5cGUvV0lGSSBNaWNyb01lc3Nlbmdlci83LjAuMjAuMTc4MSgweDY3MDAxNDNCKSBXaW5kb3dzV2VjaGF0KDB4NjMwOTA2MjEpIFhXRUIvODM1MSBGbHVlIiwKICAgICAgICAgICAgIyAgICAgIlgtUmVxdWVzdGVkLVdpdGgiOiAiWE1MSHR0cFJlcXVlc3QiLAogICAgICAgICAgICAjICAgICAiUmVmZXJlciI6IGYiaHR0cDovL3tzZWxmLmRvbW5haW5Ib3N0fS8iLAogICAgICAgICAgICAjICAgICAiT3JpZ2luIjogZiJodHRwOi8ve3NlbGYuZG9tbmFpbkhvc3R9IiwKICAgICAgICAgICAgIyAgICAgIyAiSG9zdCI6IGYie3NlbGYuZG9tbmFpbkhvc3R9IiwKICAgICAgICAgICAgIyAgICAgIkFjY2VwdC1FbmNvZGluZyI6ICJnemlwLCBkZWZsYXRlIiwKICAgICAgICAgICAgIyAgICAgIkFjY2VwdC1MYW5ndWFnZSI6ICJ6aC1DTix6aCIsCiAgICAgICAgICAgICMgICAgICJDb250ZW50LVR5cGUiOiAiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkOyBjaGFyc2V0PVVURi04IiwKICAgICAgICAgICAgIyAgICAgIkNvb2tpZSI6IHNlbGYuQ29va2llLAogICAgICAgICAgICAjIH0KICAgICAgICAgICAgIyAjIOiOt+WPlnJlcXVlc3RJZAogICAgICAgICAgICBzZWxmLnJlYWRKdW1wUGF0aCA9ICIiCiAgICAgICAgICAgIGlmIG15a2t5ZERldGVjdGluZ1NlYWxTdGF0dXM6CiAgICAgICAgICAgICAgICByID0gcmVxdWVzdHMuZ2V0KAogICAgICAgICAgICAgICAgICAgIGYiaHR0cDovL3tzZWxmLmRvbW5haW5Ib3N0fS9oYW9iYW9iYW8vaG9tZSIsCiAgICAgICAgICAgICAgICAgICAgaGVhZGVycz17CiAgICAgICAgICAgICAgICAgICAgICAgICJVcGdyYWRlLUluc2VjdXJlLVJlcXVlc3RzIjogIjEiLAogICAgICAgICAgICAgICAgICAgICAgICAiVXNlci1BZ2VudCI6ICJNb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wOyBXaW42NDsgeDY0KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvMTA3LjAuMC4wIFNhZmFyaS81MzcuMzYgTmV0VHlwZS9XSUZJIE1pY3JvTWVzc2VuZ2VyLzcuMC4yMC4xNzgxKDB4NjcwMDE0M0IpIFdpbmRvd3NXZWNoYXQoMHg2MzA5MDcxZCkgWFdFQi84NDYxIEZsdWUiLAogICAgICAgICAgICAgICAgICAgICAgICAiQWNjZXB0IjogInRleHQvaHRtbCxhcHBsaWNhdGlvbi94aHRtbCt4bWwsYXBwbGljYXRpb24veG1sO3E9MC45LGltYWdlL2F2aWYsaW1hZ2Uvd2VicCxpbWFnZS9hcG5nLCovKjtxPTAuOCxhcHBsaWNhdGlvbi9zaWduZWQtZXhjaGFuZ2U7dj1iMztxPTAuOSIsCiAgICAgICAgICAgICAgICAgICAgICAgICJBY2NlcHQtRW5jb2RpbmciOiAiZ3ppcCwgZGVmbGF0ZSIsCiAgICAgICAgICAgICAgICAgICAgICAgICJBY2NlcHQtTGFuZ3VhZ2UiOiAiemgtQ04semg7cT0wLjkiLAogICAgICAgICAgICAgICAgICAgICAgICAiQ29va2llIjogc2VsZi5Db29raWUsCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICB2ZXJpZnk9RmFsc2UsCiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICBodG1sdGV4dCA9IHIudGV4dAogICAgICAgICAgICAgICAgcmVhZF9qdW1wX3JlYWRfdGV4dCA9IGV4dHJhY3RfbWlkZGxlX3RleHQoCiAgICAgICAgICAgICAgICAgICAgaHRtbHRleHQsICJmdW5jdGlvbiByZWFkX2p1bXBfcmVhZCgpeyIsICJzdWNjZXNzOiBmdW5jdGlvbiIKICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIGlmIHJlYWRfanVtcF9yZWFkX3RleHQ6CiAgICAgICAgICAgICAgICAgICAgcmVhZEp1bXBQYXRoID0gZXh0cmFjdF9taWRkbGVfdGV4dCgKICAgICAgICAgICAgICAgICAgICAgICAgcmVhZF9qdW1wX3JlYWRfdGV4dCwgInVybDogZG9tYWluKyciLCAiJywiCiAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgIGlmIHJlYWRKdW1wUGF0aDoKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5yZWFkSnVtcFBhdGggPSByZWFkSnVtcFBhdGgKICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICBwcmludCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGYi6LSm5Y+3W3tzZWxmLm5hbWV9XSDliJ3lp4vljJblpLHotKXvvIzor7fmiYvliqjorr/pl67kuIvnoa7orqTpobXpnaLmsqHltKnmuoMg5oiW6ICFIOeojeWQjuWGjeivleWQp++8jOS4gOebtOS4jeihjO+8jOivt+WJjeW+gFRH576k5Y+N6aaIfiAiCiAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEZhbHNlCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIGlmICLlrZjlnKjov53op4Tmk43kvZwiIGluIGh0bWx0ZXh0OgogICAgICAgICAgICAgICAgICAgICAgICBwcmludChmIui0puWPt1t7c2VsZi5uYW1lfV0g6KKr5qOA5rWL5Yiw5LqG77yM5bey57uP6KKr5bCB77yM57uI5q2i5Lu75Yqh77yM5b+r5Y675o+Q6YaS5aSn5a625ZCnfiAiKQogICAgICAgICAgICAgICAgICAgICAgICBzeXMuZXhpdCgwKQogICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZiLotKblj7dbe3NlbGYubmFtZX1dIOWIneWni+WMluWksei0pe+8jOivt+aJi+WKqOiuv+mXruS4i+ehruiupOmhtemdouayoeW0qea6gyDmiJbogIUg56iN5ZCO5YaN6K+V5ZCn77yM5LiA55u05LiN6KGM77yM6K+35YmN5b6AVEfnvqTlj43ppoh+ICIKICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gRmFsc2UKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHNlbGYucmVhZEp1bXBQYXRoID0gIi9oYW9iYW9iYW8vd3RtcGRvbWFpbjIiCiAgICAgICAgICAgICMgIyDojrflj5bmj5DnjrDpobXpnaLlnLDlnYAKICAgICAgICAgICAgciA9IHJlcXVlc3RzLmdldCgKICAgICAgICAgICAgICAgIGYiaHR0cDovL3tzZWxmLmRvbW5haW5Ib3N0fS9oYW9iYW9iYW8vd2l0aGRyYXciLAogICAgICAgICAgICAgICAgaGVhZGVycz17CiAgICAgICAgICAgICAgICAgICAgIlVwZ3JhZGUtSW5zZWN1cmUtUmVxdWVzdHMiOiAiMSIsCiAgICAgICAgICAgICAgICAgICAgIlVzZXItQWdlbnQiOiAiTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzEwNy4wLjAuMCBTYWZhcmkvNTM3LjM2IE5ldFR5cGUvV0lGSSBNaWNyb01lc3Nlbmdlci83LjAuMjAuMTc4MSgweDY3MDAxNDNCKSBXaW5kb3dzV2VjaGF0KDB4NjMwOTA3MWQpIFhXRUIvODQ2MSBGbHVlIiwKICAgICAgICAgICAgICAgICAgICAiQWNjZXB0IjogInRleHQvaHRtbCxhcHBsaWNhdGlvbi94aHRtbCt4bWwsYXBwbGljYXRpb24veG1sO3E9MC45LGltYWdlL2F2aWYsaW1hZ2Uvd2VicCxpbWFnZS9hcG5nLCovKjtxPTAuOCxhcHBsaWNhdGlvbi9zaWduZWQtZXhjaGFuZ2U7dj1iMztxPTAuOSIsCiAgICAgICAgICAgICAgICAgICAgIkFjY2VwdC1FbmNvZGluZyI6ICJnemlwLCBkZWZsYXRlIiwKICAgICAgICAgICAgICAgICAgICAiQWNjZXB0LUxhbmd1YWdlIjogInpoLUNOLHpoO3E9MC45IiwKICAgICAgICAgICAgICAgICAgICAiQ29va2llIjogc2VsZi5Db29raWUsCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgdmVyaWZ5PUZhbHNlLAogICAgICAgICAgICApCiAgICAgICAgICAgIGh0bWx0ZXh0ID0gci50ZXh0CiAgICAgICAgICAgIHNpZ25pZGwgPSByZS5zZWFyY2goJ3JlcXVlc3RfaWQgPSAiKC4qPykiJywgaHRtbHRleHQpCiAgICAgICAgICAgIGlmIHNpZ25pZGwgPT0gW106CiAgICAgICAgICAgICAgICBwcmludChmIui0puWPt1t7c2VsZi5uYW1lfV3liJ3lp4vljJYg5o+Q546w5Y+C5pWwIOWksei0pe+8jOWwneivleWPpuS4gOenjeWIneWni+WMliA+Pj4gIikKICAgICAgICAgICAgICAgIHIgPSByZXF1ZXN0cy5nZXQoCiAgICAgICAgICAgICAgICAgICAgZiJodHRwczovL2NvZGUuc3l3am1sb3UuY29tLmNuL2Jhb2Jhb2NvZGUucGhwIiwKICAgICAgICAgICAgICAgICAgICB2ZXJpZnk9RmFsc2UsCiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICBkb21uYWluSG9zdCA9IHIuanNvbigpWyJkYXRhIl1bImx1b2RpIl0uc3BsaXQoIi8iKVsyXQogICAgICAgICAgICAgICAgciA9IHJlcXVlc3RzLmdldCgKICAgICAgICAgICAgICAgICAgICBmImh0dHA6Ly97ZG9tbmFpbkhvc3R9L2hhb2Jhb2Jhby93aXRoZHJhdyIsCiAgICAgICAgICAgICAgICAgICAgaGVhZGVycz17CiAgICAgICAgICAgICAgICAgICAgICAgICJVcGdyYWRlLUluc2VjdXJlLVJlcXVlc3RzIjogIjEiLAogICAgICAgICAgICAgICAgICAgICAgICAiVXNlci1BZ2VudCI6ICJNb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wOyBXaW42NDsgeDY0KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvMTA3LjAuMC4wIFNhZmFyaS81MzcuMzYgTmV0VHlwZS9XSUZJIE1pY3JvTWVzc2VuZ2VyLzcuMC4yMC4xNzgxKDB4NjcwMDE0M0IpIFdpbmRvd3NXZWNoYXQoMHg2MzA5MDcxZCkgWFdFQi84NDYxIEZsdWUiLAogICAgICAgICAgICAgICAgICAgICAgICAiQWNjZXB0IjogInRleHQvaHRtbCxhcHBsaWNhdGlvbi94aHRtbCt4bWwsYXBwbGljYXRpb24veG1sO3E9MC45LGltYWdlL2F2aWYsaW1hZ2Uvd2VicCxpbWFnZS9hcG5nLCovKjtxPTAuOCxhcHBsaWNhdGlvbi9zaWduZWQtZXhjaGFuZ2U7dj1iMztxPTAuOSIsCiAgICAgICAgICAgICAgICAgICAgICAgICJBY2NlcHQtRW5jb2RpbmciOiAiZ3ppcCwgZGVmbGF0ZSIsCiAgICAgICAgICAgICAgICAgICAgICAgICJBY2NlcHQtTGFuZ3VhZ2UiOiAiemgtQ04semg7cT0wLjkiLAogICAgICAgICAgICAgICAgICAgICAgICAiQ29va2llIjogc2VsZi5Db29raWUsCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICB2ZXJpZnk9RmFsc2UsCiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICBodG1sdGV4dCA9IHIudGV4dAogICAgICAgICAgICAgICAgc2lnbmlkbCA9IHJlLnNlYXJjaCgncmVxdWVzdF9pZCA9ICIoLio/KSInLCBodG1sdGV4dCkKICAgICAgICAgICAgICAgIGlmIHNpZ25pZGwgPT0gW106CiAgICAgICAgICAgICAgICAgICAgcHJpbnQoZiLotKblj7dbe3NlbGYubmFtZX1dIOWkmuasoeWIneWni+WMliDmj5DnjrDlj4LmlbAg5aSx6LSlLCDotKblj7flvILluLjvvIzor7fmo4Dmn6VDb29raWXvvIEiKQogICAgICAgICAgICAgICAgICAgIHIgPSByZXF1ZXN0cy5nZXQoCiAgICAgICAgICAgICAgICAgICAgICAgIGYiaHR0cHM6Ly9jb2RlLnN5d2ptbG91LmNvbS5jbi9iYW9iYW9jb2RlLnBocCIsCiAgICAgICAgICAgICAgICAgICAgICAgIHZlcmlmeT1GYWxzZSwKICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgc2VsZi5kb21uYWluSG9zdCA9IHIuanNvbigpWyJkYXRhIl1bImx1b2RpIl0uc3BsaXQoIi8iKVsyXQogICAgICAgICAgICAgICAgICAgIHJldHVybiBGYWxzZQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBzZWxmLnJlcXVlc3RfaWQgPSBzaWduaWRsWzFdCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBzZWxmLnJlcXVlc3RfaWQgPSBzaWduaWRsWzFdCiAgICAgICAgICAgIHJldHVybiBUcnVlCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICAjIHJhaXNlIGUKICAgICAgICAgICAgcHJpbnQoZiLotKblj7dbe3NlbGYubmFtZX1d5Yid5aeL5YyW5aSx6LSlLOivt+ajgOafpeS9oOeahGNrIikKICAgICAgICAgICAgcmV0dXJuIEZhbHNlCgogICAgZGVmIHJ1bihzZWxmKToKICAgICAgICBpZiBzZWxmLmluaXQoKToKICAgICAgICAgICAgc2VsZi51c2VyX2luZm8oKQogICAgICAgICAgICBzZWxmLmdvbGQoKQogICAgICAgICAgICBzZWxmLnJlYWQoKQogICAgICAgICAgICB0aW1lLnNsZWVwKDMpCiAgICAgICAgICAgIHNlbGYuZ29sZCgpCiAgICAgICAgICAgIHRpbWUuc2xlZXAoMykKICAgICAgICAgICAgc2VsZi53aXRoZHJhdygpCgoKZGVmIGdldE5ld0ludml0ZVVybCgpOgogICAgciA9IHJlcXVlc3RzLmdldCgiaHR0cHM6Ly9jb2RlLnN5d2ptbG91LmNvbS5jbi9iYW9iYW9jb2RlLnBocCIsIHZlcmlmeT1GYWxzZSkuanNvbigpCiAgICBpZiByLmdldCgiY29kZSIpID09IDA6CiAgICAgICAgbmV3RW50cnlVcmwgPSByLmdldCgiZGF0YSIpLmdldCgibHVvZGkiKQogICAgICAgIHBhcnNlZF91cmwgPSB1cmxwYXJzZShuZXdFbnRyeVVybCkKICAgICAgICBob3N0ID0gcGFyc2VkX3VybC5ob3N0bmFtZQogICAgICAgIHJldHVybiBmImh0dHBzOi8vczFpNi4xb2JnLnNob3AvaGFvYmFvYmFvL2F1dGgvNTg0ODdmMjkxOTg1YzVmMzJjMTZiM2IwMWI5NmE5MTIiLnJlcGxhY2UoCiAgICAgICAgICAgICJzMWk2LjFvYmcuc2hvcCIsIGhvc3Qgb3IgInMxaTYuMW9iZy5zaG9wIgogICAgICAgICkKICAgIGVsc2U6CiAgICAgICAgcmV0dXJuICJodHRwczovL3MxaTYuMW9iZy5zaG9wL2hhb2Jhb2Jhby9hdXRoLzU4NDg3ZjI5MTk4NWM1ZjMyYzE2YjNiMDFiOTZhOTEyIgoKCmlmIF9fbmFtZV9fID09ICJfX21haW5fXyI6CiAgICAjIGFwcFRva2Vu77ya6L+Z5Liq5piv5aGrd3hwdXNoZXLnmoRhcHBUb2tlbgogICAgIyB0b3BpY0lkc++8mui/meS4quaYr3d4cHVzaGVy55qEdG9waWNJZHPmlLnmiJDkvaDoh6rlt7HnmoQKICAgICMg56S65L6LOiDlubvnlJ8jb1pkQnAwNHBzZ29OOGROMUVUX3VvODFOVEMzMSMzMDAwI0FUX1V5SWxiajIyMjJueW5FU2JNMnZKeUE3RHJtVW1VWEQjMTE2ODYKICAgIGFjY291bnRzID0gb3MuZ2V0ZW52KCJteWtreWQiKQogICAgaW52aXRlVXJsID0gZ2V0TmV3SW52aXRlVXJsKCkKICAgIGlmIGFjY291bnRzIGlzIE5vbmU6CiAgICAgICAgcHJpbnQoZiLkvaDmsqHmnInloavlhaVteWtreWTvvIzlkovov5DooYzvvJ9cbui1sOS4i+mCgOivt+WRl++8mntpbnZpdGVVcmx9IikKICAgIGVsc2U6CiAgICAgICAgIyDojrflj5bnjq/looPlj5jph4/nmoTlgLzvvIzlubbmjInmjIflrprlrZfnrKbkuLLliIblibLmiJDlpJrkuKrotKblj7fnmoTlj4LmlbDnu4TlkIgKICAgICAgICBhY2NvdW50c19saXN0ID0gb3MuZW52aXJvbi5nZXQoIm15a2t5ZCIpLnNwbGl0KCImIikKCiAgICAgICAgIyDovpPlh7rmnInlh6DkuKrotKblj7cKICAgICAgICBudW1fb2ZfYWNjb3VudHMgPSBsZW4oYWNjb3VudHNfbGlzdCkKICAgICAgICBtb3JlVGlwID0gIiIKICAgICAgICBpZiByZWFkUG9zdERlbGF5ID4gMDoKICAgICAgICAgICAgbW9yZVRpcCA9IGYi5bey6K6+572u55qE5o6o6YCB5paH56ug562J5b6F54K55Ye75pe26Ze05Li6IHtyZWFkUG9zdERlbGF5feenkiAiCiAgICAgICAgcHJpbnQoCiAgICAgICAgICAgIGYi5b2T5YmN6ISa5pys54mI5pys77ya5bm755Sf6a2U5pS56Ieq55So54mIIFYxLjUwIFxu5bm755Sf5o+Q56S677ya6I635Y+W5YiwIHtudW1fb2ZfYWNjb3VudHN9IOS4qui0puWPtyB7bW9yZVRpcH1cbuazqOWGjOWcsOWdgO+8mntpbnZpdGVVcmx9IgogICAgICAgICkKCiAgICAgICAgIyDpgY3ljobmiYDmnInotKblj7cKICAgICAgICBmb3IgaSwgYWNjb3VudCBpbiBlbnVtZXJhdGUoYWNjb3VudHNfbGlzdCwgc3RhcnQ9MSk6CiAgICAgICAgICAgICMgcHJpbnQoIlxuIikKICAgICAgICAgICAgcHJpbnQoIi0iICogNTApCiAgICAgICAgICAgIHByaW50KGYi6LSm5Y+3W3thY2NvdW50LnNwbGl0KCcjJylbMF19XeW8gOWni+aJp+ihjOS7u+WKoSA+Pj4iKQogICAgICAgICAgICAjIHByaW50KCJcbiIpCiAgICAgICAgICAgICMg5oyJQOespuWPt+WIhuWJsuW9k+WJjei0puWPt+eahOS4jeWQjOWPguaVsAogICAgICAgICAgICB2YWx1ZXMgPSBhY2NvdW50LnNwbGl0KCIjIikKICAgICAgICAgICAgIyBwcmludCh2YWx1ZXMpCiAgICAgICAgICAgIGNnID0ge30KICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgaWYgbGVuKHZhbHVlcykgPT0gMjoKICAgICAgICAgICAgICAgICAgICBjZyA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgIm5hbWUiOiB2YWx1ZXNbMF0sCiAgICAgICAgICAgICAgICAgICAgICAgICJDb29raWUiOiB2YWx1ZXNbMV0sCiAgICAgICAgICAgICAgICAgICAgICAgICJ0eGJ6IjogMzAwMCwKICAgICAgICAgICAgICAgICAgICAgICAgImFsaUFjY291bnQiOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgImFsaU5hbWUiOiAiIiwKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIGNnID0gewogICAgICAgICAgICAgICAgICAgICAgICAibmFtZSI6IHZhbHVlc1swXSwKICAgICAgICAgICAgICAgICAgICAgICAgIkNvb2tpZSI6IHZhbHVlc1sxXSwKICAgICAgICAgICAgICAgICAgICAgICAgInR4YnoiOiB2YWx1ZXNbMl0gb3IgMzAwMCwKICAgICAgICAgICAgICAgICAgICAgICAgImFsaUFjY291bnQiOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgImFsaU5hbWUiOiAiIiwKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgICAgICMg5aSE55CG5byC5bi4CiAgICAgICAgICAgICAgICBwcmludCgi5bm755Sf6YC86YC85Y+oOiIsICLphY3nva7nmoTllaXnjqnmhI/vvIznvLrlj4LmlbDkuobmhqjmibnvvIznnIvmuIXohJrmnKzor7TmmI7vvIEiKQogICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgY2dbImFwcFRva2VuIl0gPSAiIgogICAgICAgICAgICBjZ1sidG9waWNJZHMiXSA9ICIiCiAgICAgICAgICAgICMgcHJpbnQoIuaJi+WKqO+8miIsIGxlbih2YWx1ZXMpLCB2YWx1ZXNbNF0pCiAgICAgICAgICAgIGlmIGxlbih2YWx1ZXMpID49IDQ6CiAgICAgICAgICAgICAgICBpZiB2YWx1ZXNbM106CiAgICAgICAgICAgICAgICAgICAgY2dbImFwcFRva2VuIl0gPSB2YWx1ZXNbM10KICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGNnWyJhcHBUb2tlbiJdID0gd3hwdXNoZXJBcHBUb2tlbgogICAgICAgICAgICBpZiBsZW4odmFsdWVzKSA+PSA1OgogICAgICAgICAgICAgICAgaWYgdmFsdWVzWzRdOgogICAgICAgICAgICAgICAgICAgIGNnWyJ0b3BpY0lkcyJdID0gdmFsdWVzWzRdCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBjZ1sidG9waWNJZHMiXSA9IHd4cHVzaGVyVG9waWNJZAogICAgICAgICAgICBpZiBsZW4odmFsdWVzKSA+PSA2OgogICAgICAgICAgICAgICAgaWYgdmFsdWVzWzVdOgogICAgICAgICAgICAgICAgICAgIGNnWyJhbGlOYW1lIl0gPSB2YWx1ZXNbNV0KICAgICAgICAgICAgaWYgbGVuKHZhbHVlcykgPj0gNzoKICAgICAgICAgICAgICAgIGlmIHZhbHVlc1s2XToKICAgICAgICAgICAgICAgICAgICBjZ1siYWxpQWNjb3VudCJdID0gdmFsdWVzWzZdCiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIGlmIHdlY2hhdEJ1c3NpbmVzc0tleSA9PSAiIjoKICAgICAgICAgICAgICAgICAgICBpZiBjZ1siYXBwVG9rZW4iXS5zdGFydHN3aXRoKCJBVF8iKSA9PSBGYWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoZiLlubvnlJ/mj5DnpLrvvIzotKblj7dbe2FjY291bnQuc3BsaXQoJyMnKVswXX1dIHd4cHVzaCDphY3nva7plJnor6/vvIzlv6vku5Tnu4bnnIvlpLTpg6jor7TmmI7vvIEiKQogICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICAgICAgICAgIGlmIChjZ1siYXBwVG9rZW4iXS5zdGFydHN3aXRoKCJBVF8iKSA9PSBGYWxzZSkgb3IgKAogICAgICAgICAgICAgICAgICAgICAgICBjZ1sidG9waWNJZHMiXS5pc2RpZ2l0KCkgPT0gRmFsc2UKICAgICAgICAgICAgICAgICAgICApOgogICAgICAgICAgICAgICAgICAgICAgICBwcmludChmIuW5u+eUn+aPkOekuu+8jOi0puWPt1t7YWNjb3VudC5zcGxpdCgnIycpWzBdfV0gd3hwdXNoIOmFjee9rumUmeivr++8jOW/q+S7lOe7hueci+WktOmDqOivtOaYju+8gSIpCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgICAgICBhcGkgPSBISFlEKGNnKQogICAgICAgICAgICAgICAgaWYgY2dbImFsaU5hbWUiXSBhbmQgY2dbImFsaUFjY291bnQiXToKICAgICAgICAgICAgICAgICAgICBwcmludCgKICAgICAgICAgICAgICAgICAgICAgICAgZiLlubvnlJ/mj5DnpLrvvIzotKblj7dbe2FjY291bnQuc3BsaXQoJyMnKVswXX1dIOmHh+eUqOS6hiDmlK/ku5jlrp3mj5DnjrDvvIzlp5PlkI3vvJp7Y2dbJ2FsaU5hbWUnXX3vvIzotKbmiLfvvJp7Y2dbJ2FsaUFjY291bnQnXX0iCiAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBwcmludChmIuW5u+eUn+aPkOekuu+8jOi0puWPt1t7YWNjb3VudC5zcGxpdCgnIycpWzBdfV0g6YeH55So5LqGIOW+ruS/oeaPkOeOsCIpCiAgICAgICAgICAgICAgICBhcGkucnVuKCkKICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICAgICAgcHJpbnQoCiAgICAgICAgICAgICAgICAgICAgZiLlubvnlJ/mj5DnpLrvvIzotKblj7dbe2FjY291bnQuc3BsaXQoJyMnKVswXX1dIOWHuumUmeWVpu+8jOS5n+iuuOaYr+W5s+WPsOaOpeWPo+mXrumimO+8jOWPr+S7pei/h+S4gOS8muWwneivlemHjeaWsOi/kOihjO+8jOWmguaenOi/mOaYr+S4jeihjO+8jOivt+WwhuS4i+mdouaKpemUmeaIquWbvuWPkeWIsHRn5Lqk5rWB576kOiIKICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIHJhaXNlIGUKICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgICMgcHJpbnQoIlxuIikKICAgICAgICAgICAgcHJpbnQoIi0iICogNTApCiAgICAgICAgICAgIHByaW50KGYi6LSm5Y+3W3thY2NvdW50LnNwbGl0KCcjJylbMF19XeaJp+ihjOS7u+WKoeWujOavle+8gSIpCiAgICAgICAgICAgICMgcHJpbnQoIlxuIikK'))
except Exception as e:
    print('脚本执行出错:', str(e))
