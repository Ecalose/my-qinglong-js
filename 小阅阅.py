# -*- coding: utf-8 -*-
#!/usr/bin/env python3
"""
* 仅供学习交流，请在下载后的24小时内完全删除 请勿将任何内容用于商业或非法目的，否则后果自负。
* 小阅阅阅读 V1.72

* 活动入口,微信打开：
* 如果连接过期了运行一下就出来了最新的入口！
* http://dc7z.8fhm4.shop/yunonline/v1/auth/2639bb95daba1d99e5338a8c2e21e2f0?codeurl=dc7z.8fhm4.shop&codeuserid=2&time=1709021176
* 打开活动入口，抓包的任意接口cookies中的ysm_uid参数
* 
* 变量格式：
* 新建同名环境变量
* 变量名：xyyyd
* 变量值：
* # 3000 代表 3毛，后面两个推送参数可不填，那就必须配置全局推送！
* 账号备注#ysm_uid参数#unionId#提现金额如3000#wxpushApptoken#wxpushTopicId
* 
* 其他参数说明（脚本最下方填写参数）
* wxpusher全局参数：wxpusherAppToken、wxpusherTopicId
* 具体使用方法请看文档地址：https://wxpusher.zjiecode.com/docs/#/
* 
* 也可使用 微信机器人：wechatBussinessKey
* 
* 支持支付宝提现：账号备注#ysm_uid参数#unionId#提现金额如3000#wxpushApptoken#wxpushTopicId#支付宝姓名#支付宝账号
* 只想提现支付宝，不想填写其他参数，最少的参数就是：账号备注#ysm_uid参数#unionId####支付宝姓名#支付宝账号
*
* 增加 自定义检测文章等待时间：xyyydReadPostDelay，默认值是 15-20秒
* 定时运行每半小时一次
* 达到标准自动提现
* 达到标准，自动提现
"""
# This file requires Python 3.x and the following dependencies:
# - base64
try:
    import base64
    exec(base64.b64decode('IiIiCiog5LuF5L6b5a2m5Lmg5Lqk5rWB77yM6K+35Zyo5LiL6L295ZCO55qEMjTlsI/ml7blhoXlrozlhajliKDpmaQg6K+35Yu/5bCG5Lu75L2V5YaF5a6555So5LqO5ZWG5Lia5oiW6Z2e5rOV55uu55qE77yM5ZCm5YiZ5ZCO5p6c6Ieq6LSf44CCCiog5bCP6ZiF6ZiF6ZiF6K+7IFYxLjcyCgoqIOa0u+WKqOWFpeWPoyzlvq7kv6HmiZPlvIDvvJoKKiDlpoLmnpzov57mjqXov4fmnJ/kuobov5DooYzkuIDkuIvlsLHlh7rmnaXkuobmnIDmlrDnmoTlhaXlj6PvvIEKKiBodHRwOi8vZGM3ei44ZmhtNC5zaG9wL3l1bm9ubGluZS92MS9hdXRoLzI2MzliYjk1ZGFiYTFkOTllNTMzOGE4YzJlMjFlMmYwP2NvZGV1cmw9ZGM3ei44ZmhtNC5zaG9wJmNvZGV1c2VyaWQ9MiZ0aW1lPTE3MDkwMjExNzYKKiDmiZPlvIDmtLvliqjlhaXlj6PvvIzmipPljIXnmoTku7vmhI/mjqXlj6Njb29raWVz5Lit55qEeXNtX3VpZOWPguaVsAoqIAoqIOWPmOmHj+agvOW8j++8mgoqIOaWsOW7uuWQjOWQjeeOr+Wig+WPmOmHjwoqIOWPmOmHj+WQje+8mnh5eXlkCiog5Y+Y6YeP5YC877yaCiogIyAzMDAwIOS7o+ihqCAz5q+b77yM5ZCO6Z2i5Lik5Liq5o6o6YCB5Y+C5pWw5Y+v5LiN5aGr77yM6YKj5bCx5b+F6aG76YWN572u5YWo5bGA5o6o6YCB77yBCiog6LSm5Y+35aSH5rOoI3lzbV91aWTlj4LmlbAjdW5pb25JZCPmj5DnjrDph5Hpop3lpoIzMDAwI3d4cHVzaEFwcHRva2VuI3d4cHVzaFRvcGljSWQKKiAKKiDlhbbku5blj4LmlbDor7TmmI7vvIjohJrmnKzmnIDkuIvmlrnloavlhpnlj4LmlbDvvIkKKiB3eHB1c2hlcuWFqOWxgOWPguaVsO+8mnd4cHVzaGVyQXBwVG9rZW7jgIF3eHB1c2hlclRvcGljSWQKKiDlhbfkvZPkvb/nlKjmlrnms5Xor7fnnIvmlofmoaPlnLDlnYDvvJpodHRwczovL3d4cHVzaGVyLnpqaWVjb2RlLmNvbS9kb2NzLyMvCiogCiog5Lmf5Y+v5L2/55SoIOW+ruS/oeacuuWZqOS6uu+8mndlY2hhdEJ1c3NpbmVzc0tleQoqIAoqIOaUr+aMgeaUr+S7mOWuneaPkOeOsO+8mui0puWPt+Wkh+azqCN5c21fdWlk5Y+C5pWwI3VuaW9uSWQj5o+Q546w6YeR6aKd5aaCMzAwMCN3eHB1c2hBcHB0b2tlbiN3eHB1c2hUb3BpY0lkI+aUr+S7mOWuneWnk+WQjSPmlK/ku5jlrp3otKblj7cKKiDlj6rmg7Pmj5DnjrDmlK/ku5jlrp3vvIzkuI3mg7Ploavlhpnlhbbku5blj4LmlbDvvIzmnIDlsJHnmoTlj4LmlbDlsLHmmK/vvJrotKblj7flpIfms6gjeXNtX3VpZOWPguaVsCN1bmlvbklkIyMjI+aUr+S7mOWuneWnk+WQjSPmlK/ku5jlrp3otKblj7cKKgoqIOWinuWKoCDoh6rlrprkuYnmo4DmtYvmlofnq6DnrYnlvoXml7bpl7TvvJp4eXl5ZFJlYWRQb3N0RGVsYXnvvIzpu5jorqTlgLzmmK8gMTUtMjDnp5IKKiDlrprml7bov5DooYzmr4/ljYrlsI/ml7bkuIDmrKEKKiDovr7liLDmoIflh4boh6rliqjmj5DnjrAKKiDovr7liLDmoIflh4bvvIzoh6rliqjmj5DnjrAKIiIiCgpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZQppbXBvcnQgaGFzaGxpYgppbXBvcnQganNvbgppbXBvcnQgbWF0aAppbXBvcnQgb3MKaW1wb3J0IHN0cmluZwppbXBvcnQgc3lzCmltcG9ydCB0aW1lCmltcG9ydCByZXF1ZXN0cwppbXBvcnQgcmFuZG9tCmltcG9ydCByZQpmcm9tIHVybGxpYi5wYXJzZSBpbXBvcnQgcXVvdGUsIHVybHBhcnNlLCBwYXJzZV9xcwppbXBvcnQgdXJsbGliMwpmcm9tIHVybGxpYi5wYXJzZSBpbXBvcnQgcGFyc2VfcXMsIHVybHNwbGl0Cgp1cmxsaWIzLmRpc2FibGVfd2FybmluZ3MoKQoKIyDloat3eHB1c2hlcueahGFwcFRva2Vu77yM6YWN572u5Zyo546v5aKD5Y+Y6YeP6YeM6L+Z5qC35rKh6YWN572u55qE6LSm5Y+35Lya6Ieq5Yqo5L2/55So6L+Z5Liq5o6o6YCBCnd4cHVzaGVyQXBwVG9rZW4gPSBvcy5nZXRlbnYoInd4cHVzaGVyQXBwVG9rZW4iKSBvciAiIgp3eHB1c2hlclRvcGljSWQgPSBvcy5nZXRlbnYoInd4cHVzaGVyVG9waWNJZCIpIG9yICIiCndlY2hhdEJ1c3NpbmVzc0tleSA9IG9zLmdldGVudigid2VjaGF0QnVzc2luZXNzS2V5Iikgb3IgIiIKcmVhZFBvc3REZWxheSA9IDAKaWYgb3MuZ2V0ZW52KCJ4eXl5ZFJlYWRQb3N0RGVsYXkiKSBhbmQgb3MuZ2V0ZW52KCJ4eXl5ZFJlYWRQb3N0RGVsYXkiKS5pc2RlY2ltYWwoKToKICAgIHJlYWRQb3N0RGVsYXkgPSBpbnQob3MuZ2V0ZW52KCJ4eXl5ZFJlYWRQb3N0RGVsYXkiKSkKcmVhZFRpbWVSYW5nZVN0ciA9IG9zLmdldGVudigieHl5eWRSZWFkVGltZVJhbmdlIikgb3IgIlswLDIzXSIKaWYgcmVhZFRpbWVSYW5nZVN0cjoKICAgIHJlYWRUaW1lUmFuZ2UgPSBqc29uLmxvYWRzKHJlYWRUaW1lUmFuZ2VTdHIpCgoKZGVmIGV4dHJhY3RfbWlkZGxlX3RleHQoc291cmNlLCBiZWZvcmVfdGV4dCwgYWZ0ZXJfdGV4dCwgYWxsX21hdGNoZXM9RmFsc2UpOgogICAgcmVzdWx0cyA9IFtdCiAgICBzdGFydF9pbmRleCA9IHNvdXJjZS5maW5kKGJlZm9yZV90ZXh0KQoKICAgIHdoaWxlIHN0YXJ0X2luZGV4ICE9IC0xOgogICAgICAgIHNvdXJjZV9hZnRlcl9iZWZvcmVfdGV4dCA9IHNvdXJjZVtzdGFydF9pbmRleCArIGxlbihiZWZvcmVfdGV4dCkgOl0KICAgICAgICBlbmRfaW5kZXggPSBzb3VyY2VfYWZ0ZXJfYmVmb3JlX3RleHQuZmluZChhZnRlcl90ZXh0KQoKICAgICAgICBpZiBlbmRfaW5kZXggPT0gLTE6CiAgICAgICAgICAgIGJyZWFrCgogICAgICAgIHJlc3VsdHMuYXBwZW5kKHNvdXJjZV9hZnRlcl9iZWZvcmVfdGV4dFs6ZW5kX2luZGV4XSkKICAgICAgICBpZiBub3QgYWxsX21hdGNoZXM6CiAgICAgICAgICAgIGJyZWFrCgogICAgICAgIHNvdXJjZSA9IHNvdXJjZV9hZnRlcl9iZWZvcmVfdGV4dFtlbmRfaW5kZXggKyBsZW4oYWZ0ZXJfdGV4dCkgOl0KICAgICAgICBzdGFydF9pbmRleCA9IHNvdXJjZS5maW5kKGJlZm9yZV90ZXh0KQoKICAgIHJldHVybiByZXN1bHRzIGlmIGFsbF9tYXRjaGVzIGVsc2UgcmVzdWx0c1swXSBpZiByZXN1bHRzIGVsc2UgIiIKCgpkZWYgc2FmZV9yZXF1ZXN0KG1ldGhvZCwgdXJsLCByZXRyaWVzPTMsICoqa3dhcmdzKToKICAgIGZvciBpIGluIHJhbmdlKHJldHJpZXMpOgogICAgICAgIHRyeToKICAgICAgICAgICAgaWYgbWV0aG9kLnVwcGVyKCkgPT0gIkdFVCI6CiAgICAgICAgICAgICAgICByZXNwb25zZSA9IHJlcXVlc3RzLmdldCh1cmwsICoqa3dhcmdzKQogICAgICAgICAgICBlbGlmIG1ldGhvZC51cHBlcigpID09ICJQT1NUIjoKICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gcmVxdWVzdHMucG9zdCh1cmwsICoqa3dhcmdzKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgcHJpbnQoZiLkuI3mlK/mjIHnmoTor7fmsYLnsbvlnos6IHttZXRob2R9IikKICAgICAgICAgICAgICAgIHJldHVybiBOb25lCiAgICAgICAgICAgIHJldHVybiByZXNwb25zZQogICAgICAgIGV4Y2VwdCByZXF1ZXN0cy5leGNlcHRpb25zLlJlcXVlc3RFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgcHJpbnQoZiLor7fmsYLlpLHotKU6IHtlfSIpCiAgICAgICAgICAgIGlmIGkgPCByZXRyaWVzIC0gMTogICMg5aaC5p6c5LiN5piv5pyA5ZCO5LiA5qyh5bCd6K+V77yM5bCx562J5b6F5LiA5q615pe26Ze05YaN6YeN6K+VCiAgICAgICAgICAgICAgICB3YWl0ID0gcmFuZG9tLnJhbmRpbnQoMSwgNSkgICMg6ZqP5py6562J5b6F5pe26Ze0CiAgICAgICAgICAgICAgICBwcmludChmIuetieW+hSB7d2FpdH0g56eS5ZCO6YeN6K+VLi4uIikKICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAod2FpdCkKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHByaW50KCLlsJ3or5Xor7fmsYLlpLHotKXvvIzlt7Lovr7liLDmnIDlpKflsJ3or5XmrKHmlbAiKQogICAgICAgICAgICAgICAgcmV0dXJuIE5vbmUgICMg5oiW6ICF5L2g5Y+v5Lul6L+U5Zue5LiA5Liq54m55a6a55qE5YC85oiW5a+56LGh5p2l6KGo56S66K+35rGC5aSx6LSlCgoKZGVmIHB1c2goYXBwVG9rZW4sIHRvcGljSWRzLCB0aXRsZSwgbGluaywgdGV4dCk6CiAgICBkYXRhcHVzdCA9IHsKICAgICAgICAiYXBwVG9rZW4iOiBhcHBUb2tlbiwKICAgICAgICAiY29udGVudCI6IGYiIiI8Ym9keSBvbmxvYWQ9IndpbmRvdy5sb2NhdGlvbi5ocmVmPSd7bGlua30nIj7lh7rnjrDmo4DmtYvmlofnq6DvvIHvvIHvvIFcbjxhIHN0eWxlPSdwYWRkaW5nOjEwcHg7Y29sb3I6cmVkO2ZvbnQtc2l6ZToyMHB4OycgaHJlZj0ne2xpbmt9Jz7ngrnlh7vmiJHmiZPlvIDlvoXmo4DmtYvmlofnq6A8L2E+XG7or7flsL3lv6vngrnlh7vpk77mjqXlrozmiJDpmIXor7tcbuWkh+azqO+8mnt0ZXh0fTwvYm9keT4iIiIsCiAgICAgICAgInN1bW1hcnkiOiB0aXRsZSBvciAi5bCP6ZiF6ZiF6ZiF6K+7IiwKICAgICAgICAiY29udGVudFR5cGUiOiAyLAogICAgICAgICJ0b3BpY0lkcyI6IFt0b3BpY0lkcyBvciAiMTE2ODYiXSwKICAgICAgICAidXJsIjogbGluaywKICAgIH0KICAgICMgcHJpbnQoZGF0YXB1c3QpCiAgICB1cmxwdXN0ID0gImh0dHA6Ly93eHB1c2hlci56amllY29kZS5jb20vYXBpL3NlbmQvbWVzc2FnZSIKICAgIHRyeToKICAgICAgICBwID0gc2FmZV9yZXF1ZXN0KCJQT1NUIiwgdXJsPXVybHB1c3QsIGpzb249ZGF0YXB1c3QsIHZlcmlmeT1GYWxzZSkKICAgICAgICAjIHByaW50KHApCiAgICAgICAgaWYgcC5qc29uKClbImNvZGUiXSA9PSAxMDAwOgogICAgICAgICAgICBwcmludCgi4pyFIOaOqOmAgeaWh+eroOWIsOW+ruS/oeaIkOWKn++8jOivt+WwveW/q+WJjeW+gOeCueWHu+aWh+eroO+8jOS4jeeEtuWwsem7keWPt+WVpu+8gSIpCiAgICAgICAgICAgIHJldHVybiBUcnVlCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcHJpbnQoIuKdjCDmjqjpgIHmlofnq6DliLDlvq7kv6HlpLHotKXvvIzlrozniorlrZDvvIzopoHpu5Hlj7fkuobvvIEiKQogICAgICAgICAgICByZXR1cm4gRmFsc2UKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICBwcmludCgi4p2MIOaOqOmAgeaWh+eroOWIsOW+ruS/oeWksei0pe+8jOWujOeKiuWtkO+8jOimgem7keWPt+S6hu+8gSIpCiAgICAgICAgcmFpc2UgZQogICAgICAgIHJldHVybiBGYWxzZQoKCmRlZiBwdXNoV2VjaGF0QnVzc2luZXNzKHJvYm90S2V5LCBsaW5rKToKICAgIGRhdGFwdXN0ID0geyJtc2d0eXBlIjogInRleHQiLCAidGV4dCI6IHsiY29udGVudCI6IGxpbmt9fQogICAgIyBwcmludChkYXRhcHVzdCkKICAgIHVybHB1c3QgPSAiaHR0cHM6Ly9xeWFwaS53ZWl4aW4ucXEuY29tL2NnaS1iaW4vd2ViaG9vay9zZW5kP2tleT0iICsgcm9ib3RLZXkKICAgIHRyeToKICAgICAgICBwID0gc2FmZV9yZXF1ZXN0KCJQT1NUIiwgdXJsPXVybHB1c3QsIGpzb249ZGF0YXB1c3QsIHZlcmlmeT1GYWxzZSkKICAgICAgICAjIHByaW50KHApCiAgICAgICAgaWYgcC5qc29uKClbImVycmNvZGUiXSA9PSAwOgogICAgICAgICAgICBwcmludCgi4pyFIOaOqOmAgeaWh+eroOWIsOS8geS4muW+ruS/oeaIkOWKn++8gSIpCiAgICAgICAgICAgIHJldHVybiBUcnVlCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcHJpbnQoIuKdjCDmjqjpgIHmlofnq6DliLDkvIHkuJrlvq7kv6HlpLHotKXvvIEiKQogICAgICAgICAgICByZXR1cm4gRmFsc2UKICAgIGV4Y2VwdDoKICAgICAgICBwcmludCgi4p2MIOaOqOmAgeaWh+eroOWIsOS8geS4muW+ruS/oeWksei0pe+8gSIpCiAgICAgICAgcmV0dXJuIEZhbHNlCgoKZGVmIGdldFBvc3RXZWNoYXRJbmZvKGxpbmspOgogICAgdHJ5OgogICAgICAgIHIgPSBzYWZlX3JlcXVlc3QoIkdFVCIsIGxpbmssIHZlcmlmeT1GYWxzZSkKICAgICAgICAjIHByaW50KGxpbmssIHIudGV4dCkKICAgICAgICBodG1sID0gcmUuc3ViKCJccyIsICIiLCByLnRleHQpCiAgICAgICAgYml6ID0gcmUuZmluZGFsbCgndmFyYml6PSIoLio/KSJcfFx8JywgaHRtbCkKICAgICAgICBpZiBiaXogIT0gW106CiAgICAgICAgICAgIGJpeiA9IGJpelswXQogICAgICAgIGlmIGJpeiA9PSAiIiBvciBiaXogPT0gW106CiAgICAgICAgICAgIGlmICJfX2JpeiIgaW4gbGluazoKICAgICAgICAgICAgICAgIGJpeiA9IHJlLmZpbmRhbGwoIl9fYml6PSguKj8pJiIsIGxpbmspCiAgICAgICAgICAgICAgICBpZiBiaXogIT0gW106CiAgICAgICAgICAgICAgICAgICAgYml6ID0gYml6WzBdCiAgICAgICAgbmlja25hbWUgPSByZS5maW5kYWxsKCd2YXJuaWNrbmFtZT1odG1sRGVjb2RlXCgiKC4qPykiXCk7JywgaHRtbCkKICAgICAgICBpZiBuaWNrbmFtZSAhPSBbXToKICAgICAgICAgICAgbmlja25hbWUgPSBuaWNrbmFtZVswXQogICAgICAgIHVzZXJfbmFtZSA9IHJlLmZpbmRhbGwoJ3ZhcnVzZXJfbmFtZT0iKC4qPykiOycsIGh0bWwpCiAgICAgICAgaWYgdXNlcl9uYW1lICE9IFtdOgogICAgICAgICAgICB1c2VyX25hbWUgPSB1c2VyX25hbWVbMF0KICAgICAgICBtc2dfdGl0bGUgPSByZS5maW5kYWxsKCJ2YXJtc2dfdGl0bGU9JyguKj8pJ1wuaHRtbFwoIiwgaHRtbCkKICAgICAgICBpZiBtc2dfdGl0bGUgIT0gW106CiAgICAgICAgICAgIG1zZ190aXRsZSA9IG1zZ190aXRsZVswXQogICAgICAgIHRleHQgPSBmIuWFrOS8l+WPt+WUr+S4gOagh+ivhu+8mntiaXp9fOaWh+eroDp7bXNnX3RpdGxlfXzkvZzogIU6e25pY2tuYW1lfXzotKblj7c6e3VzZXJfbmFtZX0iCiAgICAgICAgcHJpbnQodGV4dCkKICAgICAgICByZXR1cm4gbmlja25hbWUsIHVzZXJfbmFtZSwgbXNnX3RpdGxlLCB0ZXh0LCBiaXoKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAjIHByaW50KGUpCiAgICAgICAgcHJpbnQoIuKdjCDmj5Dlj5bmlofnq6Dkv6Hmga/lpLHotKUiKQogICAgICAgIHJldHVybiBGYWxzZQoKCmRlZiB0cygpOgogICAgcmV0dXJuIHN0cihpbnQodGltZS50aW1lKCkpKSArICIwMDAiCgoKY2hlY2tEaWN0ID0gewogICAgIk16a3hOVEUzTXpRNE1RPT0iOiBbIummmeWnkOeIseaXheihjCIsICJnaF81NGE2NWRjNjAwMzkiXSwKICAgICJNemc1TWpNME1ERXdOdz09IjogWyLmiJHmnKzpnZ7lh6EiLCAiZ2hfNDZiMDc2OTAzNDczIl0sCiAgICAiTXpVek9EWTROekUyT1E9PSI6IFsi5aSa6IKJ6JGh6JCEMjAyMCIsICJnaF9iM2Q3OWNkMWUxYjUiXSwKICAgICJNemt5TWpFM016WXhNZz09IjogWyJZb3VoZnVsIiwgImdoX2IzZDc5Y2QxZTFiNSJdLAogICAgIk16a3hOak13TkRJek9BPT0iOiBbIuWwkeW5tOayoeacieS5jOaJmOmCpjMiLCAiZ2hfYjNkNzljZDFlMWI1Il0sCiAgICAiTXpnM056VXhNamM1TWc9PSI6IFsi5pif5pif6K+66KiAIiwgImdoX2IzZDc5Y2QxZTFiNSJdLAogICAgIk16ZzROVGN3T0RFMU5BPT0iOiBbIuaWkemprOi/mOayoeedoTEyMyIsICJnaF9iM2Q3OWNkMWUxYjUiXSwKICAgICJNemswT0RJeE9ERTRPUT09IjogWyLmjIHlrrblppnmi5vlrp3lhbgiLCAiZ2hfYjNkNzljZDFlMWI1Il0sCiAgICAiTXpnMk5qVXlNakkxTkE9PSI6IFsiTGlsaW5uZyIsICJnaF9iM2Q3OWNkMWUxYjUiXSwKICAgICJNekl6TURjek9EZzRNdz09IjogWyLmnInmlYXkuovnmoTlkIzlraZZIiwgImdoX2IzZDc5Y2QxZTFiNSJdLAogICAgIk16ZzVPRFV5TXpZek1RPT0iOiBbIjc4OeS5n+S4jeihjCIsICJnaF9iM2Q3OWNkMWUxYjUiXSwKICAgICJNelUwTnpJNU1qYzRPUT09IjogWyLnmq7om4vnmKbogonnjKoiLCAiZ2hfNThkN2VlNTkzYjg2Il0sCiAgICAiTXpnNU1EZ3hPREF6TWc9PSI6IFsi5YyX5YyX5bCP5Yqp5omLIiwgImdoXzU4ZDdlZTU5M2I4NiJdLAogICAgIk16SXpNRGN6T0RnNE13PT0iOiBbIuacieaVheS6i+eahOWQjOWtplkiLCAiZ2hfYjhiOTI5MzRkYTVmIl0sCiAgICAiTXpreE5EVTFOREV6Tnc9PSI6IFsi5bCP6ZiF6ZiF5pyN5YqhIiwgImdoX2U1MGNmZWZlZjllNSJdLAogICAgIk16a3hORFl6T1RFeU13PT0iOiBbIuiTneiOk+WPr+S5kCIsICJnaF83M2NhMjM4YWRkOTciXSwKfQoKCmNsYXNzIEhIWUQ6CiAgICBkZWYgX19pbml0X18oc2VsZiwgY2cpOgogICAgICAgIHNlbGYuYmFsYW5jZSA9IDAKICAgICAgICBzZWxmLnVuaW9uSWQgPSBjZ1sidW5pb25JZCJdCiAgICAgICAgc2VsZi55c21fdWlkID0gY2dbInlzbV91aWQiXQogICAgICAgICMgcHJpbnQoImNnIiwgY2csIHNlbGYudW5pb25JZCwgc2VsZi55c21fdWlkKQogICAgICAgIHNlbGYudHhieiA9IGNnWyJ0eGJ6Il0KICAgICAgICBzZWxmLnRvcGljSWRzID0gY2dbInRvcGljSWRzIl0KICAgICAgICBzZWxmLmFwcFRva2VuID0gY2dbImFwcFRva2VuIl0KICAgICAgICBnbG9iYWwgd2VjaGF0QnVzc2luZXNzS2V5CiAgICAgICAgc2VsZi53ZWNoYXRCdXNzaW5lc3NLZXkgPSB3ZWNoYXRCdXNzaW5lc3NLZXkgb3IgIiIKICAgICAgICBzZWxmLmFsaUFjY291bnQgPSBjZ1siYWxpQWNjb3VudCJdIG9yICIiCiAgICAgICAgc2VsZi5hbGlOYW1lID0gY2dbImFsaU5hbWUiXSBvciAiIgogICAgICAgIHNlbGYubmFtZSA9IGNnWyJuYW1lIl0KICAgICAgICBzZWxmLmRvbW5haW5Ib3N0ID0gIjE2OTg4NTUxMzkuaHhpb25nLnRvcCIKICAgICAgICBzZWxmLmV4Y2hhbmdlUGFyYW1zID0gIiIKICAgICAgICBzZWxmLmhlYWRlcnMgPSB7CiAgICAgICAgICAgICJDb25uZWN0aW9uIjogImtlZXAtYWxpdmUiLAogICAgICAgICAgICAiQWNjZXB0IjogImFwcGxpY2F0aW9uL2pzb24sIHRleHQvamF2YXNjcmlwdCwgKi8qOyBxPTAuMDEiLAogICAgICAgICAgICAiVXNlci1BZ2VudCI6ICJNb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wOyBXaW42NDsgeDY0KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvMTA3LjAuMC4wIFNhZmFyaS81MzcuMzYgTmV0VHlwZS9XSUZJIE1pY3JvTWVzc2VuZ2VyLzcuMC4yMC4xNzgxKDB4NjcwMDE0M0IpIFdpbmRvd3NXZWNoYXQoMHg2MzA5MDYyMSkgWFdFQi84MzUxIEZsdWUiLAogICAgICAgICAgICAiWC1SZXF1ZXN0ZWQtV2l0aCI6ICJYTUxIdHRwUmVxdWVzdCIsCiAgICAgICAgICAgICJSZWZlcmVyIjogZiJodHRwOi8ve3NlbGYuZG9tbmFpbkhvc3R9LyIsCiAgICAgICAgICAgICJPcmlnaW4iOiBmImh0dHA6Ly97c2VsZi5kb21uYWluSG9zdH0iLAogICAgICAgICAgICAjICJIb3N0IjogZiJ7c2VsZi5kb21uYWluSG9zdH0iLAogICAgICAgICAgICAiQWNjZXB0LUVuY29kaW5nIjogImd6aXAsIGRlZmxhdGUiLAogICAgICAgICAgICAiQWNjZXB0LUxhbmd1YWdlIjogInpoLUNOLHpoIiwKICAgICAgICAgICAgIkNvbnRlbnQtVHlwZSI6ICJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7IGNoYXJzZXQ9VVRGLTgiLAogICAgICAgICAgICAiQ29va2llIjogZiJ5c21fdWlkPXtzZWxmLnlzbV91aWR9OyIsCiAgICAgICAgfQogICAgICAgIHNlbGYucmVhZEp1bXBQYXRoID0gIiIKCiAgICBkZWYgdXNlcl9pbmZvKHNlbGYpOgogICAgICAgIHUgPSBmImh0dHA6Ly97c2VsZi5kb21uYWluSG9zdH0veXVub25saW5lL3YxL3NpZ25faW5mbz90aW1lPXt0cygpfSZ1bmlvbmlkPXtzZWxmLnVuaW9uSWR9IgogICAgICAgIHIgPSAiIgogICAgICAgIHRyeToKICAgICAgICAgICAgciA9IHNhZmVfcmVxdWVzdCgiR0VUIiwgdSkKICAgICAgICAgICAgcmogPSByLmpzb24oKQogICAgICAgICAgICBpZiByai5nZXQoImVycmNvZGUiKSA9PSAwOgogICAgICAgICAgICAgICAgcHJpbnQoCiAgICAgICAgICAgICAgICAgICAgZiLotKblj7dbe3NlbGYubmFtZX1d6I635Y+W5L+h5oGv5oiQ5Yqf77yM5b2T5YmN6ZiF6K+75paH56ug5q+P56+H5aWW5YqxIHtyLmpzb24oKVsnZGF0YSddWydhd2FyZCddfeS4qumHkeW4gSIKICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIHJldHVybiBUcnVlCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBwcmludChmIui0puWPt1t7c2VsZi5uYW1lfV3ojrflj5bnlKjmiLfkv6Hmga/lpLHotKXvvIzotKblj7flvILluLgg5oiW6ICFIHlzbV91aWTml6DmlYjvvIzor7fmo4DmtYt5c21fdWlk5piv5ZCm5q2j56GuIikKICAgICAgICAgICAgICAgIHJldHVybiBGYWxzZQogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgcHJpbnQoci50ZXh0KQogICAgICAgICAgICBwcmludChmIui0puWPt1t7c2VsZi5uYW1lfV3ojrflj5bnlKjmiLfkv6Hmga/lpLHotKUseXNtX3VpZOaXoOaViO+8jOivt+ajgOa1i3lzbV91aWTmmK/lkKbmraPnoa4iKQogICAgICAgICAgICByZXR1cm4gRmFsc2UKCiAgICBkZWYgaGFzV2VjaGF0KHNlbGYpOgogICAgICAgIHIgPSAiIgogICAgICAgIHRyeToKICAgICAgICAgICAgdSA9IGYiaHR0cDovL3tzZWxmLmRvbW5haW5Ib3N0fS95dW5vbmxpbmUvdjEvaGFzV2VjaGF0P3VuaW9uaWQ9e3NlbGYudW5pb25JZH0iCiAgICAgICAgICAgIHIgPSBzYWZlX3JlcXVlc3QoIkdFVCIsIHUpCiAgICAgICAgICAgIHByaW50KGYi6LSm5Y+3W3tzZWxmLm5hbWV9XeWIpOaWreWFrOS8l+WPt+S7u+WKoeaVsOmHj++8mntyLmpzb24oKVsnZGF0YSddWydoYXMnXX0iKQogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgcHJpbnQoZiLotKblj7dbe3NlbGYubmFtZX1d5Yik5pat5piv5ZCm5pyJ5YWs5LyX5Y+35Lu75Yqh5aSx6LSl77yae3IudGV4dH0iKQogICAgICAgICAgICByZXR1cm4gRmFsc2UKCiAgICBkZWYgZ29sZChzZWxmKToKICAgICAgICByID0gIiIKICAgICAgICB0cnk6CiAgICAgICAgICAgIHUgPSBmImh0dHA6Ly97c2VsZi5kb21uYWluSG9zdH0veXVub25saW5lL3YxL2dvbGQ/dW5pb25pZD17c2VsZi51bmlvbklkfSZ0aW1lPXt0cygpfSIKICAgICAgICAgICAgciA9IHNhZmVfcmVxdWVzdCgiR0VUIiwgdSkKICAgICAgICAgICAgIyBwcmludChyLmpzb24oKSkKICAgICAgICAgICAgcmogPSByLmpzb24oKQogICAgICAgICAgICBzZWxmLnJlbWFpbiA9IG1hdGguZmxvb3IoaW50KHJqLmdldCgiZGF0YSIpLmdldCgibGFzdF9nb2xkIikpKQogICAgICAgICAgICBwcmludCgKICAgICAgICAgICAgICAgIGYn6LSm5Y+3W3tzZWxmLm5hbWV9XeS7iuaXpeW3sue7j+mYheivu+S6hntyai5nZXQoImRhdGEiKS5nZXQoImRheV9yZWFkIil956+H5paH56ugLOWJqeS9mXtyai5nZXQoImRhdGEiKS5nZXQoInJlbWFpbl9yZWFkIil95pyq6ZiF6K+777yM5LuK5pel6I635Y+W6YeR5biBe3JqLmdldCgiZGF0YSIpLmdldCgiZGF5X2dvbGQiKX3vvIzliankvZl7c2VsZi5yZW1haW59JwogICAgICAgICAgICApCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICBwcmludChmIui0puWPt1t7c2VsZi5uYW1lfV3ojrflj5bph5HluIHlpLHotKXvvJoiLCBlKQogICAgICAgICAgICAjIHJhaXNlIGUKICAgICAgICAgICAgcmV0dXJuIEZhbHNlCgogICAgZGVmIGdldEtleShzZWxmKToKICAgICAgICB1ayA9ICIiCiAgICAgICAgdWtSZXMgPSBOb25lCiAgICAgICAgdSA9IGYiaHR0cDovL3tzZWxmLmRvbW5haW5Ib3N0fS95dW5vbmxpbmUvdjEve3NlbGYucmVhZEp1bXBQYXRofSIKICAgICAgICAjIHByaW50KCLmj5DnpLogZ2V0S2V577yaIiwgdSkKICAgICAgICBwID0gZiJ1bmlvbmlkPXtzZWxmLnVuaW9uSWR9IgogICAgICAgIHIgPSBzYWZlX3JlcXVlc3QoIlBPU1QiLCB1LCBoZWFkZXJzPXNlbGYuaGVhZGVycywgZGF0YT1wLCB2ZXJpZnk9RmFsc2UpCiAgICAgICAgIyBwcmludCgiZ2V0S2V577yaIiwgci50ZXh0KQogICAgICAgIHJqID0gci5qc29uKCkKICAgICAgICBkb21haW4gPSByai5nZXQoImRhdGEiKS5nZXQoImRvbWFpbiIpCiAgICAgICAgIyBwcmludCgi6K+35rGC5Lit6L2s6aG177yaIiwgci50ZXh0KQogICAgICAgIHBwID0gcGFyc2VfcXModXJscGFyc2UoZG9tYWluKS5xdWVyeSkKICAgICAgICBobiA9IHVybHBhcnNlKGRvbWFpbikubmV0bG9jCiAgICAgICAgdWsgPSBwcC5nZXQoInVrIilbMF0KICAgICAgICB1a1JlcyA9IHIudGV4dAogICAgICAgIGlmIHVrID09ICIiOgogICAgICAgICAgICBwcmludChmIui0puWPt1t7c2VsZi5uYW1lfV3ojrflj5Z1a+Wksei0pe+8jOi/lOWbnumUmeivr++8mnt1a1Jlc30iKQogICAgICAgICAgICByZXR1cm4KICAgICAgICB0aW1lLnNsZWVwKDgpCiAgICAgICAgciA9IHNhZmVfcmVxdWVzdCgKICAgICAgICAgICAgIkdFVCIsCiAgICAgICAgICAgIGRvbWFpbiwKICAgICAgICAgICAgaGVhZGVycz17CiAgICAgICAgICAgICAgICAiQWNjZXB0IjogInRleHQvaHRtbCxhcHBsaWNhdGlvbi94aHRtbCt4bWwsYXBwbGljYXRpb24veG1sO3E9MC45LGltYWdlL2F2aWYsaW1hZ2Uvd2VicCxpbWFnZS9hcG5nLCovKjtxPTAuOCxhcHBsaWNhdGlvbi9zaWduZWQtZXhjaGFuZ2U7dj1iMztxPTAuOSIsCiAgICAgICAgICAgICAgICAiQWNjZXB0LUVuY29kaW5nIjogImd6aXAsIGRlZmxhdGUsIGJyIiwKICAgICAgICAgICAgICAgICJBY2NlcHQtTGFuZ3VhZ2UiOiAiemgtQ04semg7cT0wLjkiLAogICAgICAgICAgICAgICAgIkNvbm5lY3Rpb24iOiAia2VlcC1hbGl2ZSIsCiAgICAgICAgICAgICAgICAiSG9zdCI6IGYie2hufSIsCiAgICAgICAgICAgICAgICAiU2VjLUZldGNoLURlc3QiOiAiZG9jdW1lbnQiLAogICAgICAgICAgICAgICAgIlNlYy1GZXRjaC1Nb2RlIjogIm5hdmlnYXRlIiwKICAgICAgICAgICAgICAgICJTZWMtRmV0Y2gtU2l0ZSI6ICJub25lIiwKICAgICAgICAgICAgICAgICJTZWMtRmV0Y2gtVXNlciI6ICI/MSIsCiAgICAgICAgICAgICAgICAiVXBncmFkZS1JbnNlY3VyZS1SZXF1ZXN0cyI6ICIxIiwKICAgICAgICAgICAgICAgICJVc2VyLUFnZW50IjogIk1vemlsbGEvNS4wIChXaW5kb3dzIE5UIDEwLjA7IFdpbjY0OyB4NjQpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS8xMDcuMC4wLjAgU2FmYXJpLzUzNy4zNiBOZXRUeXBlL1dJRkkgTWljcm9NZXNzZW5nZXIvNy4wLjIwLjE3ODEoMHg2NzAwMTQzQikgV2luZG93c1dlY2hhdCgweDYzMDkwNzFkKSBYV0VCLzg0NjEgRmx1ZSIsCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHZlcmlmeT1GYWxzZSwKICAgICAgICApCiAgICAgICAgIyBwcmludChmIui0puWPt1t7c2VsZi5uYW1lfV0g6ZiF6K+75YeG5aSH5a6M5oiQ77yae3Vrfe+8jOaPkOWPluWIsOeahOWcsOWdgO+8mntkb21haW59IikKICAgICAgICBwcmludChmIui0puWPt1t7c2VsZi5uYW1lfV0g6ZiF6K+75YeG5aSH5oiQ5YqfIOWNs+WwhuW8gOWni+mYheivuyDinIUg77yM6ZiF6K+75Y+C5pWw5Li677yae3VrfSIpCiAgICAgICAgaCA9IHsKICAgICAgICAgICAgIkFjY2VwdCI6ICJhcHBsaWNhdGlvbi9qc29uLCB0ZXh0L2phdmFzY3JpcHQsICovKjsgcT0wLjAxIiwKICAgICAgICAgICAgIkFjY2VwdC1FbmNvZGluZyI6ICJnemlwLCBkZWZsYXRlLCBiciIsCiAgICAgICAgICAgICJBY2NlcHQtTGFuZ3VhZ2UiOiAiemgtQ04semg7cT0wLjkiLAogICAgICAgICAgICAiQ29ubmVjdGlvbiI6ICJrZWVwLWFsaXZlIiwKICAgICAgICAgICAgIkhvc3QiOiAibnNyLnpzZjIwMjNlNDU4LmNsb3VkIiwKICAgICAgICAgICAgIk9yaWdpbiI6IGYiaHR0cHM6Ly97aG59IiwKICAgICAgICAgICAgIlNlYy1GZXRjaC1EZXN0IjogImVtcHR5IiwKICAgICAgICAgICAgIlNlYy1GZXRjaC1Nb2RlIjogImNvcnMiLAogICAgICAgICAgICAiU2VjLUZldGNoLVNpdGUiOiAiY3Jvc3Mtc2l0ZSIsCiAgICAgICAgICAgICJVc2VyLUFnZW50IjogIk1vemlsbGEvNS4wIChXaW5kb3dzIE5UIDEwLjA7IFdpbjY0OyB4NjQpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS8xMDcuMC4wLjAgU2FmYXJpLzUzNy4zNiBOZXRUeXBlL1dJRkkgTWljcm9NZXNzZW5nZXIvNy4wLjIwLjE3ODEoMHg2NzAwMTQzQikgV2luZG93c1dlY2hhdCgweDYzMDkwNzFkKSBYV0VCLzg0NjEgRmx1ZSIsCiAgICAgICAgfQogICAgICAgIHJldHVybiB1aywgaAoKICAgIGRlZiByZWFkKHNlbGYpOgogICAgICAgIGluZm8gPSBzZWxmLmdldEtleSgpCiAgICAgICAgaWYgbGVuKGluZm8pID09IDA6CiAgICAgICAgICAgIHByaW50KGYi6LSm5Y+3W3tzZWxmLm5hbWV9XeiOt+WPlumYheivu+WPguaVsOWksei0pe+8jOWBnOatouW+gOWQjumYheivu++8geKaoO+4jyAiKQogICAgICAgICAgICByZXR1cm4KICAgICAgICAjIHByaW50KGluZm8pCiAgICAgICAgdGltZS5zbGVlcCgyKQogICAgICAgIGFyY3RpbGVUaW1lID0gMQogICAgICAgIHdoaWxlIFRydWU6CiAgICAgICAgICAgIHJlcyA9IHsiZXJyY29kZSI6IC0xfQogICAgICAgICAgICByZWZyZXNoVGltZSA9IDAKICAgICAgICAgICAgd2hpbGUgcmVzWyJlcnJjb2RlIl0gIT0gMDoKICAgICAgICAgICAgICAgIHRpbWVTdGFtcCA9IHN0cih0cygpKQogICAgICAgICAgICAgICAgcHNnbiA9IGhhc2hsaWIubWQ1KAogICAgICAgICAgICAgICAgICAgICgKICAgICAgICAgICAgICAgICAgICAgICAgaW5mb1sxXVsiT3JpZ2luIl0ucmVwbGFjZSgiaHR0cHM6Ly8iLCAiIilbMDoxMV0KICAgICAgICAgICAgICAgICAgICAgICAgKyBpbmZvWzBdCiAgICAgICAgICAgICAgICAgICAgICAgICsgdGltZVN0YW1wCiAgICAgICAgICAgICAgICAgICAgICAgICsgIkEmSTI1TElMSVlEUyQiCiAgICAgICAgICAgICAgICAgICAgKS5lbmNvZGUoKQogICAgICAgICAgICAgICAgKS5oZXhkaWdlc3QoKQogICAgICAgICAgICAgICAgIyBwcmludChpbmZvLCB0aW1lU3RhbXApCiAgICAgICAgICAgICAgICBzZWxmLnBhcmFtcyA9IHsKICAgICAgICAgICAgICAgICAgICAidWsiOiBpbmZvWzBdLAogICAgICAgICAgICAgICAgICAgICJ0aW1lIjogdGltZVN0YW1wLAogICAgICAgICAgICAgICAgICAgICJwc2duIjogcHNnbiwKICAgICAgICAgICAgICAgICAgICAidiI6ICI0LjAiLAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdSA9IGYiaHR0cHM6Ly9uc3IuenNmMjAyM2U0NTguY2xvdWQveXVub25saW5lL3YxL2RvX3JlYWQiCiAgICAgICAgICAgICAgICByID0gc2FmZV9yZXF1ZXN0KAogICAgICAgICAgICAgICAgICAgICJHRVQiLAogICAgICAgICAgICAgICAgICAgIHUsCiAgICAgICAgICAgICAgICAgICAgaGVhZGVycz1pbmZvWzFdLAogICAgICAgICAgICAgICAgICAgIHBhcmFtcz1zZWxmLnBhcmFtcywKICAgICAgICAgICAgICAgICAgICB2ZXJpZnk9RmFsc2UsCiAgICAgICAgICAgICAgICAgICAgdGltZW91dD02MCwKICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIHByaW50KCItIiAqIDUwKQogICAgICAgICAgICAgICAgIyBwcmludCgKICAgICAgICAgICAgICAgICMgICAgIGYi6LSm5Y+3W3tzZWxmLm5hbWV9XeesrFt7cmVmcmVzaFRpbWUrMX1d5qyh6I635Y+W6ZiF6K+75paH56ugW3tpbmZvWzBdfV3nm67nmoTpobXvvJp7ci50ZXh0fSIKICAgICAgICAgICAgICAgICMgKQogICAgICAgICAgICAgICAgIyBwcmludCgi6ZiF6K+75paH56ug5Y+C5pWw5p+l55yL77yaIiwgdSwgc2VsZi5wYXJhbXMsIHIudGV4dCwgaW5mb1sxXSkKICAgICAgICAgICAgICAgIGlmIHIudGV4dCBhbmQgci5qc29uKClbImVycmNvZGUiXSA9PSAwOgogICAgICAgICAgICAgICAgICAgIHJlcyA9IHIuanNvbigpCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoCiAgICAgICAgICAgICAgICAgICAgICAgIGYi6LSm5Y+3W3tzZWxmLm5hbWV9XeesrFt7cmVmcmVzaFRpbWUrMX1d5qyh6I635Y+W56ysW3thcmN0aWxlVGltZX1d56+H6ZiF6K+75paH56ugW3tpbmZvWzBdfV3ot7Povazpk77mjqXmiJDlip8iCiAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBkZWNvZGVkX3N0ciA9IGpzb24ubG9hZHMoci50ZXh0KQogICAgICAgICAgICAgICAgICAgIGlmIGRlY29kZWRfc3RyWyJtc2ciXToKICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmIui0puWPt1t7c2VsZi5uYW1lfV3nrKxbe3JlZnJlc2hUaW1lKzF9XeasoeiOt+WPluesrFt7YXJjdGlsZVRpbWV9Xeevh+mYheivu+aWh+eroFt7aW5mb1swXX1d6Lez6L2s6ZO+5o6l5aSx6LSl77yae2RlY29kZWRfc3RyWydtc2cnXX0iCiAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEZhbHNlCiAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmIui0puWPt1t7c2VsZi5uYW1lfV3nrKxbe3JlZnJlc2hUaW1lKzF9XeasoeiOt+WPluesrFt7YXJjdGlsZVRpbWV9Xeevh+mYheivu+aWh+eroFt7aW5mb1swXX1d6Lez6L2s6ZO+5o6l5aSx6LSl77yae3IudGV4dH0iCiAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoMS41KQogICAgICAgICAgICAgICAgcmVmcmVzaFRpbWUgPSByZWZyZXNoVGltZSArIDEKICAgICAgICAgICAgICAgIGlmIHJlZnJlc2hUaW1lID49IDU6CiAgICAgICAgICAgICAgICAgICAgcHJpbnQoZiLimqDvuI8g6LSm5Y+3W3tzZWxmLm5hbWV9XeiOt+WPlumYheivu+esrFt7YXJjdGlsZVRpbWV9Xeevh+aWh+eroFt7aW5mb1swXX1d6LaF5pe24oCm4oCmIikKICAgICAgICAgICAgICAgICAgICByZXR1cm4KICAgICAgICAgICAgd2VjaGF0UG9zdExpbmsgPSAiIgogICAgICAgICAgICBpZiByZXMuZ2V0KCJlcnJjb2RlIikgPT0gMDoKICAgICAgICAgICAgICAgIHJldHVybkxpbmsgPSAiIgogICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgIHJldHVybkxpbmsgPSByZXMuZ2V0KCJkYXRhIikuZ2V0KCJsaW5rIikKICAgICAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgICAgICAgICBwcmludCgKICAgICAgICAgICAgICAgICAgICAgICAgZiLimqDvuI8g6LSm5Y+3W3tzZWxmLm5hbWV9XeiOt+WPlumYheivu+esrFt7YXJjdGlsZVRpbWV9Xeevh+aWh+eroFt7aW5mb1swXX1d6ZO+5o6l5aSx6LSl77yM55aR5Ly85Y+w5a2Q5o6l5Y+j5aSq5Z6D5Zy+77yM5bSp5LqG77yM6L+U5Zue5pWw5o2u5Li677yaIiwKICAgICAgICAgICAgICAgICAgICAgICAgcmVzLmdldCgiZGF0YSIpLAogICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICAgICAgaWYgIm1wLndlaXhpbi5xcS5jb20iIGluIHJldHVybkxpbms6CiAgICAgICAgICAgICAgICAgICAgcHJpbnQoZiLotKblj7dbe3NlbGYubmFtZX1dIOmYheivu+esrFt7YXJjdGlsZVRpbWV9Xeevh+W+ruS/oeaWh+eroO+8mntyZXR1cm5MaW5rfSIpCiAgICAgICAgICAgICAgICAgICAgd2VjaGF0UG9zdExpbmsgPSByZXR1cm5MaW5rCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICMgcHJpbnQoZiLotKblj7dbe3NlbGYubmFtZX1dIOmYheivu+esrFt7YXJjdGlsZVRpbWV9Xeevh+aWh+eroOWHhuWkh+i3s+i9rO+8mntsaW5rfSIpCiAgICAgICAgICAgICAgICAgICAgd2VjaGF0UG9zdExpbmsgPSBzZWxmLmp1bXAocmV0dXJuTGluaykKICAgICAgICAgICAgICAgICAgICBwcmludChmIui0puWPt1t7c2VsZi5uYW1lfV0g6ZiF6K+756ysW3thcmN0aWxlVGltZX1d56+H5paH56ug77yae3dlY2hhdFBvc3RMaW5rfSIpCiAgICAgICAgICAgICAgICBwcmludChmIui0puWPt1t7c2VsZi5uYW1lfV0g6ZiF6K+756ysW3thcmN0aWxlVGltZX1d56+H5paH56ug77yae3dlY2hhdFBvc3RMaW5rfSIpCiAgICAgICAgICAgICAgICBzbGVlcFRpbWUgPSByYW5kb20ucmFuZGludCg3LCAxMCkKICAgICAgICAgICAgICAgIGlmICJtcC53ZWl4aW4ucXEuY29tIiBpbiB3ZWNoYXRQb3N0TGluazoKICAgICAgICAgICAgICAgICAgICBwb3N0V2VjaGF0SW5mbyA9IGdldFBvc3RXZWNoYXRJbmZvKHdlY2hhdFBvc3RMaW5rKQogICAgICAgICAgICAgICAgICAgIGlmIHBvc3RXZWNoYXRJbmZvID09IEZhbHNlOgogICAgICAgICAgICAgICAgICAgICAgICBwcmludCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGYi4pqg77iPIOi0puWPt1t7c2VsZi5uYW1lfV3lm6Ag6I635Y+W5YWs5LyX5Y+35paH56ug5L+h5oGv5LiN5oiQ5Yqf77yM5a+86Ie06ZiF6K+756ysW3thcmN0aWxlVGltZX1d56+H5paH56ugW3tpbmZvWzBdfV0g5aSx6LSl4oCm4oCmIgogICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBGYWxzZQogICAgICAgICAgICAgICAgICAgICMg5aaC5p6c5piv5qOA5rWL54m55b6B5Yiw55qE5paH56ugIOaIluiAhSDlkI7kuIDnr4fmlofnq6DkuI7liY3kuIDnr4fnm7jkvLwKICAgICAgICAgICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrRGljdC5nZXQocG9zdFdlY2hhdEluZm9bNF0pICE9IE5vbmUKICAgICAgICAgICAgICAgICAgICAgICAgb3IgKHJlcy5nZXQoImRhdGEiKS5nZXQoImEiKSA9PSAyKQogICAgICAgICAgICAgICAgICAgICAgICBvciAoIiZjaGtzbT0iIGluIHdlY2hhdFBvc3RMaW5rKQogICAgICAgICAgICAgICAgICAgICAgICBvciAoIl9fYml6IiBub3QgaW4gd2VjaGF0UG9zdExpbmspCiAgICAgICAgICAgICAgICAgICAgKToKICAgICAgICAgICAgICAgICAgICAgICAgc2xlZXBUaW1lID0gcmVhZFBvc3REZWxheSBvciByYW5kb20ucmFuZGludCgxNSwgMjApCiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZiLimqDvuI8g6LSm5Y+3W3tzZWxmLm5hbWV9XemYheivu+esrFt7YXJjdGlsZVRpbWV9Xeevh+aWh+eroFt7aW5mb1swXX1dIOajgOa1i+WIsOeWkeS8vOajgOa1i+aWh+eroO+8jOato+WcqOaOqOmAge+8jOetieW+hei/h+ajgOa1i++8jOetieW+heaXtumXtO+8mntzbGVlcFRpbWV956eS44CC44CC44CCIgogICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHNlbGYud2VjaGF0QnVzc2luZXNzS2V5OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHVzaFdlY2hhdEJ1c3NpbmVzcyhzZWxmLndlY2hhdEJ1c3NpbmVzc0tleSwgd2VjaGF0UG9zdExpbmspCiAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYgc2VsZi5hcHBUb2tlbjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHB1c2goCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5hcHBUb2tlbiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnRvcGljSWRzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICLlsI/pmIXpmIXpmIXor7vov4fmo4DmtYsiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdlY2hhdFBvc3RMaW5rLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGYi6LSm5Y+3W3tzZWxmLm5hbWV9XemYheivu+esrFt7YXJjdGlsZVRpbWV9Xeevh+aWh+eroFt7aW5mb1swXX1dIOato+WcqOetieW+hei/h+ajgOa1i++8jOetieW+heaXtumXtO+8mntzbGVlcFRpbWV956eSXG7lubvnlJ/mj5DnpLrvvJrlv6vngrnvvIzliKvogL3mkIHml7bpl7TkuobvvIEiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZiLimqDvuI8g6LSm5Y+3W3tzZWxmLm5hbWV9XemYheivu+esrFt7YXJjdGlsZVRpbWV9Xeevh+aWh+eroFt7aW5mb1swXX1dIOmcgOimgei/h+ajgOa1i++8jOS9huaYr+acqumFjee9ruaOqOmAgXRva2Vu77yM5Li65LqG6YG/5YWN6buR5Y+377yM5YGc5q2i6ZiF6K+744CC44CC44CCIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEZhbHNlCiAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmIuKchSDotKblj7dbe3NlbGYubmFtZX1d6ZiF6K+756ysW3thcmN0aWxlVGltZX1d56+H5paH56ugW3tpbmZvWzBdfV0g6Z2e5qOA5rWL5paH56ug77yM5qih5ouf6K+7e3NsZWVwVGltZX3np5IiCiAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgcHJpbnQoCiAgICAgICAgICAgICAgICAgICAgICAgIGYi4pyFIOi0puWPt1t7c2VsZi5uYW1lfV3pmIXor7vnrKxbe2FyY3RpbGVUaW1lfV3nr4fmlofnq6Bbe2luZm9bMF19XSDpnZ7mo4DmtYvmlofnq6DvvIzmqKHmi5/or7t7c2xlZXBUaW1lfeenkiIKICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKHNsZWVwVGltZSkKICAgICAgICAgICAgICAgIHUxID0gZiJodHRwOi8vbnNyLnpzZjIwMjNlNDU4LmNsb3VkL3l1bm9ubGluZS92MS9nZXRfcmVhZF9nb2xkP3VrPXtpbmZvWzBdfSZ0aW1lPXtzbGVlcFRpbWV9JnRpbWVzdGFtcD17dHMoKX0iCiAgICAgICAgICAgICAgICByMSA9IHNhZmVfcmVxdWVzdCgiR0VUIiwgdTEsIGhlYWRlcnM9aW5mb1sxXSwgdmVyaWZ5PUZhbHNlKQogICAgICAgICAgICAgICAgaWYgcjEudGV4dCBhbmQgcjEuanNvbigpOgogICAgICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmIuKchSDotKblj7dbe3NlbGYubmFtZX1d6ZiF6K+756ysW3thcmN0aWxlVGltZX1d56+H5paH56ugW3tpbmZvWzBdfV3miYDlvpfph5HluIHvvJp7cjEuanNvbigpWydkYXRhJ11bJ2dvbGQnXX3kuKrvvIzotKbmiLflvZPliY3ph5HluIHvvJp7cjEuanNvbigpWydkYXRhJ11bJ2xhc3RfZ29sZCddfeS4qu+8jOS7iuaXpeW3suivu++8mntyMS5qc29uKClbJ2RhdGEnXVsnZGF5X3JlYWQnXX3mrKHvvIzku4rml6XmnKror7sge3IxLmpzb24oKVsnZGF0YSddWydyZW1haW5fcmVhZCddfeevh+aWh+eroCIKICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmIuKdjCDotKblj7dbe3NlbGYubmFtZX1d6ZiF6K+756ysW3thcmN0aWxlVGltZX1d56+H5paH56ugW3tpbmZvWzBdfV3lvILluLjvvJp7cjEuanNvbigpLmdldCgnbXNnJyl9IgogICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICLmnKzmrKHpmIXor7vml6DmlYgiIGluIHIxLmpzb24oKS5nZXQoIm1zZyIpOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIHByaW50KAogICAgICAgICAgICAgICAgICAgICAgICBmIuKdjCDotKblj7dbe3NlbGYubmFtZX1d6ZiF6K+756ysW3thcmN0aWxlVGltZX1d56+H5paH56ugW3tpbmZvWzBdfV3lpLHotKXvvJp7cjEudGV4dH0iCiAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgIGVsaWYgcmVzLmdldCgiZXJyY29kZSIpID09IDQwNToKICAgICAgICAgICAgICAgIHByaW50KGYi4pqg77iPIOi0puWPt1t7c2VsZi5uYW1lfV3pmIXor7vnrKxbe2FyY3RpbGVUaW1lfV3nr4fmlofnq6Bbe2luZm9bMF19XemYheivu+mHjeWkjSIpCiAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDEuNSkKICAgICAgICAgICAgZWxpZiByZXMuZ2V0KCJlcnJjb2RlIikgPT0gNDA3OgogICAgICAgICAgICAgICAgcHJpbnQoZiLimqDvuI8g6LSm5Y+3W3tzZWxmLm5hbWV9XemYheivu+esrFt7YXJjdGlsZVRpbWV9Xeevh+aWh+eroFt7aW5mb1swXX1d6ZiF6K+757uT5p2fIikKICAgICAgICAgICAgICAgIHJldHVybiBUcnVlCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBwcmludChmIuKaoO+4jyDotKblj7dbe3NlbGYubmFtZX1d6ZiF6K+756ysW3thcmN0aWxlVGltZX1d56+H5paH56ugW3tpbmZvWzBdfV3mnKrnn6Xmg4XlhrUiKQogICAgICAgICAgICAgICAgdGltZS5zbGVlcCgxLjUpCiAgICAgICAgICAgIGFyY3RpbGVUaW1lID0gYXJjdGlsZVRpbWUgKyAxCgogICAgZGVmIGp1bXAoc2VsZiwgbGluayk6CiAgICAgICAgcHJpbnQoZiLotKblj7dbe3NlbGYubmFtZX1d5byA5aeL5pys5qyh6ZiF6K+74oCm4oCmIikKICAgICAgICBobiA9IHVybHBhcnNlKGxpbmspLm5ldGxvYwogICAgICAgIGggPSB7CiAgICAgICAgICAgICJIb3N0IjogaG4sCiAgICAgICAgICAgICJDb25uZWN0aW9uIjogImtlZXAtYWxpdmUiLAogICAgICAgICAgICAiVXBncmFkZS1JbnNlY3VyZS1SZXF1ZXN0cyI6ICIxIiwKICAgICAgICAgICAgIlVzZXItQWdlbnQiOiAiTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzEwNy4wLjAuMCBTYWZhcmkvNTM3LjM2IE5ldFR5cGUvV0lGSSBNaWNyb01lc3Nlbmdlci83LjAuMjAuMTc4MSgweDY3MDAxNDNCKSBXaW5kb3dzV2VjaGF0KDB4NjMwOTA2MjEpIFhXRUIvODM1MSBGbHVlIiwKICAgICAgICAgICAgIkFjY2VwdCI6ICJ0ZXh0L2h0bWwsYXBwbGljYXRpb24veGh0bWwreG1sLGFwcGxpY2F0aW9uL3htbDtxPTAuOSxpbWFnZS9hdmlmLGltYWdlL3dlYnAsaW1hZ2UvYXBuZywqLyo7cT0wLjgsYXBwbGljYXRpb24vc2lnbmVkLWV4Y2hhbmdlO3Y9YjM7cT0wLjkiLAogICAgICAgICAgICAiQWNjZXB0LUVuY29kaW5nIjogImd6aXAsIGRlZmxhdGUiLAogICAgICAgICAgICAiQWNjZXB0LUxhbmd1YWdlIjogInpoLUNOLHpoIiwKICAgICAgICAgICAgIkNvb2tpZSI6IGYieXNtX3VpZD17c2VsZi55c21fdWlkfSIsCiAgICAgICAgfQogICAgICAgIHIgPSBzYWZlX3JlcXVlc3QoIkdFVCIsIGxpbmssIGhlYWRlcnM9aCwgYWxsb3dfcmVkaXJlY3RzPUZhbHNlLCB2ZXJpZnk9RmFsc2UpCiAgICAgICAgIyBwcmludChyLnN0YXR1c19jb2RlKQogICAgICAgIExvY2F0aW9uID0gci5oZWFkZXJzLmdldCgiTG9jYXRpb24iKQogICAgICAgIHByaW50KGYi6LSm5Y+3W3tzZWxmLm5hbWV9XeW8gOWni+mYheivu+aWh+eroCAtIHtMb2NhdGlvbn0iKQogICAgICAgIHJldHVybiBMb2NhdGlvbgoKICAgIGRlZiB3aXRoZHJhd1Bvc3Qoc2VsZiwgZXhjaGFuZ2VQYXJhbXMpOgogICAgICAgIHUgPSBmImh0dHA6Ly97c2VsZi5kb21uYWluSG9zdH0veXVub25saW5lL3YxL3dpdGhkcmF3IgogICAgICAgIHAgPSBmInVuaW9uaWQ9e2V4Y2hhbmdlUGFyYW1zWyd1bmlvbmlkJ119JnNpZ25pZD17ZXhjaGFuZ2VQYXJhbXNbJ3JlcXVlc3RfaWQnXX0mdWE9MCZwdHlwZT0wJnBhY2NvdW50PSZwbmFtZT0iCiAgICAgICAgaWYgc2VsZi5hbGlBY2NvdW50IGFuZCBzZWxmLmFsaU5hbWU6CiAgICAgICAgICAgIHAgPSBmInVuaW9uaWQ9e2V4Y2hhbmdlUGFyYW1zWyd1bmlvbmlkJ119JnNpZ25pZD17ZXhjaGFuZ2VQYXJhbXNbJ3JlcXVlc3RfaWQnXX0mdWE9MiZwdHlwZT0xJnBhY2NvdW50PXtxdW90ZShzZWxmLmFsaUFjY291bnQpfSZwbmFtZT17cXVvdGUoc2VsZi5hbGlOYW1lKX0iCiAgICAgICAgciA9IHNhZmVfcmVxdWVzdCgKICAgICAgICAgICAgIlBPU1QiLAogICAgICAgICAgICB1LAogICAgICAgICAgICBoZWFkZXJzPXsKICAgICAgICAgICAgICAgICJBY2NlcHQiOiAiYXBwbGljYXRpb24vanNvbiwgdGV4dC9qYXZhc2NyaXB0LCAqLyo7IHE9MC4wMSIsCiAgICAgICAgICAgICAgICAiQWNjZXB0LUVuY29kaW5nIjogImd6aXAsIGRlZmxhdGUiLAogICAgICAgICAgICAgICAgIkFjY2VwdC1MYW5ndWFnZSI6ICJ6aC1DTix6aDtxPTAuOSIsCiAgICAgICAgICAgICAgICAiQ29udGVudC1UeXBlIjogImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZDsgY2hhcnNldD1VVEYtOCIsCiAgICAgICAgICAgICAgICAiQ29va2llIjogZiJ5c211aWQ9e3NlbGYueXNtX3VpZH07IGVqZWN0Q29kZT0xIiwKICAgICAgICAgICAgICAgICJIb3N0IjogZiJ7c2VsZi5kb21uYWluSG9zdH0iLAogICAgICAgICAgICAgICAgIk9yaWdpbiI6IGYiaHR0cDovL3tzZWxmLmRvbW5haW5Ib3N0fSIsCiAgICAgICAgICAgICAgICAiUHJveHktQ29ubmVjdGlvbiI6ICJrZWVwLWFsaXZlIiwKICAgICAgICAgICAgICAgICJSZWZlcmVyIjogZiJodHRwOi8ve3NlbGYuZG9tbmFpbkhvc3R9L3l1bm9ubGluZS92MS9leGNoYW5nZT91bmlvbmlkPXtleGNoYW5nZVBhcmFtc1sndW5pb25pZCddfSZyZXF1ZXN0X2lkPXtleGNoYW5nZVBhcmFtc1sncmVxdWVzdF9pZCddfSZxcmNvZGVfbnVtYmVyPTE2NjA3ODY0MzU4MTQ1NTg4IiwKICAgICAgICAgICAgICAgICJYLVJlcXVlc3RlZC1XaXRoIjogIlhNTEh0dHBSZXF1ZXN0IiwKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZGF0YT1wLAogICAgICAgICAgICB2ZXJpZnk9RmFsc2UsCiAgICAgICAgKQogICAgICAgIHByaW50KGYi4pyFIOi0puWPt1t7c2VsZi5uYW1lfV0g5o+Q546w57uT5p6c77yaIiwgci5qc29uKClbIm1zZyJdKQoKICAgIGRlZiB3aXRoZHJhdyhzZWxmKToKICAgICAgICBnb2xkID0gaW50KGludChzZWxmLnJlbWFpbikgLyAxMDAwKSAqIDEwMDAKICAgICAgICBwcmludChmIui0puWPt1t7c2VsZi5uYW1lfV0g5pys5qyh5o+Q546w6YeR6aKdICIsIHNlbGYuYmFsYW5jZSwgIuWFgyArICIsIGdvbGQsICLph5HluIEiKQogICAgICAgIHF1ZXJ5ID0gdXJsc3BsaXQoc2VsZi5leGNoYW5nZVBhcmFtcykucXVlcnkKICAgICAgICBleGNoYW5nZVBhcmFtcyA9IHBhcnNlX3FzKHF1ZXJ5KQogICAgICAgICMg5bCG5YiX6KGo5YC86L2s5o2i5Li65a2X56ym5LiyCiAgICAgICAgZm9yIGtleSwgdmFsdWUgaW4gZXhjaGFuZ2VQYXJhbXMuaXRlbXMoKToKICAgICAgICAgICAgZXhjaGFuZ2VQYXJhbXNba2V5XSA9IHZhbHVlWzBdCiAgICAgICAgd2l0aGRyYXdCYWxhbmNlID0gcm91bmQoKGludChzZWxmLnR4YnopIC8gMTAwMDApLCAzKQogICAgICAgIGlmIGdvbGQgb3IgKHNlbGYuYmFsYW5jZSA+PSB3aXRoZHJhd0JhbGFuY2UpOgogICAgICAgICAgICBpZiBnb2xkOgogICAgICAgICAgICAgICAgIyDlvIDlp4vmj5DnjrAKICAgICAgICAgICAgICAgIHUxID0gZiJodHRwOi8ve3NlbGYuZG9tbmFpbkhvc3R9L3l1bm9ubGluZS92MS91c2VyX2dvbGQiCiAgICAgICAgICAgICAgICBwMSA9IGYidW5pb25pZD17ZXhjaGFuZ2VQYXJhbXNbJ3VuaW9uaWQnXX0mcmVxdWVzdF9pZD17ZXhjaGFuZ2VQYXJhbXNbJ3JlcXVlc3RfaWQnXX0mZ29sZD17Z29sZH0iCiAgICAgICAgICAgICAgICByID0gc2FmZV9yZXF1ZXN0KAogICAgICAgICAgICAgICAgICAgICJQT1NUIiwKICAgICAgICAgICAgICAgICAgICB1MSwKICAgICAgICAgICAgICAgICAgICBkYXRhPXAxLAogICAgICAgICAgICAgICAgICAgIGhlYWRlcnM9ewogICAgICAgICAgICAgICAgICAgICAgICAiQWNjZXB0IjogImFwcGxpY2F0aW9uL2pzb24sIHRleHQvamF2YXNjcmlwdCwgKi8qOyBxPTAuMDEiLAogICAgICAgICAgICAgICAgICAgICAgICAiQWNjZXB0LUVuY29kaW5nIjogImd6aXAsIGRlZmxhdGUiLAogICAgICAgICAgICAgICAgICAgICAgICAiQWNjZXB0LUxhbmd1YWdlIjogInpoLUNOLHpoO3E9MC45IiwKICAgICAgICAgICAgICAgICAgICAgICAgIkNvbnRlbnQtVHlwZSI6ICJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7IGNoYXJzZXQ9VVRGLTgiLAogICAgICAgICAgICAgICAgICAgICAgICAiQ29va2llIjogZiJ5c211aWQ9e3NlbGYueXNtX3VpZH07IGVqZWN0Q29kZT0xIiwKICAgICAgICAgICAgICAgICAgICAgICAgIkhvc3QiOiBmIntzZWxmLmRvbW5haW5Ib3N0fSIsCiAgICAgICAgICAgICAgICAgICAgICAgICJPcmlnaW4iOiBmImh0dHA6Ly97c2VsZi5kb21uYWluSG9zdH0iLAogICAgICAgICAgICAgICAgICAgICAgICAiUHJveHktQ29ubmVjdGlvbiI6ICJrZWVwLWFsaXZlIiwKICAgICAgICAgICAgICAgICAgICAgICAgIlJlZmVyZXIiOiBmImh0dHA6Ly97c2VsZi5kb21uYWluSG9zdH0veXVub25saW5lL3YxL2V4Y2hhbmdle3NlbGYuZXhjaGFuZ2VQYXJhbXN9IiwKICAgICAgICAgICAgICAgICAgICAgICAgIlVzZXItQWdlbnQiOiAiTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzEwNy4wLjAuMCBTYWZhcmkvNTM3LjM2IE5ldFR5cGUvV0lGSSBNaWNyb01lc3Nlbmdlci83LjAuMjAuMTc4MSgweDY3MDAxNDNCKSBXaW5kb3dzV2VjaGF0KDB4NjMwOTA3MWQpIFhXRUIvODQ2MSBGbHVlIiwKICAgICAgICAgICAgICAgICAgICAgICAgIlgtUmVxdWVzdGVkLVdpdGgiOiAiWE1MSHR0cFJlcXVlc3QiLAogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgdmVyaWZ5PUZhbHNlLAogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgIHJlcyA9IHIuanNvbigpCiAgICAgICAgICAgICAgICAgICAgaWYgcmVzLmdldCgiZXJyY29kZSIpID09IDA6CiAgICAgICAgICAgICAgICAgICAgICAgIHdpdGhkcmF3QmFsYW5jZU51bSA9IHNlbGYuYmFsYW5jZSArIGZsb2F0KHJlc1siZGF0YSJdWyJtb25leSJdKQogICAgICAgICAgICAgICAgICAgICAgICBwcmludCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGYi4pyFIOi0puWPt1t7c2VsZi5uYW1lfV0g6YeR5biB5YWR5o2i5Li6546w6YeR5oiQ5Yqf77yM5byA5aeL5o+Q546w77yM6aKE6K6h5Yiw6LSmIHt3aXRoZHJhd0JhbGFuY2VOdW19IOWFgyA+Pj4gIgogICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHdpdGhkcmF3QmFsYW5jZU51bSA8IHdpdGhkcmF3QmFsYW5jZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KGYi6LSm5Y+3W3tzZWxmLm5hbWV9Xeayoeaciei+vuWIsOaPkOeOsOagh+WHhiB7d2l0aGRyYXdCYWxhbmNlfSDlhYMiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEZhbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYud2l0aGRyYXdQb3N0KGV4Y2hhbmdlUGFyYW1zKQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4KICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICBwcmludCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGYi6LSm5Y+3W3tzZWxmLm5hbWV9XSDph5HluIHlhZHmjaLkuLrnjrDph5HlpLHotKXvvJoiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgci50ZXh0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIiDmj5DnjrDlnLDlnYDvvJoiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdTEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiIOaPkOeOsOWPguaVsO+8miIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwMSwKICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICAgICAgICAgICMgcmFpc2UgZQogICAgICAgICAgICAgICAgICAgICMg5aSE55CG5byC5bi4CiAgICAgICAgICAgICAgICAgICAgcHJpbnQoZiLotKblj7dbe3NlbGYubmFtZX1dIOaPkOeOsOWksei0pe+8miIsIGUpCiAgICAgICAgICAgIHNlbGYud2l0aGRyYXdQb3N0KGV4Y2hhbmdlUGFyYW1zKQoKICAgIGRlZiBpbml0KHNlbGYpOgogICAgICAgIHRyeToKICAgICAgICAgICAgY2hhcmFjdGVycyA9IHN0cmluZy5hc2NpaV9sZXR0ZXJzICsgc3RyaW5nLmRpZ2l0cwogICAgICAgICAgICByID0gc2FmZV9yZXF1ZXN0KAogICAgICAgICAgICAgICAgIkdFVCIsCiAgICAgICAgICAgICAgICBmImh0dHBzOi8vbnNyLnpzZjIwMjNlNDU4LmNsb3VkL3l1bm9ubGluZS92MS9nZXRjaGF0c2l0ZT90PXt0aW1lLnRpbWUoKX0mY2lkPXsnJy5qb2luKHJhbmRvbS5jaG9pY2VzKGNoYXJhY3RlcnMsIGs9MzIpKX0mY29kZT0wODFrdFJGYTFUTTYwSDBncjRHYTFVeycnLmpvaW4ocmFuZG9tLmNob2ljZXMoY2hhcmFjdGVycywgaz0xMCkpfSZzdGF0ZT0xIiwKICAgICAgICAgICAgICAgIHZlcmlmeT1GYWxzZSwKICAgICAgICAgICAgKQogICAgICAgICAgICBzZWxmLmRvbW5haW5Ib3N0ID0gci5qc29uKClbImRhdGEiXVsibHVvZGkiXS5zcGxpdCgiLyIpWzJdCiAgICAgICAgICAgICMgcHJpbnQoci50ZXh0KQogICAgICAgICAgICBwcmludChmIui0puWPt1t7c2VsZi5uYW1lfV3mj5Dlj5bliLDnmoTln5/lkI3vvJp7c2VsZi5kb21uYWluSG9zdH0iKQogICAgICAgICAgICBzZWxmLmhlYWRlcnMgPSB7CiAgICAgICAgICAgICAgICAiQ29ubmVjdGlvbiI6ICJrZWVwLWFsaXZlIiwKICAgICAgICAgICAgICAgICJBY2NlcHQiOiAiYXBwbGljYXRpb24vanNvbiwgdGV4dC9qYXZhc2NyaXB0LCAqLyo7IHE9MC4wMSIsCiAgICAgICAgICAgICAgICAiVXNlci1BZ2VudCI6ICJNb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wOyBXaW42NDsgeDY0KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvMTA3LjAuMC4wIFNhZmFyaS81MzcuMzYgTmV0VHlwZS9XSUZJIE1pY3JvTWVzc2VuZ2VyLzcuMC4yMC4xNzgxKDB4NjcwMDE0M0IpIFdpbmRvd3NXZWNoYXQoMHg2MzA5MDYyMSkgWFdFQi84MzUxIEZsdWUiLAogICAgICAgICAgICAgICAgIlgtUmVxdWVzdGVkLVdpdGgiOiAiWE1MSHR0cFJlcXVlc3QiLAogICAgICAgICAgICAgICAgIlJlZmVyZXIiOiBmImh0dHA6Ly97c2VsZi5kb21uYWluSG9zdH0vIiwKICAgICAgICAgICAgICAgICJPcmlnaW4iOiBmImh0dHA6Ly97c2VsZi5kb21uYWluSG9zdH0iLAogICAgICAgICAgICAgICAgIyAiSG9zdCI6IGYie3NlbGYuZG9tbmFpbkhvc3R9IiwKICAgICAgICAgICAgICAgICJBY2NlcHQtRW5jb2RpbmciOiAiZ3ppcCwgZGVmbGF0ZSIsCiAgICAgICAgICAgICAgICAiQWNjZXB0LUxhbmd1YWdlIjogInpoLUNOLHpoIiwKICAgICAgICAgICAgICAgICJDb250ZW50LVR5cGUiOiAiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkOyBjaGFyc2V0PVVURi04IiwKICAgICAgICAgICAgICAgICJDb29raWUiOiBmInlzbV91aWQ9e3NlbGYueXNtX3VpZH07IiwKICAgICAgICAgICAgfQogICAgICAgICAgICAjIOiOt+WPlnJlcXVlc3RJZAogICAgICAgICAgICBzZWxmLnNpZ25pZCA9ICIiCiAgICAgICAgICAgIGZvciBpIGluIHJhbmdlKDMpOgogICAgICAgICAgICAgICAgciA9IHNhZmVfcmVxdWVzdCgKICAgICAgICAgICAgICAgICAgICAiR0VUIiwKICAgICAgICAgICAgICAgICAgICBmImh0dHA6Ly97c2VsZi5kb21uYWluSG9zdH0vIiwKICAgICAgICAgICAgICAgICAgICBoZWFkZXJzPXsKICAgICAgICAgICAgICAgICAgICAgICAgIlVwZ3JhZGUtSW5zZWN1cmUtUmVxdWVzdHMiOiAiMSIsCiAgICAgICAgICAgICAgICAgICAgICAgICJVc2VyLUFnZW50IjogIk1vemlsbGEvNS4wIChXaW5kb3dzIE5UIDEwLjA7IFdpbjY0OyB4NjQpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS8xMDcuMC4wLjAgU2FmYXJpLzUzNy4zNiBOZXRUeXBlL1dJRkkgTWljcm9NZXNzZW5nZXIvNy4wLjIwLjE3ODEoMHg2NzAwMTQzQikgV2luZG93c1dlY2hhdCgweDYzMDkwNzFkKSBYV0VCLzg0NjEgRmx1ZSIsCiAgICAgICAgICAgICAgICAgICAgICAgICJBY2NlcHQiOiAidGV4dC9odG1sLGFwcGxpY2F0aW9uL3hodG1sK3htbCxhcHBsaWNhdGlvbi94bWw7cT0wLjksaW1hZ2UvYXZpZixpbWFnZS93ZWJwLGltYWdlL2FwbmcsKi8qO3E9MC44LGFwcGxpY2F0aW9uL3NpZ25lZC1leGNoYW5nZTt2PWIzO3E9MC45IiwKICAgICAgICAgICAgICAgICAgICAgICAgIkFjY2VwdC1FbmNvZGluZyI6ICJnemlwLCBkZWZsYXRlIiwKICAgICAgICAgICAgICAgICAgICAgICAgIkFjY2VwdC1MYW5ndWFnZSI6ICJ6aC1DTix6aDtxPTAuOSIsCiAgICAgICAgICAgICAgICAgICAgICAgICJDb29raWUiOiBmInlzbXVpZD17c2VsZi55c21fdWlkfSIsCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICB2ZXJpZnk9RmFsc2UsCiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICBodG1sdGV4dCA9IHIudGV4dAogICAgICAgICAgICAgICAgaWYgci5oaXN0b3J5OgogICAgICAgICAgICAgICAgICAgIGZvciByZXNwIGluIHIuaGlzdG9yeToKICAgICAgICAgICAgICAgICAgICAgICAgaWYgIm9wZW4ud2VpeGluLnFxLmNvbSIgaW4gcmVzcC5oZWFkZXJzWyJMb2NhdGlvbiJdOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZiLotKblj7dbe3NlbGYubmFtZX1dIENvb2tpZeW3sui/h+acn++8jOivt+mHjei/m+S4gOS4i+e9keerme+8jOWwseS8muiHquWKqOabtOaWsENvb2tpZe+8iOebruWJjeS4jeehruWumui/h+acn+aYr+WboOS4uuiHquW3seaJi+WKqOi/m+WOu+i/h+S6hui/mOaYr+S7gOS5iOWFtuS7luWOn+WboO+8iSIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBGYWxzZQogICAgICAgICAgICAgICAgcmVzMSA9IHJlLnN1YigiXHMiLCAiIiwgaHRtbHRleHQpCiAgICAgICAgICAgICAgICBzaWduaWRsID0gcmUuZmluZGFsbCgnXClcfFx8IiguKj8pIjsnLCByZXMxKQogICAgICAgICAgICAgICAgIyBwcmludChzaWduaWRsLCBodG1sdGV4dCkKICAgICAgICAgICAgICAgIGlmICLor6XotKblj7flrZjlnKjov53op4Tmk43kvZzvvIzlt7LooqvlsIHnpoEiIGluIGh0bWx0ZXh0OgogICAgICAgICAgICAgICAgICAgIHByaW50KGYi6LSm5Y+3W3tzZWxmLm5hbWV9XSDlrZjlnKjov53op4Tmk43kvZzvvIzlt7LooqvlsIHnpoHvvIzlh4nlh4nvvIzov4fkuKTkuKrmnIjlho3nnIvnnIvop6PmsqHop6PlsIHlkKd+ICIpCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEZhbHNlCiAgICAgICAgICAgICAgICBpZiBzaWduaWRsID09IFtdOgogICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoMSkKICAgICAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBzZWxmLnNpZ25pZCA9IHNpZ25pZGxbMF0KICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAjIOiOt+WPluaPkOeOsOmhtemdouWcsOWdgAogICAgICAgICAgICByID0gc2FmZV9yZXF1ZXN0KAogICAgICAgICAgICAgICAgIkdFVCIsCiAgICAgICAgICAgICAgICBmImh0dHA6Ly97c2VsZi5kb21uYWluSG9zdH0vP2NhdGU9MCIsCiAgICAgICAgICAgICAgICBoZWFkZXJzPXsKICAgICAgICAgICAgICAgICAgICAiVXBncmFkZS1JbnNlY3VyZS1SZXF1ZXN0cyI6ICIxIiwKICAgICAgICAgICAgICAgICAgICAiVXNlci1BZ2VudCI6ICJNb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wOyBXaW42NDsgeDY0KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvMTA3LjAuMC4wIFNhZmFyaS81MzcuMzYgTmV0VHlwZS9XSUZJIE1pY3JvTWVzc2VuZ2VyLzcuMC4yMC4xNzgxKDB4NjcwMDE0M0IpIFdpbmRvd3NXZWNoYXQoMHg2MzA5MDcxZCkgWFdFQi84NDYxIEZsdWUiLAogICAgICAgICAgICAgICAgICAgICJBY2NlcHQiOiAidGV4dC9odG1sLGFwcGxpY2F0aW9uL3hodG1sK3htbCxhcHBsaWNhdGlvbi94bWw7cT0wLjksaW1hZ2UvYXZpZixpbWFnZS93ZWJwLGltYWdlL2FwbmcsKi8qO3E9MC44LGFwcGxpY2F0aW9uL3NpZ25lZC1leGNoYW5nZTt2PWIzO3E9MC45IiwKICAgICAgICAgICAgICAgICAgICAiQWNjZXB0LUVuY29kaW5nIjogImd6aXAsIGRlZmxhdGUiLAogICAgICAgICAgICAgICAgICAgICJBY2NlcHQtTGFuZ3VhZ2UiOiAiemgtQ04semg7cT0wLjkiLAogICAgICAgICAgICAgICAgICAgICJDb29raWUiOiBmInlzbXVpZD17c2VsZi55c21fdWlkfSIsCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgdmVyaWZ5PUZhbHNlLAogICAgICAgICAgICApCiAgICAgICAgICAgIGh0bWx0ZXh0ID0gci50ZXh0CiAgICAgICAgICAgIHJlYWRfanVtcF9yZWFkX3RleHQgPSBleHRyYWN0X21pZGRsZV90ZXh0KAogICAgICAgICAgICAgICAgaHRtbHRleHQsCiAgICAgICAgICAgICAgICAiZnVuY3Rpb24gcmVhZF9qdW1wX3JlYWQodHlwZSx0aW1lKXsiLAogICAgICAgICAgICAgICAgInN1Y2Nlc3M6IGZ1bmN0aW9uKHJlcykgeyIsCiAgICAgICAgICAgICkKICAgICAgICAgICAgaWYgcmVhZF9qdW1wX3JlYWRfdGV4dDoKICAgICAgICAgICAgICAgIHJlYWRKdW1wUGF0aCA9IGV4dHJhY3RfbWlkZGxlX3RleHQoCiAgICAgICAgICAgICAgICAgICAgcmVhZF9qdW1wX3JlYWRfdGV4dCwgInVybDogZG9tYWluKyciLCAiJywiCiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICBpZiByZWFkSnVtcFBhdGg6CiAgICAgICAgICAgICAgICAgICAgc2VsZi5yZWFkSnVtcFBhdGggPSByZWFkSnVtcFBhdGgKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgcHJpbnQoCiAgICAgICAgICAgICAgICAgICAgICAgIGYi6LSm5Y+3W3tzZWxmLm5hbWV9XSDliJ3lp4vljJblpLHotKXvvIzor7fmiYvliqjorr/pl67kuIvnoa7orqTpobXpnaLmsqHltKnmuoMg5oiW6ICFIOeojeWQjuWGjeivleWQp++8jOS4gOebtOS4jeihjO+8jOivt+WJjeW+gFRH576k5Y+N6aaIfiAiCiAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgIHJldHVybiBGYWxzZQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgaWYgIuWtmOWcqOi/neinhOaTjeS9nCIgaW4gaHRtbHRleHQ6CiAgICAgICAgICAgICAgICAgICAgcHJpbnQoZiLotKblj7dbe3NlbGYubmFtZX1dIOiiq+ajgOa1i+WIsOS6hu+8jOW3sue7j+iiq+Wwge+8jOe7iOatouS7u+WKoe+8jOW/q+WOu+aPkOmGkuWkp+WutuWQp34gIikKICAgICAgICAgICAgICAgICAgICBzeXMuZXhpdCgwKQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBwcmludCgKICAgICAgICAgICAgICAgICAgICAgICAgZiLotKblj7dbe3NlbGYubmFtZX1dIOWIneWni+WMluWksei0pe+8jOivt+aJi+WKqOiuv+mXruS4i+ehruiupOmhtemdouayoeW0qea6gyDmiJbogIUg56iN5ZCO5YaN6K+V5ZCn77yM5LiA55u05LiN6KGM77yM6K+35YmN5b6AVEfnvqTlj43ppoh+ICIKICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEZhbHNlCiAgICAgICAgICAgIHJlczEgPSByZS5zdWIoIlxzIiwgIiIsIGh0bWx0ZXh0KQogICAgICAgICAgICBzaWduaWRsID0gcmUuZmluZGFsbCgnL3l1bm9ubGluZS92MS9leGNoYW5nZSguKj8pIicsIHJlczEpCiAgICAgICAgICAgICMgcHJpbnQoIuWIneWni+WMliDmj5DnjrDlj4LmlbA6Iiwgc2lnbmlkbFswXSkKICAgICAgICAgICAgaWYgc2lnbmlkbCA9PSBbXToKICAgICAgICAgICAgICAgIHByaW50KGYi6LSm5Y+3W3tzZWxmLm5hbWV9XeWIneWni+WMliDmj5DnjrDlj4LmlbAg5aSx6LSlLOi0puWPt+W8guW4uCIpCiAgICAgICAgICAgICAgICByZXR1cm4gRmFsc2UKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHNlbGYuZXhjaGFuZ2VQYXJhbXMgPSBzaWduaWRsWzBdCiAgICAgICAgICAgIHJld2FyZE51bVJlc3VsdCA9IHJlLnNlYXJjaCgKICAgICAgICAgICAgICAgICdkaXYgY2xhc3M9Im51bSBudW1iZXIgcmV3YXJkTnVtIj4oLio/KTwvJywgaHRtbHRleHQKICAgICAgICAgICAgKQogICAgICAgICAgICAjIHByaW50KCLliJ3lp4vljJYg5o+Q546w5Y+C5pWwOiIsIHNpZ25pZGxbMF0pCiAgICAgICAgICAgIGlmIHJld2FyZE51bVJlc3VsdCA9PSBbXToKICAgICAgICAgICAgICAgIHByaW50KGYi6LSm5Y+3W3tzZWxmLm5hbWV9XeWIneWni+WMliDmj5DnjrDlj4LmlbAg5aSx6LSlLOi0puWPt+W8guW4uCIpCiAgICAgICAgICAgICAgICByZXR1cm4gRmFsc2UKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHNlbGYuYmFsYW5jZSA9IGZsb2F0KHJld2FyZE51bVJlc3VsdFsxXSkKICAgICAgICAgICAgaWYgc2VsZi5zaWduaWQgPT0gIiI6CiAgICAgICAgICAgICAgICBwcmludChmIui0puWPt1t7c2VsZi5uYW1lfV3liJ3lp4vljJYgcmVxdWVzdElkIOWksei0pSzotKblj7flvILluLgiKQogICAgICAgICAgICAgICAgcmV0dXJuIEZhbHNlCiAgICAgICAgICAgIHJldHVybiBUcnVlCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICAjIHJhaXNlIGUKICAgICAgICAgICAgcHJpbnQoZiLotKblj7dbe3NlbGYubmFtZX1d5Yid5aeL5YyW5aSx6LSlLOivt+ajgOafpeS9oOeahGNrIikKICAgICAgICAgICAgcmV0dXJuIEZhbHNlCgogICAgZGVmIHJ1bihzZWxmKToKICAgICAgICBpZiBzZWxmLmluaXQoKToKICAgICAgICAgICAgc2VsZi51c2VyX2luZm8oKQogICAgICAgICAgICBzZWxmLmhhc1dlY2hhdCgpCiAgICAgICAgICAgIHNlbGYuZ29sZCgpCiAgICAgICAgICAgIGN1cnJlbnRIb3VyID0gZGF0ZXRpbWUubm93KCkuaG91cgogICAgICAgICAgICBpZiAoY3VycmVudEhvdXIgPCByZWFkVGltZVJhbmdlWzBdKSBvciAoY3VycmVudEhvdXIgPiByZWFkVGltZVJhbmdlWzFdKToKICAgICAgICAgICAgICAgIHByaW50KAogICAgICAgICAgICAgICAgICAgIGYi6LSm5Y+3W3tzZWxmLm5hbWV9XSDmo4DmtYvliLDlvZPliY3ml7bpl7TkuI3lnKjorr7lrprnmoTpmIXor7vml7bpl7TojIPlm7Qge3JlYWRUaW1lUmFuZ2VbMF19LXtyZWFkVGltZVJhbmdlWzFdfeWwj+aXtiDlhoXvvIzot7Pov4fpmIXor7siCiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBzZWxmLnJlYWQoKQogICAgICAgICAgICB0aW1lLnNsZWVwKDMpCiAgICAgICAgICAgIHNlbGYuZ29sZCgpCiAgICAgICAgICAgIHRpbWUuc2xlZXAoMykKICAgICAgICAgICAgc2VsZi53aXRoZHJhdygpCgoKZGVmIGdldE5ld0ludml0ZVVybCgpOgogICAgciA9IHNhZmVfcmVxdWVzdCgKICAgICAgICAiR0VUIiwgImh0dHBzOi8vd3d3LmZpbGVzbWVqLmNuL3dhaWRvbWFpbi5waHAiLCB2ZXJpZnk9RmFsc2UKICAgICkuanNvbigpCiAgICBpZiByLmdldCgiY29kZSIpID09IDA6CiAgICAgICAgbmV3RW50cnlVcmwgPSByLmdldCgiZGF0YSIpLmdldCgibHVvZGkiKQogICAgICAgIHBhcnNlZF91cmwgPSB1cmxwYXJzZShuZXdFbnRyeVVybCkKICAgICAgICBob3N0ID0gcGFyc2VkX3VybC5ob3N0bmFtZQogICAgICAgIHJldHVybiBmImh0dHA6Ly91N2RzLnN5NjczLnNob3AveXVub25saW5lL3YxL2F1dGgvMjYzOWJiOTVkYWJhMWQ5OWU1MzM4YThjMmUyMWUyZjA/Y29kZXVybD11N2RzLnN5NjczLnNob3AmY29kZXVzZXJpZD0yJnRpbWU9MTcwOTAyMTE3NiIucmVwbGFjZSgKICAgICAgICAgICAgInU3ZHMuc3k2NzMuc2hvcCIsIGhvc3Qgb3IgInU3ZHMuc3k2NzMuc2hvcCIKICAgICAgICApCiAgICBlbHNlOgogICAgICAgIHJldHVybiAiaHR0cDovL3U3ZHMuc3k2NzMuc2hvcC95dW5vbmxpbmUvdjEvYXV0aC8yNjM5YmI5NWRhYmExZDk5ZTUzMzhhOGMyZTIxZTJmMD9jb2RldXJsPXU3ZHMuc3k2NzMuc2hvcCZjb2RldXNlcmlkPTImdGltZT0xNzA5MDIxMTc2IgoKCmlmIF9fbmFtZV9fID09ICJfX21haW5fXyI6CiAgICAjIGFwcFRva2Vu77ya6L+Z5Liq5piv5aGrd3hwdXNoZXLnmoRhcHBUb2tlbgogICAgIyB0b3BpY0lkc++8mui/meS4quaYr3d4cHVzaGVy55qEdG9waWNJZHPmlLnmiJDkvaDoh6rlt7HnmoQKICAgICMg56S65L6LOiDlubvnlJ8jb1pkQnAwNHBzZ29OOGROMUVUX3VvODFOVEMzMSMzMDAwI0FUX1V5SWxiajIyMjJueW5FU2JNMnZKeUE3RHJtVW1VWEQjMTE2ODYKICAgIGFjY291bnRzID0gb3MuZ2V0ZW52KCJ4eXl5ZCIpCiAgICBpbnZpdGVVcmwgPSBnZXROZXdJbnZpdGVVcmwoKQogICAgaWYgYWNjb3VudHMgaXMgTm9uZToKICAgICAgICBwcmludChmIuS9oOayoeacieWhq+WFpXh5eXlk77yM5ZKL6L+Q6KGM77yfXG7otbDkuIvpgoDor7flkZfvvJp7aW52aXRlVXJsfSIpCiAgICBlbHNlOgogICAgICAgICMg6I635Y+W546v5aKD5Y+Y6YeP55qE5YC877yM5bm25oyJ5oyH5a6a5a2X56ym5Liy5YiG5Ymy5oiQ5aSa5Liq6LSm5Y+355qE5Y+C5pWw57uE5ZCICiAgICAgICAgYWNjb3VudHNfbGlzdCA9IG9zLmVudmlyb24uZ2V0KCJ4eXl5ZCIpLnNwbGl0KCImIikKCiAgICAgICAgIyDovpPlh7rmnInlh6DkuKrotKblj7cKICAgICAgICBudW1fb2ZfYWNjb3VudHMgPSBsZW4oYWNjb3VudHNfbGlzdCkKICAgICAgICBtb3JlVGlwID0gIiIKICAgICAgICBpZiByZWFkUG9zdERlbGF5ID4gMDoKICAgICAgICAgICAgbW9yZVRpcCA9IGYi5bey6K6+572u55qE5o6o6YCB5paH56ug562J5b6F54K55Ye75pe26Ze05Li6IHtyZWFkUG9zdERlbGF5feenkiAiCiAgICAgICAgcHJpbnQoCiAgICAgICAgICAgIGYi5b2T5YmN6ISa5pys54mI5pys77ya5bCP6ZiF6ZiF6ZiF6K+7IFYxLjcyIFxu5bm755Sf5o+Q56S677ya6I635Y+W5YiwIHtudW1fb2ZfYWNjb3VudHN9IOS4qui0puWPtyB7bW9yZVRpcH1cbuazqOWGjOWcsOWdgO+8mntpbnZpdGVVcmx9IgogICAgICAgICkKCiAgICAgICAgIyDpgY3ljobmiYDmnInotKblj7cKICAgICAgICBmb3IgaSwgYWNjb3VudCBpbiBlbnVtZXJhdGUoYWNjb3VudHNfbGlzdCwgc3RhcnQ9MSk6CiAgICAgICAgICAgICMgcHJpbnQoIlxuIikKICAgICAgICAgICAgcHJpbnQoIi0iICogNTApCiAgICAgICAgICAgIHByaW50KGYi6LSm5Y+3W3thY2NvdW50LnNwbGl0KCcjJylbMF19XeW8gOWni+aJp+ihjOS7u+WKoSA+Pj4iKQogICAgICAgICAgICAjIHByaW50KCJcbiIpCiAgICAgICAgICAgICMg5oyJQOespuWPt+WIhuWJsuW9k+WJjei0puWPt+eahOS4jeWQjOWPguaVsAogICAgICAgICAgICB2YWx1ZXMgPSBhY2NvdW50LnNwbGl0KCIjIikKICAgICAgICAgICAgIyBwcmludCh2YWx1ZXMpCiAgICAgICAgICAgIGNnID0ge30KICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgaWYgbGVuKHZhbHVlcykgPT0gMzoKICAgICAgICAgICAgICAgICAgICBjZyA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgIm5hbWUiOiB2YWx1ZXNbMF0sCiAgICAgICAgICAgICAgICAgICAgICAgICJ5c21fdWlkIjogdmFsdWVzWzFdLAogICAgICAgICAgICAgICAgICAgICAgICAidW5pb25JZCI6IHZhbHVlc1syXSwKICAgICAgICAgICAgICAgICAgICAgICAgInR4YnoiOiAzMDAwLAogICAgICAgICAgICAgICAgICAgICAgICAiYWxpQWNjb3VudCI6ICIiLAogICAgICAgICAgICAgICAgICAgICAgICAiYWxpTmFtZSI6ICIiLAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgY2cgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICJuYW1lIjogdmFsdWVzWzBdLAogICAgICAgICAgICAgICAgICAgICAgICAieXNtX3VpZCI6IHZhbHVlc1sxXSwKICAgICAgICAgICAgICAgICAgICAgICAgInVuaW9uSWQiOiB2YWx1ZXNbMl0sCiAgICAgICAgICAgICAgICAgICAgICAgICJ0eGJ6IjogdmFsdWVzWzNdIG9yIDMwMDAsCiAgICAgICAgICAgICAgICAgICAgICAgICJhbGlBY2NvdW50IjogIiIsCiAgICAgICAgICAgICAgICAgICAgICAgICJhbGlOYW1lIjogIiIsCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgICAgICAjIOWkhOeQhuW8guW4uAogICAgICAgICAgICAgICAgcHJpbnQoIuW5u+eUn+mAvOmAvOWPqDoiLCAi6YWN572u55qE5ZWl546p5oSP77yM57y65Y+C5pWw5LqG5oao5om577yM55yL5riF6ISa5pys6K+05piO77yBIikKICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgIGNnWyJhcHBUb2tlbiJdID0gIiIKICAgICAgICAgICAgY2dbInRvcGljSWRzIl0gPSAiIgogICAgICAgICAgICAjIHByaW50KCLmiYvliqjvvJoiLCBsZW4odmFsdWVzKSwgdmFsdWVzWzRdKQogICAgICAgICAgICBpZiBsZW4odmFsdWVzKSA+PSA1OgogICAgICAgICAgICAgICAgaWYgdmFsdWVzWzRdOgogICAgICAgICAgICAgICAgICAgIGNnWyJhcHBUb2tlbiJdID0gdmFsdWVzWzRdCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBjZ1siYXBwVG9rZW4iXSA9IHd4cHVzaGVyQXBwVG9rZW4KICAgICAgICAgICAgaWYgbGVuKHZhbHVlcykgPj0gNjoKICAgICAgICAgICAgICAgIGlmIHZhbHVlc1s1XToKICAgICAgICAgICAgICAgICAgICBjZ1sidG9waWNJZHMiXSA9IHZhbHVlc1s1XQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgY2dbInRvcGljSWRzIl0gPSB3eHB1c2hlclRvcGljSWQKICAgICAgICAgICAgaWYgbGVuKHZhbHVlcykgPj0gNzoKICAgICAgICAgICAgICAgIGlmIHZhbHVlc1s2XToKICAgICAgICAgICAgICAgICAgICBjZ1siYWxpTmFtZSJdID0gdmFsdWVzWzZdCiAgICAgICAgICAgIGlmIGxlbih2YWx1ZXMpID49IDg6CiAgICAgICAgICAgICAgICBpZiB2YWx1ZXNbN106CiAgICAgICAgICAgICAgICAgICAgY2dbImFsaUFjY291bnQiXSA9IHZhbHVlc1s3XQogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBpZiB3ZWNoYXRCdXNzaW5lc3NLZXkgPT0gIiI6CiAgICAgICAgICAgICAgICAgICAgaWYgY2dbImFwcFRva2VuIl0uc3RhcnRzd2l0aCgiQVRfIikgPT0gRmFsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KGYi5bm755Sf5o+Q56S677yM6LSm5Y+3W3thY2NvdW50LnNwbGl0KCcjJylbMF19XSB3eHB1c2gg6YWN572u6ZSZ6K+v77yM5b+r5LuU57uG55yL5aS06YOo6K+05piO77yBIikKICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgICAgICAgICBpZiAoY2dbImFwcFRva2VuIl0uc3RhcnRzd2l0aCgiQVRfIikgPT0gRmFsc2UpIG9yICgKICAgICAgICAgICAgICAgICAgICAgICAgY2dbInRvcGljSWRzIl0uaXNkaWdpdCgpID09IEZhbHNlCiAgICAgICAgICAgICAgICAgICAgKToKICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoZiLlubvnlJ/mj5DnpLrvvIzotKblj7dbe2FjY291bnQuc3BsaXQoJyMnKVswXX1dIHd4cHVzaCDphY3nva7plJnor6/vvIzlv6vku5Tnu4bnnIvlpLTpg6jor7TmmI7vvIEiKQogICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICAgICAgYXBpID0gSEhZRChjZykKICAgICAgICAgICAgICAgIGlmIGNnWyJhbGlOYW1lIl0gYW5kIGNnWyJhbGlBY2NvdW50Il06CiAgICAgICAgICAgICAgICAgICAgcHJpbnQoCiAgICAgICAgICAgICAgICAgICAgICAgIGYi5bm755Sf5o+Q56S677yM6LSm5Y+3W3thY2NvdW50LnNwbGl0KCcjJylbMF19XSDph4fnlKjkuoYg5pSv5LuY5a6d5o+Q546w77yM5aeT5ZCN77yae2NnWydhbGlOYW1lJ11977yM6LSm5oi377yae2NnWydhbGlBY2NvdW50J119IgogICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgcHJpbnQoZiLlubvnlJ/mj5DnpLrvvIzotKblj7dbe2FjY291bnQuc3BsaXQoJyMnKVswXX1dIOmHh+eUqOS6hiDlvq7kv6Hmj5DnjrAiKQogICAgICAgICAgICAgICAgYXBpLnJ1bigpCiAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgICAgIGlmICJFeHBlY3RpbmcgdmFsdWU6IGxpbmUgMSBjb2x1bW4gMSIgaW4gc3RyKGUpOgogICAgICAgICAgICAgICAgICAgIHByaW50KGYi5bm755Sf5o+Q56S677yM6LSm5Y+3W3thY2NvdW50LnNwbGl0KCcjJylbMF19XSDnlpHkvLwgdW5pb25JZOWHuumUme+8jOaNouS4gOS4quWQp++8gSIpCiAgICAgICAgICAgICAgICBlbGlmICJsaW5rJyBpcyBub3QgZGVmaW5lZCIgaW4gc3RyKGUpOgogICAgICAgICAgICAgICAgICAgIHByaW50KAogICAgICAgICAgICAgICAgICAgICAgICBmIuW5u+eUn+aPkOekuu+8jOi0puWPt1t7YWNjb3VudC5zcGxpdCgnIycpWzBdfV0g55aR5Ly8IOaWsOWPt+eahOafkOenjeWOn+WboOWvvOiHtOeahOaXoOazlemYheivu++8jOivt+aJi+WKqOmYheivu+S4pOevh+WGjeivleivleWQp++8gSIKICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIHByaW50KGYi5bm755Sf5o+Q56S677yM6LSm5Y+3W3thY2NvdW50LnNwbGl0KCcjJylbMF19XSDlh7rplJnllabvvIzor7flsIbkuIvpnaLmiqXplJnmiKrlm77lj5HliLB0Z+S6pOa1gee+pDoiKQogICAgICAgICAgICAgICAgcmFpc2UgZQogICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgIyBwcmludCgiXG4iKQogICAgICAgICAgICBwcmludCgiLSIgKiA1MCkKICAgICAgICAgICAgcHJpbnQoZiLotKblj7dbe2FjY291bnQuc3BsaXQoJyMnKVswXX1d5omn6KGM5Lu75Yqh5a6M5q+V77yBIikKICAgICAgICAgICAgIyBwcmludCgiXG4iKQo='))
except Exception as e:
    print('脚本执行出错:', str(e))
