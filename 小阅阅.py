# -*- coding: utf-8 -*-
#!/usr/bin/env python3
"""
* 仅供学习交流，请在下载后的24小时内完全删除 请勿将任何内容用于商业或非法目的，否则后果自负。
* 幻生魔改自用版 V1.61

* 活动入口,微信打开：
* 如果连接过期了运行一下就出来了最新的入口！
* https://u7ds.sy673.shop/yunonline/v1/auth/2639bb95daba1d99e5338a8c2e21e2f0?codeurl=u7ds.sy673.shop&codeuserid=2&time=1709021176
* 打开活动入口，抓包的任意接口cookies中的ysm_uid参数
* 
* 变量格式：
* 新建同名环境变量
* 变量名：xyyyd
* 变量值：
* # 3000 代表 3毛，后面两个推送参数可不填，那就必须配置全局推送！
* 账号备注#ysm_uid参数#unionId#提现金额如3000#wxpushApptoken#wxpushTopicId
* 
* 其他参数说明（脚本最下方填写参数）
* wxpusher全局参数：wxpusherAppToken、wxpusherTopicId
* 具体使用方法请看文档地址：https://wxpusher.zjiecode.com/docs/#/
* 
* 也可使用 微信机器人：wechatBussinessKey
* 
* 支持支付宝提现：账号备注#ysm_uid参数#unionId#提现金额如3000#wxpushApptoken#wxpushTopicId#支付宝姓名#支付宝账号
* 只想提现支付宝，不想填写其他参数，最少的参数就是：账号备注#ysm_uid参数#unionId####支付宝姓名#支付宝账号
*
* 增加 自定义检测文章等待时间：xyyydReadPostDelay，默认值是 15-20秒
* 定时运行每半小时一次
* 达到标准自动提现
* 达到标准，自动提现
"""
# This file requires Python 3.x and the following dependencies:
# - base64
try:
    import base64
    exec(base64.b64decode('IiIiCiog5LuF5L6b5a2m5Lmg5Lqk5rWB77yM6K+35Zyo5LiL6L295ZCO55qEMjTlsI/ml7blhoXlrozlhajliKDpmaQg6K+35Yu/5bCG5Lu75L2V5YaF5a6555So5LqO5ZWG5Lia5oiW6Z2e5rOV55uu55qE77yM5ZCm5YiZ5ZCO5p6c6Ieq6LSf44CCCiog5bm755Sf6a2U5pS56Ieq55So54mIIFYxLjYxCgoqIOa0u+WKqOWFpeWPoyzlvq7kv6HmiZPlvIDvvJoKKiDlpoLmnpzov57mjqXov4fmnJ/kuobov5DooYzkuIDkuIvlsLHlh7rmnaXkuobmnIDmlrDnmoTlhaXlj6PvvIEKKiBodHRwczovL3U3ZHMuc3k2NzMuc2hvcC95dW5vbmxpbmUvdjEvYXV0aC8yNjM5YmI5NWRhYmExZDk5ZTUzMzhhOGMyZTIxZTJmMD9jb2RldXJsPXU3ZHMuc3k2NzMuc2hvcCZjb2RldXNlcmlkPTImdGltZT0xNzA5MDIxMTc2Ciog5omT5byA5rS75Yqo5YWl5Y+j77yM5oqT5YyF55qE5Lu75oSP5o6l5Y+jY29va2llc+S4reeahHlzbV91aWTlj4LmlbAKKiAKKiDlj5jph4/moLzlvI/vvJoKKiDmlrDlu7rlkIzlkI3njq/looPlj5jph48KKiDlj5jph4/lkI3vvJp4eXl5ZAoqIOWPmOmHj+WAvO+8mgoqICMgMzAwMCDku6PooaggM+avm++8jOWQjumdouS4pOS4quaOqOmAgeWPguaVsOWPr+S4jeWhq++8jOmCo+WwseW/hemhu+mFjee9ruWFqOWxgOaOqOmAge+8gQoqIOi0puWPt+Wkh+azqCN5c21fdWlk5Y+C5pWwI3VuaW9uSWQj5o+Q546w6YeR6aKd5aaCMzAwMCN3eHB1c2hBcHB0b2tlbiN3eHB1c2hUb3BpY0lkCiogCiog5YW25LuW5Y+C5pWw6K+05piO77yI6ISa5pys5pyA5LiL5pa55aGr5YaZ5Y+C5pWw77yJCiogd3hwdXNoZXLlhajlsYDlj4LmlbDvvJp3eHB1c2hlckFwcFRva2Vu44CBd3hwdXNoZXJUb3BpY0lkCiog5YW35L2T5L2/55So5pa55rOV6K+355yL5paH5qGj5Zyw5Z2A77yaaHR0cHM6Ly93eHB1c2hlci56amllY29kZS5jb20vZG9jcy8jLwoqIAoqIOS5n+WPr+S9v+eUqCDlvq7kv6HmnLrlmajkurrvvJp3ZWNoYXRCdXNzaW5lc3NLZXkKKiAKKiDmlK/mjIHmlK/ku5jlrp3mj5DnjrDvvJrotKblj7flpIfms6gjeXNtX3VpZOWPguaVsCN1bmlvbklkI+aPkOeOsOmHkemineWmgjMwMDAjd3hwdXNoQXBwdG9rZW4jd3hwdXNoVG9waWNJZCPmlK/ku5jlrp3lp5PlkI0j5pSv5LuY5a6d6LSm5Y+3Ciog5Y+q5oOz5o+Q546w5pSv5LuY5a6d77yM5LiN5oOz5aGr5YaZ5YW25LuW5Y+C5pWw77yM5pyA5bCR55qE5Y+C5pWw5bCx5piv77ya6LSm5Y+35aSH5rOoI3lzbV91aWTlj4LmlbAjdW5pb25JZCMjIyPmlK/ku5jlrp3lp5PlkI0j5pSv5LuY5a6d6LSm5Y+3CioKKiDlop7liqAg6Ieq5a6a5LmJ5qOA5rWL5paH56ug562J5b6F5pe26Ze077yaeHl5eWRSZWFkUG9zdERlbGF577yM6buY6K6k5YC85pivIDE1LTIw56eSCiog5a6a5pe26L+Q6KGM5q+P5Y2K5bCP5pe25LiA5qyhCiog6L6+5Yiw5qCH5YeG6Ieq5Yqo5o+Q546wCiog6L6+5Yiw5qCH5YeG77yM6Ieq5Yqo5o+Q546wCiIiIgoKaW1wb3J0IGhhc2hsaWIKaW1wb3J0IGpzb24KaW1wb3J0IG1hdGgKaW1wb3J0IG9zCmltcG9ydCBzdHJpbmcKaW1wb3J0IHRpbWUKaW1wb3J0IHJlcXVlc3RzCmltcG9ydCByYW5kb20KaW1wb3J0IHJlCmZyb20gdXJsbGliLnBhcnNlIGltcG9ydCBxdW90ZSwgdXJscGFyc2UsIHBhcnNlX3FzCmltcG9ydCB1cmxsaWIzCmZyb20gdXJsbGliLnBhcnNlIGltcG9ydCBwYXJzZV9xcywgdXJsc3BsaXQKCnVybGxpYjMuZGlzYWJsZV93YXJuaW5ncygpCgojIOWhq3d4cHVzaGVy55qEYXBwVG9rZW7vvIzphY3nva7lnKjnjq/looPlj5jph4/ph4zov5nmoLfmsqHphY3nva7nmoTotKblj7fkvJroh6rliqjkvb/nlKjov5nkuKrmjqjpgIEKd3hwdXNoZXJBcHBUb2tlbiA9IG9zLmdldGVudigid3hwdXNoZXJBcHBUb2tlbiIpIG9yICIiCnd4cHVzaGVyVG9waWNJZCA9IG9zLmdldGVudigid3hwdXNoZXJUb3BpY0lkIikgb3IgIiIKd2VjaGF0QnVzc2luZXNzS2V5ID0gb3MuZ2V0ZW52KCJ3ZWNoYXRCdXNzaW5lc3NLZXkiKSBvciAiIgpyZWFkUG9zdERlbGF5ID0gMAppZiBvcy5nZXRlbnYoInh5eXlkUmVhZFBvc3REZWxheSIpIGFuZCBvcy5nZXRlbnYoInh5eXlkUmVhZFBvc3REZWxheSIpLmlzZGVjaW1hbCgpOgogICAgcmVhZFBvc3REZWxheSA9IGludChvcy5nZXRlbnYoInh5eXlkUmVhZFBvc3REZWxheSIpKQoKCmRlZiBzYWZlX3JlcXVlc3QobWV0aG9kLCB1cmwsIHJldHJpZXM9MywgKiprd2FyZ3MpOgogICAgZm9yIGkgaW4gcmFuZ2UocmV0cmllcyk6CiAgICAgICAgdHJ5OgogICAgICAgICAgICBpZiBtZXRob2QudXBwZXIoKSA9PSAiR0VUIjoKICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gcmVxdWVzdHMuZ2V0KHVybCwgKiprd2FyZ3MpCiAgICAgICAgICAgIGVsaWYgbWV0aG9kLnVwcGVyKCkgPT0gIlBPU1QiOgogICAgICAgICAgICAgICAgcmVzcG9uc2UgPSByZXF1ZXN0cy5wb3N0KHVybCwgKiprd2FyZ3MpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBwcmludChmIuS4jeaUr+aMgeeahOivt+axguexu+Weizoge21ldGhvZH0iKQogICAgICAgICAgICAgICAgcmV0dXJuIE5vbmUKICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlCiAgICAgICAgZXhjZXB0IHJlcXVlc3RzLmV4Y2VwdGlvbnMuUmVxdWVzdEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICBwcmludChmIuivt+axguWksei0pToge2V9IikKICAgICAgICAgICAgaWYgaSA8IHJldHJpZXMgLSAxOiAgIyDlpoLmnpzkuI3mmK/mnIDlkI7kuIDmrKHlsJ3or5XvvIzlsLHnrYnlvoXkuIDmrrXml7bpl7Tlho3ph43or5UKICAgICAgICAgICAgICAgIHdhaXQgPSByYW5kb20ucmFuZGludCgxLCA1KSAgIyDpmo/mnLrnrYnlvoXml7bpl7QKICAgICAgICAgICAgICAgIHByaW50KGYi562J5b6FIHt3YWl0fSDnp5LlkI7ph43or5UuLi4iKQogICAgICAgICAgICAgICAgdGltZS5zbGVlcCh3YWl0KQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgcHJpbnQoIuWwneivleivt+axguWksei0pe+8jOW3sui+vuWIsOacgOWkp+WwneivleasoeaVsCIpCiAgICAgICAgICAgICAgICByZXR1cm4gTm9uZSAgIyDmiJbogIXkvaDlj6/ku6Xov5Tlm57kuIDkuKrnibnlrprnmoTlgLzmiJblr7nosaHmnaXooajnpLror7fmsYLlpLHotKUKCgpkZWYgcHVzaChhcHBUb2tlbiwgdG9waWNJZHMsIHRpdGxlLCBsaW5rLCB0ZXh0KToKICAgIGRhdGFwdXN0ID0gewogICAgICAgICJhcHBUb2tlbiI6IGFwcFRva2VuLAogICAgICAgICJjb250ZW50IjogZiIiIjxib2R5IG9ubG9hZD0id2luZG93LmxvY2F0aW9uLmhyZWY9J3tsaW5rfSciPuWHuueOsOajgOa1i+aWh+eroO+8ge+8ge+8gVxuPGEgc3R5bGU9J3BhZGRpbmc6MTBweDtjb2xvcjpyZWQ7Zm9udC1zaXplOjIwcHg7JyBocmVmPSd7bGlua30nPueCueWHu+aIkeaJk+W8gOW+heajgOa1i+aWh+eroDwvYT5cbuivt+WwveW/q+eCueWHu+mTvuaOpeWujOaIkOmYheivu1xu5aSH5rOo77yae3RleHR9PC9ib2R5PiIiIiwKICAgICAgICAic3VtbWFyeSI6IHRpdGxlIG9yICLlsI/pmIXpmIXpmIXor7siLAogICAgICAgICJjb250ZW50VHlwZSI6IDIsCiAgICAgICAgInRvcGljSWRzIjogW3RvcGljSWRzIG9yICIxMTY4NiJdLAogICAgICAgICJ1cmwiOiBsaW5rLAogICAgfQogICAgIyBwcmludChkYXRhcHVzdCkKICAgIHVybHB1c3QgPSAiaHR0cDovL3d4cHVzaGVyLnpqaWVjb2RlLmNvbS9hcGkvc2VuZC9tZXNzYWdlIgogICAgdHJ5OgogICAgICAgIHAgPSBzYWZlX3JlcXVlc3QoIlBPU1QiLCB1cmw9dXJscHVzdCwganNvbj1kYXRhcHVzdCwgdmVyaWZ5PUZhbHNlKQogICAgICAgICMgcHJpbnQocCkKICAgICAgICBpZiBwLmpzb24oKVsiY29kZSJdID09IDEwMDA6CiAgICAgICAgICAgIHByaW50KCLinIUg5o6o6YCB5paH56ug5Yiw5b6u5L+h5oiQ5Yqf77yM6K+35bC95b+r5YmN5b6A54K55Ye75paH56ug77yM5LiN54S25bCx6buR5Y+35ZWm77yBIikKICAgICAgICAgICAgcmV0dXJuIFRydWUKICAgICAgICBlbHNlOgogICAgICAgICAgICBwcmludCgi4p2MIOaOqOmAgeaWh+eroOWIsOW+ruS/oeWksei0pe+8jOWujOeKiuWtkO+8jOimgem7keWPt+S6hu+8gSIpCiAgICAgICAgICAgIHJldHVybiBGYWxzZQogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgIHByaW50KCLinYwg5o6o6YCB5paH56ug5Yiw5b6u5L+h5aSx6LSl77yM5a6M54qK5a2Q77yM6KaB6buR5Y+35LqG77yBIikKICAgICAgICByYWlzZSBlCiAgICAgICAgcmV0dXJuIEZhbHNlCgoKZGVmIHB1c2hXZWNoYXRCdXNzaW5lc3Mocm9ib3RLZXksIGxpbmspOgogICAgZGF0YXB1c3QgPSB7Im1zZ3R5cGUiOiAidGV4dCIsICJ0ZXh0IjogeyJjb250ZW50IjogbGlua319CiAgICAjIHByaW50KGRhdGFwdXN0KQogICAgdXJscHVzdCA9ICJodHRwczovL3F5YXBpLndlaXhpbi5xcS5jb20vY2dpLWJpbi93ZWJob29rL3NlbmQ/a2V5PSIgKyByb2JvdEtleQogICAgdHJ5OgogICAgICAgIHAgPSBzYWZlX3JlcXVlc3QoIlBPU1QiLCB1cmw9dXJscHVzdCwganNvbj1kYXRhcHVzdCwgdmVyaWZ5PUZhbHNlKQogICAgICAgICMgcHJpbnQocCkKICAgICAgICBpZiBwLmpzb24oKVsiZXJyY29kZSJdID09IDA6CiAgICAgICAgICAgIHByaW50KCLinIUg5o6o6YCB5paH56ug5Yiw5LyB5Lia5b6u5L+h5oiQ5Yqf77yBIikKICAgICAgICAgICAgcmV0dXJuIFRydWUKICAgICAgICBlbHNlOgogICAgICAgICAgICBwcmludCgi4p2MIOaOqOmAgeaWh+eroOWIsOS8geS4muW+ruS/oeWksei0pe+8gSIpCiAgICAgICAgICAgIHJldHVybiBGYWxzZQogICAgZXhjZXB0OgogICAgICAgIHByaW50KCLinYwg5o6o6YCB5paH56ug5Yiw5LyB5Lia5b6u5L+h5aSx6LSl77yBIikKICAgICAgICByZXR1cm4gRmFsc2UKCgpkZWYgZ2V0UG9zdFdlY2hhdEluZm8obGluayk6CiAgICB0cnk6CiAgICAgICAgciA9IHNhZmVfcmVxdWVzdCgiR0VUIiwgbGluaywgdmVyaWZ5PUZhbHNlKQogICAgICAgICMgcHJpbnQobGluaywgci50ZXh0KQogICAgICAgIGh0bWwgPSByZS5zdWIoIlxzIiwgIiIsIHIudGV4dCkKICAgICAgICBiaXogPSByZS5maW5kYWxsKCd2YXJiaXo9IiguKj8pIlx8XHwnLCBodG1sKQogICAgICAgIGlmIGJpeiAhPSBbXToKICAgICAgICAgICAgYml6ID0gYml6WzBdCiAgICAgICAgaWYgYml6ID09ICIiIG9yIGJpeiA9PSBbXToKICAgICAgICAgICAgaWYgIl9fYml6IiBpbiBsaW5rOgogICAgICAgICAgICAgICAgYml6ID0gcmUuZmluZGFsbCgiX19iaXo9KC4qPykmIiwgbGluaykKICAgICAgICAgICAgICAgIGlmIGJpeiAhPSBbXToKICAgICAgICAgICAgICAgICAgICBiaXogPSBiaXpbMF0KICAgICAgICBuaWNrbmFtZSA9IHJlLmZpbmRhbGwoJ3Zhcm5pY2tuYW1lPWh0bWxEZWNvZGVcKCIoLio/KSJcKTsnLCBodG1sKQogICAgICAgIGlmIG5pY2tuYW1lICE9IFtdOgogICAgICAgICAgICBuaWNrbmFtZSA9IG5pY2tuYW1lWzBdCiAgICAgICAgdXNlcl9uYW1lID0gcmUuZmluZGFsbCgndmFydXNlcl9uYW1lPSIoLio/KSI7JywgaHRtbCkKICAgICAgICBpZiB1c2VyX25hbWUgIT0gW106CiAgICAgICAgICAgIHVzZXJfbmFtZSA9IHVzZXJfbmFtZVswXQogICAgICAgIG1zZ190aXRsZSA9IHJlLmZpbmRhbGwoInZhcm1zZ190aXRsZT0nKC4qPyknXC5odG1sXCgiLCBodG1sKQogICAgICAgIGlmIG1zZ190aXRsZSAhPSBbXToKICAgICAgICAgICAgbXNnX3RpdGxlID0gbXNnX3RpdGxlWzBdCiAgICAgICAgdGV4dCA9IGYi5YWs5LyX5Y+35ZSv5LiA5qCH6K+G77yae2Jpen185paH56ugOnttc2dfdGl0bGV9fOS9nOiAhTp7bmlja25hbWV9fOi0puWPtzp7dXNlcl9uYW1lfSIKICAgICAgICBwcmludCh0ZXh0KQogICAgICAgIHJldHVybiBuaWNrbmFtZSwgdXNlcl9uYW1lLCBtc2dfdGl0bGUsIHRleHQsIGJpegogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICMgcHJpbnQoZSkKICAgICAgICBwcmludCgi4p2MIOaPkOWPluaWh+eroOS/oeaBr+Wksei0pSIpCiAgICAgICAgcmV0dXJuIEZhbHNlCgoKZGVmIHRzKCk6CiAgICByZXR1cm4gc3RyKGludCh0aW1lLnRpbWUoKSkpICsgIjAwMCIKCgpjaGVja0RpY3QgPSB7CiAgICAiTXpreE5URTNNelE0TVE9PSI6IFsi6aaZ5aeQ54ix5peF6KGMIiwgImdoXzU0YTY1ZGM2MDAzOSJdLAogICAgIk16ZzVNak0wTURFd053PT0iOiBbIuaIkeacrOmdnuWHoSIsICJnaF80NmIwNzY5MDM0NzMiXSwKICAgICJNelV6T0RZNE56RTJPUT09IjogWyLlpJrogonokaHokIQyMDIwIiwgImdoX2IzZDc5Y2QxZTFiNSJdLAogICAgIk16a3lNakUzTXpZeE1nPT0iOiBbIllvdWhmdWwiLCAiZ2hfYjNkNzljZDFlMWI1Il0sCiAgICAiTXpreE5qTXdOREl6T0E9PSI6IFsi5bCR5bm05rKh5pyJ5LmM5omY6YKmMyIsICJnaF9iM2Q3OWNkMWUxYjUiXSwKICAgICJNemczTnpVeE1qYzVNZz09IjogWyLmmJ/mmJ/or7roqIAiLCAiZ2hfYjNkNzljZDFlMWI1Il0sCiAgICAiTXpnNE5UY3dPREUxTkE9PSI6IFsi5paR6ams6L+Y5rKh552hMTIzIiwgImdoX2IzZDc5Y2QxZTFiNSJdLAogICAgIk16azBPREl4T0RFNE9RPT0iOiBbIuaMgeWutuWmmeaLm+WuneWFuCIsICJnaF9iM2Q3OWNkMWUxYjUiXSwKICAgICJNemcyTmpVeU1qSTFOQT09IjogWyJMaWxpbm5nIiwgImdoX2IzZDc5Y2QxZTFiNSJdLAogICAgIk16SXpNRGN6T0RnNE13PT0iOiBbIuacieaVheS6i+eahOWQjOWtplkiLCAiZ2hfYjNkNzljZDFlMWI1Il0sCiAgICAiTXpnNU9EVXlNell6TVE9PSI6IFsiNzg55Lmf5LiN6KGMIiwgImdoX2IzZDc5Y2QxZTFiNSJdLAogICAgIk16VTBOekk1TWpjNE9RPT0iOiBbIuearuibi+eYpuiCieeMqiIsICJnaF81OGQ3ZWU1OTNiODYiXSwKICAgICJNemc1TURneE9EQXpNZz09IjogWyLljJfljJflsI/liqnmiYsiLCAiZ2hfNThkN2VlNTkzYjg2Il0sCiAgICAiTXpJek1EY3pPRGc0TXc9PSI6IFsi5pyJ5pWF5LqL55qE5ZCM5a2mWSIsICJnaF9iOGI5MjkzNGRhNWYiXSwKICAgICJNemt4TkRVMU5ERXpOdz09IjogWyLlsI/pmIXpmIXmnI3liqEiLCAiZ2hfZTUwY2ZlZmVmOWU1Il0sCiAgICAiTXpreE5EWXpPVEV5TXc9PSI6IFsi6JOd6I6T5Y+v5LmQIiwgImdoXzczY2EyMzhhZGQ5NyJdLAp9CgoKY2xhc3MgSEhZRDoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBjZyk6CiAgICAgICAgc2VsZi5iYWxhbmNlID0gMAogICAgICAgIHNlbGYudW5pb25JZCA9IGNnWyJ1bmlvbklkIl0KICAgICAgICBzZWxmLnlzbV91aWQgPSBjZ1sieXNtX3VpZCJdCiAgICAgICAgIyBwcmludCgiY2ciLCBjZywgc2VsZi51bmlvbklkLCBzZWxmLnlzbV91aWQpCiAgICAgICAgc2VsZi50eGJ6ID0gY2dbInR4YnoiXQogICAgICAgIHNlbGYudG9waWNJZHMgPSBjZ1sidG9waWNJZHMiXQogICAgICAgIHNlbGYuYXBwVG9rZW4gPSBjZ1siYXBwVG9rZW4iXQogICAgICAgIGdsb2JhbCB3ZWNoYXRCdXNzaW5lc3NLZXkKICAgICAgICBzZWxmLndlY2hhdEJ1c3NpbmVzc0tleSA9IHdlY2hhdEJ1c3NpbmVzc0tleSBvciAiIgogICAgICAgIHNlbGYuYWxpQWNjb3VudCA9IGNnWyJhbGlBY2NvdW50Il0gb3IgIiIKICAgICAgICBzZWxmLmFsaU5hbWUgPSBjZ1siYWxpTmFtZSJdIG9yICIiCiAgICAgICAgc2VsZi5uYW1lID0gY2dbIm5hbWUiXQogICAgICAgIHNlbGYuZG9tbmFpbkhvc3QgPSAiMTY5ODg1NTEzOS5oeGlvbmcudG9wIgogICAgICAgIHNlbGYuZXhjaGFuZ2VQYXJhbXMgPSAiIgogICAgICAgIHNlbGYuaGVhZGVycyA9IHsKICAgICAgICAgICAgIkNvbm5lY3Rpb24iOiAia2VlcC1hbGl2ZSIsCiAgICAgICAgICAgICJBY2NlcHQiOiAiYXBwbGljYXRpb24vanNvbiwgdGV4dC9qYXZhc2NyaXB0LCAqLyo7IHE9MC4wMSIsCiAgICAgICAgICAgICJVc2VyLUFnZW50IjogIk1vemlsbGEvNS4wIChXaW5kb3dzIE5UIDEwLjA7IFdpbjY0OyB4NjQpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS8xMDcuMC4wLjAgU2FmYXJpLzUzNy4zNiBOZXRUeXBlL1dJRkkgTWljcm9NZXNzZW5nZXIvNy4wLjIwLjE3ODEoMHg2NzAwMTQzQikgV2luZG93c1dlY2hhdCgweDYzMDkwNjIxKSBYV0VCLzgzNTEgRmx1ZSIsCiAgICAgICAgICAgICJYLVJlcXVlc3RlZC1XaXRoIjogIlhNTEh0dHBSZXF1ZXN0IiwKICAgICAgICAgICAgIlJlZmVyZXIiOiBmImh0dHA6Ly97c2VsZi5kb21uYWluSG9zdH0vIiwKICAgICAgICAgICAgIk9yaWdpbiI6IGYiaHR0cDovL3tzZWxmLmRvbW5haW5Ib3N0fSIsCiAgICAgICAgICAgICMgIkhvc3QiOiBmIntzZWxmLmRvbW5haW5Ib3N0fSIsCiAgICAgICAgICAgICJBY2NlcHQtRW5jb2RpbmciOiAiZ3ppcCwgZGVmbGF0ZSIsCiAgICAgICAgICAgICJBY2NlcHQtTGFuZ3VhZ2UiOiAiemgtQ04semgiLAogICAgICAgICAgICAiQ29udGVudC1UeXBlIjogImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZDsgY2hhcnNldD1VVEYtOCIsCiAgICAgICAgICAgICJDb29raWUiOiBmInlzbV91aWQ9e3NlbGYueXNtX3VpZH07IiwKICAgICAgICB9CgogICAgZGVmIHVzZXJfaW5mbyhzZWxmKToKICAgICAgICB1ID0gZiJodHRwOi8ve3NlbGYuZG9tbmFpbkhvc3R9L3l1bm9ubGluZS92MS9zaWduX2luZm8/dGltZT17dHMoKX0mdW5pb25pZD17c2VsZi51bmlvbklkfSIKICAgICAgICByID0gIiIKICAgICAgICB0cnk6CiAgICAgICAgICAgIHIgPSBzYWZlX3JlcXVlc3QoIkdFVCIsIHUpCiAgICAgICAgICAgIHJqID0gci5qc29uKCkKICAgICAgICAgICAgaWYgcmouZ2V0KCJlcnJjb2RlIikgPT0gMDoKICAgICAgICAgICAgICAgIHByaW50KAogICAgICAgICAgICAgICAgICAgIGYi6LSm5Y+3W3tzZWxmLm5hbWV9XeiOt+WPluS/oeaBr+aIkOWKn++8jOW9k+WJjemYheivu+aWh+eroOavj+evh+WlluWKsSB7ci5qc29uKClbJ2RhdGEnXVsnYXdhcmQnXX3kuKrph5HluIEiCiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICByZXR1cm4gVHJ1ZQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgcHJpbnQoZiLotKblj7dbe3NlbGYubmFtZX1d6I635Y+W55So5oi35L+h5oGv5aSx6LSl77yM6LSm5Y+35byC5bi4IOaIluiAhSB5c21fdWlk5peg5pWI77yM6K+35qOA5rWLeXNtX3VpZOaYr+WQpuato+ehriIpCiAgICAgICAgICAgICAgICByZXR1cm4gRmFsc2UKICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgIHByaW50KHIudGV4dCkKICAgICAgICAgICAgcHJpbnQoZiLotKblj7dbe3NlbGYubmFtZX1d6I635Y+W55So5oi35L+h5oGv5aSx6LSlLHlzbV91aWTml6DmlYjvvIzor7fmo4DmtYt5c21fdWlk5piv5ZCm5q2j56GuIikKICAgICAgICAgICAgcmV0dXJuIEZhbHNlCgogICAgZGVmIGhhc1dlY2hhdChzZWxmKToKICAgICAgICByID0gIiIKICAgICAgICB0cnk6CiAgICAgICAgICAgIHUgPSBmImh0dHA6Ly97c2VsZi5kb21uYWluSG9zdH0veXVub25saW5lL3YxL2hhc1dlY2hhdD91bmlvbmlkPXtzZWxmLnVuaW9uSWR9IgogICAgICAgICAgICByID0gc2FmZV9yZXF1ZXN0KCJHRVQiLCB1KQogICAgICAgICAgICBwcmludChmIui0puWPt1t7c2VsZi5uYW1lfV3liKTmlq3lhazkvJflj7fku7vliqHmlbDph4/vvJp7ci5qc29uKClbJ2RhdGEnXVsnaGFzJ119IikKICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgIHByaW50KGYi6LSm5Y+3W3tzZWxmLm5hbWV9XeWIpOaWreaYr+WQpuacieWFrOS8l+WPt+S7u+WKoeWksei0pe+8mntyLnRleHR9IikKICAgICAgICAgICAgcmV0dXJuIEZhbHNlCgogICAgZGVmIGdvbGQoc2VsZik6CiAgICAgICAgciA9ICIiCiAgICAgICAgdHJ5OgogICAgICAgICAgICB1ID0gZiJodHRwOi8ve3NlbGYuZG9tbmFpbkhvc3R9L3l1bm9ubGluZS92MS9nb2xkP3VuaW9uaWQ9e3NlbGYudW5pb25JZH0mdGltZT17dHMoKX0iCiAgICAgICAgICAgIHIgPSBzYWZlX3JlcXVlc3QoIkdFVCIsIHUpCiAgICAgICAgICAgICMgcHJpbnQoci5qc29uKCkpCiAgICAgICAgICAgIHJqID0gci5qc29uKCkKICAgICAgICAgICAgc2VsZi5yZW1haW4gPSBtYXRoLmZsb29yKGludChyai5nZXQoImRhdGEiKS5nZXQoImxhc3RfZ29sZCIpKSkKICAgICAgICAgICAgcHJpbnQoCiAgICAgICAgICAgICAgICBmJ+i0puWPt1t7c2VsZi5uYW1lfV3ku4rml6Xlt7Lnu4/pmIXor7vkuoZ7cmouZ2V0KCJkYXRhIikuZ2V0KCJkYXlfcmVhZCIpfeevh+aWh+eroCzliankvZl7cmouZ2V0KCJkYXRhIikuZ2V0KCJyZW1haW5fcmVhZCIpfeacqumYheivu++8jOS7iuaXpeiOt+WPlumHkeW4gXtyai5nZXQoImRhdGEiKS5nZXQoImRheV9nb2xkIil977yM5Ymp5L2Ze3NlbGYucmVtYWlufScKICAgICAgICAgICAgKQogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgcHJpbnQoZiLotKblj7dbe3NlbGYubmFtZX1d6I635Y+W6YeR5biB5aSx6LSl77yaIiwgZSkKICAgICAgICAgICAgIyByYWlzZSBlCiAgICAgICAgICAgIHJldHVybiBGYWxzZQoKICAgIGRlZiBnZXRLZXkoc2VsZik6CiAgICAgICAgdWsgPSAiIgogICAgICAgIHVrUmVzID0gTm9uZQogICAgICAgIGZvciBpIGluIHJhbmdlKDEwKToKICAgICAgICAgICAgdSA9IGYiaHR0cDovL3tzZWxmLmRvbW5haW5Ib3N0fS95dW5vbmxpbmUvdjEvd3RtcGRvbWFpbiIKICAgICAgICAgICAgIyBwcmludCgi5o+Q56S6IGdldEtlee+8miIsIHUpCiAgICAgICAgICAgIHAgPSBmInVuaW9uaWQ9e3NlbGYudW5pb25JZH0iCiAgICAgICAgICAgIHIgPSBzYWZlX3JlcXVlc3QoIlBPU1QiLCB1LCBoZWFkZXJzPXNlbGYuaGVhZGVycywgZGF0YT1wLCB2ZXJpZnk9RmFsc2UpCiAgICAgICAgICAgICMgcHJpbnQoImdldEtlee+8miIsIHIudGV4dCkKICAgICAgICAgICAgcmogPSByLmpzb24oKQogICAgICAgICAgICBkb21haW4gPSByai5nZXQoImRhdGEiKS5nZXQoImRvbWFpbiIpCiAgICAgICAgICAgICMgcHJpbnQoIuivt+axguS4rei9rOmhte+8miIsIHIudGV4dCkKICAgICAgICAgICAgcHAgPSBwYXJzZV9xcyh1cmxwYXJzZShkb21haW4pLnF1ZXJ5KQogICAgICAgICAgICBobiA9IHVybHBhcnNlKGRvbWFpbikubmV0bG9jCiAgICAgICAgICAgIHVrID0gcHAuZ2V0KCJ1ayIpWzBdCiAgICAgICAgICAgIHVrUmVzID0gci50ZXh0CiAgICAgICAgICAgIGlmIHVrOgogICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICBpZiB1ayA9PSAiIjoKICAgICAgICAgICAgcHJpbnQoZiLotKblj7dbe3NlbGYubmFtZX1d6I635Y+WdWvlpLHotKXvvIzov5Tlm57plJnor6/vvJp7dWtSZXN9IikKICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgdGltZS5zbGVlcCg4KQogICAgICAgIHIgPSBzYWZlX3JlcXVlc3QoCiAgICAgICAgICAgICJHRVQiLAogICAgICAgICAgICBkb21haW4sCiAgICAgICAgICAgIGhlYWRlcnM9ewogICAgICAgICAgICAgICAgIkFjY2VwdCI6ICJ0ZXh0L2h0bWwsYXBwbGljYXRpb24veGh0bWwreG1sLGFwcGxpY2F0aW9uL3htbDtxPTAuOSxpbWFnZS9hdmlmLGltYWdlL3dlYnAsaW1hZ2UvYXBuZywqLyo7cT0wLjgsYXBwbGljYXRpb24vc2lnbmVkLWV4Y2hhbmdlO3Y9YjM7cT0wLjkiLAogICAgICAgICAgICAgICAgIkFjY2VwdC1FbmNvZGluZyI6ICJnemlwLCBkZWZsYXRlLCBiciIsCiAgICAgICAgICAgICAgICAiQWNjZXB0LUxhbmd1YWdlIjogInpoLUNOLHpoO3E9MC45IiwKICAgICAgICAgICAgICAgICJDb25uZWN0aW9uIjogImtlZXAtYWxpdmUiLAogICAgICAgICAgICAgICAgIkhvc3QiOiBmIntobn0iLAogICAgICAgICAgICAgICAgIlNlYy1GZXRjaC1EZXN0IjogImRvY3VtZW50IiwKICAgICAgICAgICAgICAgICJTZWMtRmV0Y2gtTW9kZSI6ICJuYXZpZ2F0ZSIsCiAgICAgICAgICAgICAgICAiU2VjLUZldGNoLVNpdGUiOiAibm9uZSIsCiAgICAgICAgICAgICAgICAiU2VjLUZldGNoLVVzZXIiOiAiPzEiLAogICAgICAgICAgICAgICAgIlVwZ3JhZGUtSW5zZWN1cmUtUmVxdWVzdHMiOiAiMSIsCiAgICAgICAgICAgICAgICAiVXNlci1BZ2VudCI6ICJNb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wOyBXaW42NDsgeDY0KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvMTA3LjAuMC4wIFNhZmFyaS81MzcuMzYgTmV0VHlwZS9XSUZJIE1pY3JvTWVzc2VuZ2VyLzcuMC4yMC4xNzgxKDB4NjcwMDE0M0IpIFdpbmRvd3NXZWNoYXQoMHg2MzA5MDcxZCkgWFdFQi84NDYxIEZsdWUiLAogICAgICAgICAgICB9LAogICAgICAgICAgICB2ZXJpZnk9RmFsc2UsCiAgICAgICAgKQogICAgICAgICMgcHJpbnQoZiLotKblj7dbe3NlbGYubmFtZX1dIOmYheivu+WHhuWkh+WujOaIkO+8mnt1a33vvIzmj5Dlj5bliLDnmoTlnLDlnYDvvJp7ZG9tYWlufSIpCiAgICAgICAgcHJpbnQoZiLotKblj7dbe3NlbGYubmFtZX1dIOmYheivu+WHhuWkh+aIkOWKnyDljbPlsIblvIDlp4vpmIXor7sg4pyFIO+8jOmYheivu+WPguaVsOS4uu+8mnt1a30iKQogICAgICAgIGggPSB7CiAgICAgICAgICAgICJBY2NlcHQiOiAiYXBwbGljYXRpb24vanNvbiwgdGV4dC9qYXZhc2NyaXB0LCAqLyo7IHE9MC4wMSIsCiAgICAgICAgICAgICJBY2NlcHQtRW5jb2RpbmciOiAiZ3ppcCwgZGVmbGF0ZSwgYnIiLAogICAgICAgICAgICAiQWNjZXB0LUxhbmd1YWdlIjogInpoLUNOLHpoO3E9MC45IiwKICAgICAgICAgICAgIkNvbm5lY3Rpb24iOiAia2VlcC1hbGl2ZSIsCiAgICAgICAgICAgICJIb3N0IjogIm5zci56c2YyMDIzZTQ1OC5jbG91ZCIsCiAgICAgICAgICAgICJPcmlnaW4iOiBmImh0dHBzOi8ve2hufSIsCiAgICAgICAgICAgICJTZWMtRmV0Y2gtRGVzdCI6ICJlbXB0eSIsCiAgICAgICAgICAgICJTZWMtRmV0Y2gtTW9kZSI6ICJjb3JzIiwKICAgICAgICAgICAgIlNlYy1GZXRjaC1TaXRlIjogImNyb3NzLXNpdGUiLAogICAgICAgICAgICAiVXNlci1BZ2VudCI6ICJNb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wOyBXaW42NDsgeDY0KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvMTA3LjAuMC4wIFNhZmFyaS81MzcuMzYgTmV0VHlwZS9XSUZJIE1pY3JvTWVzc2VuZ2VyLzcuMC4yMC4xNzgxKDB4NjcwMDE0M0IpIFdpbmRvd3NXZWNoYXQoMHg2MzA5MDcxZCkgWFdFQi84NDYxIEZsdWUiLAogICAgICAgIH0KICAgICAgICByZXR1cm4gdWssIGgKCiAgICBkZWYgcmVhZChzZWxmKToKICAgICAgICBpbmZvID0gc2VsZi5nZXRLZXkoKQogICAgICAgIGlmIGxlbihpbmZvKSA9PSAwOgogICAgICAgICAgICBwcmludChmIui0puWPt1t7c2VsZi5uYW1lfV3ojrflj5bpmIXor7vlj4LmlbDlpLHotKXvvIzlgZzmraLlvoDlkI7pmIXor7vvvIHimqDvuI8gIikKICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgIyBwcmludChpbmZvKQogICAgICAgIHRpbWUuc2xlZXAoMikKICAgICAgICBhcmN0aWxlVGltZSA9IDEKICAgICAgICBsYXN0ZXN0QXJjdGljbGVJZCA9ICIiCiAgICAgICAgd2hpbGUgVHJ1ZToKICAgICAgICAgICAgcmVzID0geyJlcnJjb2RlIjogLTF9CiAgICAgICAgICAgIHJlZnJlc2hUaW1lID0gMAogICAgICAgICAgICB3aGlsZSByZXNbImVycmNvZGUiXSAhPSAwOgogICAgICAgICAgICAgICAgdGltZVN0YW1wID0gc3RyKHRzKCkpCiAgICAgICAgICAgICAgICBwc2duID0gaGFzaGxpYi5tZDUoCiAgICAgICAgICAgICAgICAgICAgKAogICAgICAgICAgICAgICAgICAgICAgICBpbmZvWzFdWyJPcmlnaW4iXS5yZXBsYWNlKCJodHRwczovLyIsICIiKVs6MTFdCiAgICAgICAgICAgICAgICAgICAgICAgICsgaW5mb1swXQogICAgICAgICAgICAgICAgICAgICAgICArIHRpbWVTdGFtcAogICAgICAgICAgICAgICAgICAgICAgICArICJBJkkyNUxJTElZRFMkIgogICAgICAgICAgICAgICAgICAgICkuZW5jb2RlKCkKICAgICAgICAgICAgICAgICkuaGV4ZGlnZXN0KCkKICAgICAgICAgICAgICAgIHNlbGYucGFyYW1zID0gewogICAgICAgICAgICAgICAgICAgICJ1ayI6IGluZm9bMF0sCiAgICAgICAgICAgICAgICAgICAgInRpbWUiOiB0aW1lU3RhbXAsCiAgICAgICAgICAgICAgICAgICAgInBzZ24iOiBwc2duLAogICAgICAgICAgICAgICAgICAgICJ2IjogIjMuMCIsCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB1ID0gZiJodHRwczovL25zci56c2YyMDIzZTQ1OC5jbG91ZC95dW5vbmxpbmUvdjEvZG9fcmVhZCIKICAgICAgICAgICAgICAgIHIgPSBzYWZlX3JlcXVlc3QoCiAgICAgICAgICAgICAgICAgICAgIkdFVCIsCiAgICAgICAgICAgICAgICAgICAgdSwKICAgICAgICAgICAgICAgICAgICBoZWFkZXJzPWluZm9bMV0sCiAgICAgICAgICAgICAgICAgICAgcGFyYW1zPXNlbGYucGFyYW1zLAogICAgICAgICAgICAgICAgICAgIHZlcmlmeT1GYWxzZSwKICAgICAgICAgICAgICAgICAgICB0aW1lb3V0PTYwLAogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgcHJpbnQoIi0iICogNTApCiAgICAgICAgICAgICAgICAjIHByaW50KAogICAgICAgICAgICAgICAgIyAgICAgZiLotKblj7dbe3NlbGYubmFtZX1d56ysW3tyZWZyZXNoVGltZSsxfV3mrKHojrflj5bpmIXor7vmlofnq6Bbe2luZm9bMF19XeebrueahOmhte+8mntyLnRleHR9IgogICAgICAgICAgICAgICAgIyApCiAgICAgICAgICAgICAgICAjIHByaW50KCLpmIXor7vmlofnq6Dlj4LmlbDmn6XnnIvvvJoiLCB1LCBzZWxmLnBhcmFtcywgci50ZXh0LCBpbmZvWzFdKQogICAgICAgICAgICAgICAgaWYgci50ZXh0IGFuZCByLmpzb24oKVsiZXJyY29kZSJdID09IDA6CiAgICAgICAgICAgICAgICAgICAgcmVzID0gci5qc29uKCkKICAgICAgICAgICAgICAgICAgICBwcmludCgKICAgICAgICAgICAgICAgICAgICAgICAgZiLotKblj7dbe3NlbGYubmFtZX1d56ysW3tyZWZyZXNoVGltZSsxfV3mrKHojrflj5bnrKxbe2FyY3RpbGVUaW1lfV3nr4fpmIXor7vmlofnq6Bbe2luZm9bMF19Xei3s+i9rOmTvuaOpeaIkOWKnyIKICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIGRlY29kZWRfc3RyID0ganNvbi5sb2FkcyhyLnRleHQpCiAgICAgICAgICAgICAgICAgICAgaWYgZGVjb2RlZF9zdHJbIm1zZyJdOgogICAgICAgICAgICAgICAgICAgICAgICBwcmludCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGYi6LSm5Y+3W3tzZWxmLm5hbWV9XeesrFt7cmVmcmVzaFRpbWUrMX1d5qyh6I635Y+W56ysW3thcmN0aWxlVGltZX1d56+H6ZiF6K+75paH56ugW3tpbmZvWzBdfV3ot7Povazpk77mjqXlpLHotKXvvJp7ZGVjb2RlZF9zdHJbJ21zZyddfSIKICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gRmFsc2UKICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICBwcmludCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGYi6LSm5Y+3W3tzZWxmLm5hbWV9XeesrFt7cmVmcmVzaFRpbWUrMX1d5qyh6I635Y+W56ysW3thcmN0aWxlVGltZX1d56+H6ZiF6K+75paH56ugW3tpbmZvWzBdfV3ot7Povazpk77mjqXlpLHotKXvvJp7ci50ZXh0fSIKICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgdGltZS5zbGVlcCgxLjUpCiAgICAgICAgICAgICAgICByZWZyZXNoVGltZSA9IHJlZnJlc2hUaW1lICsgMQogICAgICAgICAgICAgICAgaWYgcmVmcmVzaFRpbWUgPj0gNToKICAgICAgICAgICAgICAgICAgICBwcmludChmIuKaoO+4jyDotKblj7dbe3NlbGYubmFtZX1d6I635Y+W6ZiF6K+756ysW3thcmN0aWxlVGltZX1d56+H5paH56ugW3tpbmZvWzBdfV3otoXml7bigKbigKYiKQogICAgICAgICAgICAgICAgICAgIHJldHVybgogICAgICAgICAgICB3ZWNoYXRQb3N0TGluayA9ICIiCiAgICAgICAgICAgIGlmIHJlcy5nZXQoImVycmNvZGUiKSA9PSAwOgogICAgICAgICAgICAgICAgcmV0dXJuTGluayA9ICIiCiAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuTGluayA9IHJlcy5nZXQoImRhdGEiKS5nZXQoImxpbmsiKQogICAgICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICAgICAgICAgIHByaW50KAogICAgICAgICAgICAgICAgICAgICAgICBmIuKaoO+4jyDotKblj7dbe3NlbGYubmFtZX1d6I635Y+W6ZiF6K+756ysW3thcmN0aWxlVGltZX1d56+H5paH56ugW3tpbmZvWzBdfV3pk77mjqXlpLHotKXvvIznlpHkvLzlj7DlrZDmjqXlj6PlpKrlnoPlnL7vvIzltKnkuobvvIzov5Tlm57mlbDmja7kuLrvvJoiLAogICAgICAgICAgICAgICAgICAgICAgICByZXMuZ2V0KCJkYXRhIiksCiAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgICAgICBpZiAibXAud2VpeGluLnFxLmNvbSIgaW4gcmV0dXJuTGluazoKICAgICAgICAgICAgICAgICAgICBwcmludChmIui0puWPt1t7c2VsZi5uYW1lfV0g6ZiF6K+756ysW3thcmN0aWxlVGltZX1d56+H5b6u5L+h5paH56ug77yae3JldHVybkxpbmt9IikKICAgICAgICAgICAgICAgICAgICB3ZWNoYXRQb3N0TGluayA9IHJldHVybkxpbmsKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgIyBwcmludChmIui0puWPt1t7c2VsZi5uYW1lfV0g6ZiF6K+756ysW3thcmN0aWxlVGltZX1d56+H5paH56ug5YeG5aSH6Lez6L2s77yae2xpbmt9IikKICAgICAgICAgICAgICAgICAgICB3ZWNoYXRQb3N0TGluayA9IHNlbGYuanVtcChyZXR1cm5MaW5rKQogICAgICAgICAgICAgICAgICAgIHByaW50KGYi6LSm5Y+3W3tzZWxmLm5hbWV9XSDpmIXor7vnrKxbe2FyY3RpbGVUaW1lfV3nr4fmlofnq6DvvJp7d2VjaGF0UG9zdExpbmt9IikKICAgICAgICAgICAgICAgIHByaW50KGYi6LSm5Y+3W3tzZWxmLm5hbWV9XSDpmIXor7vnrKxbe2FyY3RpbGVUaW1lfV3nr4fmlofnq6DvvJp7d2VjaGF0UG9zdExpbmt9IikKICAgICAgICAgICAgICAgIHNsZWVwVGltZSA9IHJhbmRvbS5yYW5kaW50KDcsIDEwKQogICAgICAgICAgICAgICAgaWYgIm1wLndlaXhpbi5xcS5jb20iIGluIHdlY2hhdFBvc3RMaW5rOgogICAgICAgICAgICAgICAgICAgIHBvc3RXZWNoYXRJbmZvID0gZ2V0UG9zdFdlY2hhdEluZm8od2VjaGF0UG9zdExpbmspCiAgICAgICAgICAgICAgICAgICAgaWYgcG9zdFdlY2hhdEluZm8gPT0gRmFsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZiLimqDvuI8g6LSm5Y+3W3tzZWxmLm5hbWV9XeWboCDojrflj5blhazkvJflj7fmlofnq6Dkv6Hmga/kuI3miJDlip/vvIzlr7zoh7TpmIXor7vnrKxbe2FyY3RpbGVUaW1lfV3nr4fmlofnq6Bbe2luZm9bMF19XSDlpLHotKXigKbigKYiCiAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEZhbHNlCiAgICAgICAgICAgICAgICAgICAgIyDlpoLmnpzmmK/mo4DmtYvnibnlvoHliLDnmoTmlofnq6Ag5oiW6ICFIOWQjuS4gOevh+aWh+eroOS4juWJjeS4gOevh+ebuOS8vAogICAgICAgICAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tEaWN0LmdldChwb3N0V2VjaGF0SW5mb1s0XSkgIT0gTm9uZQogICAgICAgICAgICAgICAgICAgICAgICBvciAocmVzLmdldCgiZGF0YSIpLmdldCgiYSIpID09IDIpCiAgICAgICAgICAgICAgICAgICAgICAgIG9yICgiJmNoa3NtPSIgaW4gd2VjaGF0UG9zdExpbmspCiAgICAgICAgICAgICAgICAgICAgICAgIG9yICgiX19iaXoiIG5vdCBpbiB3ZWNoYXRQb3N0TGluaykKICAgICAgICAgICAgICAgICAgICApOgogICAgICAgICAgICAgICAgICAgICAgICBzbGVlcFRpbWUgPSByZWFkUG9zdERlbGF5IG9yIHJhbmRvbS5yYW5kaW50KDE1LCAyMCkKICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmIuKaoO+4jyDotKblj7dbe3NlbGYubmFtZX1d6ZiF6K+756ysW3thcmN0aWxlVGltZX1d56+H5paH56ugW3tpbmZvWzBdfV0g5qOA5rWL5Yiw55aR5Ly85qOA5rWL5paH56ug77yM5q2j5Zyo5o6o6YCB77yM562J5b6F6L+H5qOA5rWL77yM562J5b6F5pe26Ze077yae3NsZWVwVGltZX3np5LjgILjgILjgIIiCiAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgaWYgc2VsZi53ZWNoYXRCdXNzaW5lc3NLZXk6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwdXNoV2VjaGF0QnVzc2luZXNzKHNlbGYud2VjaGF0QnVzc2luZXNzS2V5LCB3ZWNoYXRQb3N0TGluaykKICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiBzZWxmLmFwcFRva2VuOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHVzaCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmFwcFRva2VuLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYudG9waWNJZHMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIuWwj+mYhemYhemYheivu+i/h+ajgOa1iyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2VjaGF0UG9zdExpbmssCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZiLotKblj7dbe3NlbGYubmFtZX1d6ZiF6K+756ysW3thcmN0aWxlVGltZX1d56+H5paH56ugW3tpbmZvWzBdfV0g5q2j5Zyo562J5b6F6L+H5qOA5rWL77yM562J5b6F5pe26Ze077yae3NsZWVwVGltZX3np5JcbuW5u+eUn+aPkOekuu+8muW/q+eCue+8jOWIq+iAveaQgeaXtumXtOS6hu+8gSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmIuKaoO+4jyDotKblj7dbe3NlbGYubmFtZX1d6ZiF6K+756ysW3thcmN0aWxlVGltZX1d56+H5paH56ugW3tpbmZvWzBdfV0g6ZyA6KaB6L+H5qOA5rWL77yM5L2G5piv5pyq6YWN572u5o6o6YCBdG9rZW7vvIzkuLrkuobpgb/lhY3pu5Hlj7fvvIzlgZzmraLpmIXor7vjgILjgILjgIIiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gRmFsc2UKICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICBwcmludCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGYi4pyFIOi0puWPt1t7c2VsZi5uYW1lfV3pmIXor7vnrKxbe2FyY3RpbGVUaW1lfV3nr4fmlofnq6Bbe2luZm9bMF19XSDpnZ7mo4DmtYvmlofnq6DvvIzmqKHmi5/or7t7c2xlZXBUaW1lfeenkiIKICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBwcmludCgKICAgICAgICAgICAgICAgICAgICAgICAgZiLinIUg6LSm5Y+3W3tzZWxmLm5hbWV9XemYheivu+esrFt7YXJjdGlsZVRpbWV9Xeevh+aWh+eroFt7aW5mb1swXX1dIOmdnuajgOa1i+aWh+eroO+8jOaooeaLn+ivu3tzbGVlcFRpbWV956eSIgogICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoc2xlZXBUaW1lKQogICAgICAgICAgICAgICAgdTEgPSBmImh0dHA6Ly9uc3IuenNmMjAyM2U0NTguY2xvdWQveXVub25saW5lL3YxL2dldF9yZWFkX2dvbGQ/dWs9e2luZm9bMF19JnRpbWU9e3NsZWVwVGltZX0mdGltZXN0YW1wPXt0cygpfSIKICAgICAgICAgICAgICAgIHIxID0gc2FmZV9yZXF1ZXN0KCJHRVQiLCB1MSwgaGVhZGVycz1pbmZvWzFdLCB2ZXJpZnk9RmFsc2UpCiAgICAgICAgICAgICAgICBpZiByMS50ZXh0IGFuZCByMS5qc29uKCk6CiAgICAgICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgICAgICBwcmludCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGYi4pyFIOi0puWPt1t7c2VsZi5uYW1lfV3pmIXor7vnrKxbe2FyY3RpbGVUaW1lfV3nr4fmlofnq6Bbe2luZm9bMF19XeaJgOW+l+mHkeW4ge+8mntyMS5qc29uKClbJ2RhdGEnXVsnZ29sZCddfeS4qu+8jOi0puaIt+W9k+WJjemHkeW4ge+8mntyMS5qc29uKClbJ2RhdGEnXVsnbGFzdF9nb2xkJ1195Liq77yM5LuK5pel5bey6K+777yae3IxLmpzb24oKVsnZGF0YSddWydkYXlfcmVhZCddfeasoe+8jOS7iuaXpeacquivuyB7cjEuanNvbigpWydkYXRhJ11bJ3JlbWFpbl9yZWFkJ11956+H5paH56ugIgogICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICAgICAgICAgICAgICBwcmludCgKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGYi4p2MIOi0puWPt1t7c2VsZi5uYW1lfV3pmIXor7vnrKxbe2FyY3RpbGVUaW1lfV3nr4fmlofnq6Bbe2luZm9bMF19XeW8guW4uO+8mntyMS5qc29uKCkuZ2V0KCdtc2cnKX0iCiAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgaWYgIuacrOasoemYheivu+aXoOaViCIgaW4gcjEuanNvbigpLmdldCgibXNnIik6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgcHJpbnQoCiAgICAgICAgICAgICAgICAgICAgICAgIGYi4p2MIOi0puWPt1t7c2VsZi5uYW1lfV3pmIXor7vnrKxbe2FyY3RpbGVUaW1lfV3nr4fmlofnq6Bbe2luZm9bMF19XeWksei0pe+8mntyMS50ZXh0fSIKICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgZWxpZiByZXMuZ2V0KCJlcnJjb2RlIikgPT0gNDA1OgogICAgICAgICAgICAgICAgcHJpbnQoZiLimqDvuI8g6LSm5Y+3W3tzZWxmLm5hbWV9XemYheivu+esrFt7YXJjdGlsZVRpbWV9Xeevh+aWh+eroFt7aW5mb1swXX1d6ZiF6K+76YeN5aSNIikKICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoMS41KQogICAgICAgICAgICBlbGlmIHJlcy5nZXQoImVycmNvZGUiKSA9PSA0MDc6CiAgICAgICAgICAgICAgICBwcmludChmIuKaoO+4jyDotKblj7dbe3NlbGYubmFtZX1d6ZiF6K+756ysW3thcmN0aWxlVGltZX1d56+H5paH56ugW3tpbmZvWzBdfV3pmIXor7vnu5PmnZ8iKQogICAgICAgICAgICAgICAgcmV0dXJuIFRydWUKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIHByaW50KGYi4pqg77iPIOi0puWPt1t7c2VsZi5uYW1lfV3pmIXor7vnrKxbe2FyY3RpbGVUaW1lfV3nr4fmlofnq6Bbe2luZm9bMF19XeacquefpeaDheWGtSIpCiAgICAgICAgICAgICAgICB0aW1lLnNsZWVwKDEuNSkKICAgICAgICAgICAgYXJjdGlsZVRpbWUgPSBhcmN0aWxlVGltZSArIDEKCiAgICBkZWYganVtcChzZWxmLCBsaW5rKToKICAgICAgICBwcmludChmIui0puWPt1t7c2VsZi5uYW1lfV3lvIDlp4vmnKzmrKHpmIXor7vigKbigKYiKQogICAgICAgIGhuID0gdXJscGFyc2UobGluaykubmV0bG9jCiAgICAgICAgaCA9IHsKICAgICAgICAgICAgIkhvc3QiOiBobiwKICAgICAgICAgICAgIkNvbm5lY3Rpb24iOiAia2VlcC1hbGl2ZSIsCiAgICAgICAgICAgICJVcGdyYWRlLUluc2VjdXJlLVJlcXVlc3RzIjogIjEiLAogICAgICAgICAgICAiVXNlci1BZ2VudCI6ICJNb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wOyBXaW42NDsgeDY0KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvMTA3LjAuMC4wIFNhZmFyaS81MzcuMzYgTmV0VHlwZS9XSUZJIE1pY3JvTWVzc2VuZ2VyLzcuMC4yMC4xNzgxKDB4NjcwMDE0M0IpIFdpbmRvd3NXZWNoYXQoMHg2MzA5MDYyMSkgWFdFQi84MzUxIEZsdWUiLAogICAgICAgICAgICAiQWNjZXB0IjogInRleHQvaHRtbCxhcHBsaWNhdGlvbi94aHRtbCt4bWwsYXBwbGljYXRpb24veG1sO3E9MC45LGltYWdlL2F2aWYsaW1hZ2Uvd2VicCxpbWFnZS9hcG5nLCovKjtxPTAuOCxhcHBsaWNhdGlvbi9zaWduZWQtZXhjaGFuZ2U7dj1iMztxPTAuOSIsCiAgICAgICAgICAgICJBY2NlcHQtRW5jb2RpbmciOiAiZ3ppcCwgZGVmbGF0ZSIsCiAgICAgICAgICAgICJBY2NlcHQtTGFuZ3VhZ2UiOiAiemgtQ04semgiLAogICAgICAgICAgICAiQ29va2llIjogZiJ5c21fdWlkPXtzZWxmLnlzbV91aWR9IiwKICAgICAgICB9CiAgICAgICAgciA9IHNhZmVfcmVxdWVzdCgiR0VUIiwgbGluaywgaGVhZGVycz1oLCBhbGxvd19yZWRpcmVjdHM9RmFsc2UsIHZlcmlmeT1GYWxzZSkKICAgICAgICAjIHByaW50KHIuc3RhdHVzX2NvZGUpCiAgICAgICAgTG9jYXRpb24gPSByLmhlYWRlcnMuZ2V0KCJMb2NhdGlvbiIpCiAgICAgICAgcHJpbnQoZiLotKblj7dbe3NlbGYubmFtZX1d5byA5aeL6ZiF6K+75paH56ugIC0ge0xvY2F0aW9ufSIpCiAgICAgICAgcmV0dXJuIExvY2F0aW9uCgogICAgZGVmIHdpdGhkcmF3UG9zdChzZWxmLCBleGNoYW5nZVBhcmFtcyk6CiAgICAgICAgdSA9IGYiaHR0cDovL3tzZWxmLmRvbW5haW5Ib3N0fS95dW5vbmxpbmUvdjEvd2l0aGRyYXciCiAgICAgICAgcCA9IGYidW5pb25pZD17ZXhjaGFuZ2VQYXJhbXNbJ3VuaW9uaWQnXX0mc2lnbmlkPXtleGNoYW5nZVBhcmFtc1sncmVxdWVzdF9pZCddfSZ1YT0wJnB0eXBlPTAmcGFjY291bnQ9JnBuYW1lPSIKICAgICAgICBpZiBzZWxmLmFsaUFjY291bnQgYW5kIHNlbGYuYWxpTmFtZToKICAgICAgICAgICAgcCA9IGYidW5pb25pZD17ZXhjaGFuZ2VQYXJhbXNbJ3VuaW9uaWQnXX0mc2lnbmlkPXtleGNoYW5nZVBhcmFtc1sncmVxdWVzdF9pZCddfSZ1YT0yJnB0eXBlPTEmcGFjY291bnQ9e3F1b3RlKHNlbGYuYWxpQWNjb3VudCl9JnBuYW1lPXtxdW90ZShzZWxmLmFsaU5hbWUpfSIKICAgICAgICByID0gc2FmZV9yZXF1ZXN0KAogICAgICAgICAgICAiUE9TVCIsCiAgICAgICAgICAgIHUsCiAgICAgICAgICAgIGhlYWRlcnM9ewogICAgICAgICAgICAgICAgIkFjY2VwdCI6ICJhcHBsaWNhdGlvbi9qc29uLCB0ZXh0L2phdmFzY3JpcHQsICovKjsgcT0wLjAxIiwKICAgICAgICAgICAgICAgICJBY2NlcHQtRW5jb2RpbmciOiAiZ3ppcCwgZGVmbGF0ZSIsCiAgICAgICAgICAgICAgICAiQWNjZXB0LUxhbmd1YWdlIjogInpoLUNOLHpoO3E9MC45IiwKICAgICAgICAgICAgICAgICJDb250ZW50LVR5cGUiOiAiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkOyBjaGFyc2V0PVVURi04IiwKICAgICAgICAgICAgICAgICJDb29raWUiOiBmInlzbXVpZD17c2VsZi55c21fdWlkfTsgZWplY3RDb2RlPTEiLAogICAgICAgICAgICAgICAgIkhvc3QiOiBmIntzZWxmLmRvbW5haW5Ib3N0fSIsCiAgICAgICAgICAgICAgICAiT3JpZ2luIjogZiJodHRwOi8ve3NlbGYuZG9tbmFpbkhvc3R9IiwKICAgICAgICAgICAgICAgICJQcm94eS1Db25uZWN0aW9uIjogImtlZXAtYWxpdmUiLAogICAgICAgICAgICAgICAgIlJlZmVyZXIiOiBmImh0dHA6Ly97c2VsZi5kb21uYWluSG9zdH0veXVub25saW5lL3YxL2V4Y2hhbmdlP3VuaW9uaWQ9e2V4Y2hhbmdlUGFyYW1zWyd1bmlvbmlkJ119JnJlcXVlc3RfaWQ9e2V4Y2hhbmdlUGFyYW1zWydyZXF1ZXN0X2lkJ119JnFyY29kZV9udW1iZXI9MTY2MDc4NjQzNTgxNDU1ODgiLAogICAgICAgICAgICAgICAgIlgtUmVxdWVzdGVkLVdpdGgiOiAiWE1MSHR0cFJlcXVlc3QiLAogICAgICAgICAgICB9LAogICAgICAgICAgICBkYXRhPXAsCiAgICAgICAgICAgIHZlcmlmeT1GYWxzZSwKICAgICAgICApCiAgICAgICAgcHJpbnQoZiLinIUg6LSm5Y+3W3tzZWxmLm5hbWV9XSDmj5DnjrDnu5PmnpzvvJoiLCByLmpzb24oKVsibXNnIl0pCgogICAgZGVmIHdpdGhkcmF3KHNlbGYpOgogICAgICAgIGdvbGQgPSBpbnQoaW50KHNlbGYucmVtYWluKSAvIDEwMDApICogMTAwMAogICAgICAgIHByaW50KGYi6LSm5Y+3W3tzZWxmLm5hbWV9XSDmnKzmrKHmj5DnjrDph5Hpop0gIiwgc2VsZi5iYWxhbmNlLCAi5YWDICsgIiwgZ29sZCwgIumHkeW4gSIpCiAgICAgICAgcXVlcnkgPSB1cmxzcGxpdChzZWxmLmV4Y2hhbmdlUGFyYW1zKS5xdWVyeQogICAgICAgIGV4Y2hhbmdlUGFyYW1zID0gcGFyc2VfcXMocXVlcnkpCiAgICAgICAgIyDlsIbliJfooajlgLzovazmjaLkuLrlrZfnrKbkuLIKICAgICAgICBmb3Iga2V5LCB2YWx1ZSBpbiBleGNoYW5nZVBhcmFtcy5pdGVtcygpOgogICAgICAgICAgICBleGNoYW5nZVBhcmFtc1trZXldID0gdmFsdWVbMF0KICAgICAgICB3aXRoZHJhd0JhbGFuY2UgPSByb3VuZCgoaW50KHNlbGYudHhieikgLyAxMDAwKSwgMykKICAgICAgICBpZiBnb2xkIG9yIChzZWxmLmJhbGFuY2UgPj0gd2l0aGRyYXdCYWxhbmNlKToKICAgICAgICAgICAgaWYgZ29sZDoKICAgICAgICAgICAgICAgICMg5byA5aeL5o+Q546wCiAgICAgICAgICAgICAgICB1MSA9IGYiaHR0cDovL3tzZWxmLmRvbW5haW5Ib3N0fS95dW5vbmxpbmUvdjEvdXNlcl9nb2xkIgogICAgICAgICAgICAgICAgcDEgPSBmInVuaW9uaWQ9e2V4Y2hhbmdlUGFyYW1zWyd1bmlvbmlkJ119JnJlcXVlc3RfaWQ9e2V4Y2hhbmdlUGFyYW1zWydyZXF1ZXN0X2lkJ119JmdvbGQ9e2dvbGR9IgogICAgICAgICAgICAgICAgciA9IHNhZmVfcmVxdWVzdCgKICAgICAgICAgICAgICAgICAgICAiUE9TVCIsCiAgICAgICAgICAgICAgICAgICAgdTEsCiAgICAgICAgICAgICAgICAgICAgZGF0YT1wMSwKICAgICAgICAgICAgICAgICAgICBoZWFkZXJzPXsKICAgICAgICAgICAgICAgICAgICAgICAgIkFjY2VwdCI6ICJhcHBsaWNhdGlvbi9qc29uLCB0ZXh0L2phdmFzY3JpcHQsICovKjsgcT0wLjAxIiwKICAgICAgICAgICAgICAgICAgICAgICAgIkFjY2VwdC1FbmNvZGluZyI6ICJnemlwLCBkZWZsYXRlIiwKICAgICAgICAgICAgICAgICAgICAgICAgIkFjY2VwdC1MYW5ndWFnZSI6ICJ6aC1DTix6aDtxPTAuOSIsCiAgICAgICAgICAgICAgICAgICAgICAgICJDb250ZW50LVR5cGUiOiAiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkOyBjaGFyc2V0PVVURi04IiwKICAgICAgICAgICAgICAgICAgICAgICAgIkNvb2tpZSI6IGYieXNtdWlkPXtzZWxmLnlzbV91aWR9OyBlamVjdENvZGU9MSIsCiAgICAgICAgICAgICAgICAgICAgICAgICJIb3N0IjogZiJ7c2VsZi5kb21uYWluSG9zdH0iLAogICAgICAgICAgICAgICAgICAgICAgICAiT3JpZ2luIjogZiJodHRwOi8ve3NlbGYuZG9tbmFpbkhvc3R9IiwKICAgICAgICAgICAgICAgICAgICAgICAgIlByb3h5LUNvbm5lY3Rpb24iOiAia2VlcC1hbGl2ZSIsCiAgICAgICAgICAgICAgICAgICAgICAgICJSZWZlcmVyIjogZiJodHRwOi8ve3NlbGYuZG9tbmFpbkhvc3R9L3l1bm9ubGluZS92MS9leGNoYW5nZXtzZWxmLmV4Y2hhbmdlUGFyYW1zfSIsCiAgICAgICAgICAgICAgICAgICAgICAgICJVc2VyLUFnZW50IjogIk1vemlsbGEvNS4wIChXaW5kb3dzIE5UIDEwLjA7IFdpbjY0OyB4NjQpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS8xMDcuMC4wLjAgU2FmYXJpLzUzNy4zNiBOZXRUeXBlL1dJRkkgTWljcm9NZXNzZW5nZXIvNy4wLjIwLjE3ODEoMHg2NzAwMTQzQikgV2luZG93c1dlY2hhdCgweDYzMDkwNzFkKSBYV0VCLzg0NjEgRmx1ZSIsCiAgICAgICAgICAgICAgICAgICAgICAgICJYLVJlcXVlc3RlZC1XaXRoIjogIlhNTEh0dHBSZXF1ZXN0IiwKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHZlcmlmeT1GYWxzZSwKICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICByZXMgPSByLmpzb24oKQogICAgICAgICAgICAgICAgICAgIGlmIHJlcy5nZXQoImVycmNvZGUiKSA9PSAwOgogICAgICAgICAgICAgICAgICAgICAgICB3aXRoZHJhd0JhbGFuY2VOdW0gPSBzZWxmLmJhbGFuY2UgKyBmbG9hdChyZXNbImRhdGEiXVsibW9uZXkiXSkKICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmIuKchSDotKblj7dbe3NlbGYubmFtZX1dIOmHkeW4geWFkeaNouS4uueOsOmHkeaIkOWKn++8jOW8gOWni+aPkOeOsO+8jOmihOiuoeWIsOi0piB7d2l0aGRyYXdCYWxhbmNlTnVtfSDlhYMgPj4+ICIKICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICAgICBpZiB3aXRoZHJhd0JhbGFuY2VOdW0gPCB3aXRoZHJhd0JhbGFuY2U6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludChmIui0puWPt1t7c2VsZi5uYW1lfV3msqHmnInovr7liLDmj5DnjrDmoIflh4Yge3dpdGhkcmF3QmFsYW5jZX0g5YWDIikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBGYWxzZQogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLndpdGhkcmF3UG9zdChleGNoYW5nZVBhcmFtcykKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmIui0puWPt1t7c2VsZi5uYW1lfV0g6YeR5biB5YWR5o2i5Li6546w6YeR5aSx6LSl77yaIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIudGV4dCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICIg5o+Q546w5Zyw5Z2A77yaIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHUxLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIiDmj5DnjrDlj4LmlbDvvJoiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcDEsCiAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgICAgICAgICAjIHJhaXNlIGUKICAgICAgICAgICAgICAgICAgICAjIOWkhOeQhuW8guW4uAogICAgICAgICAgICAgICAgICAgIHByaW50KGYi6LSm5Y+3W3tzZWxmLm5hbWV9XSDmj5DnjrDlpLHotKXvvJoiLCBlKQogICAgICAgICAgICBzZWxmLndpdGhkcmF3UG9zdChleGNoYW5nZVBhcmFtcykKCiAgICBkZWYgaW5pdChzZWxmKToKICAgICAgICB0cnk6CiAgICAgICAgICAgIGNoYXJhY3RlcnMgPSBzdHJpbmcuYXNjaWlfbGV0dGVycyArIHN0cmluZy5kaWdpdHMKICAgICAgICAgICAgciA9IHNhZmVfcmVxdWVzdCgKICAgICAgICAgICAgICAgICJHRVQiLAogICAgICAgICAgICAgICAgZiJodHRwczovL25zci56c2YyMDIzZTQ1OC5jbG91ZC95dW5vbmxpbmUvdjEvZ2V0Y2hhdHNpdGU/dD17dGltZS50aW1lKCl9JmNpZD17Jycuam9pbihyYW5kb20uY2hvaWNlcyhjaGFyYWN0ZXJzLCBrPTMyKSl9JmNvZGU9MDgxa3RSRmExVE02MEgwZ3I0R2ExVXsnJy5qb2luKHJhbmRvbS5jaG9pY2VzKGNoYXJhY3RlcnMsIGs9MTApKX0mc3RhdGU9MSIsCiAgICAgICAgICAgICAgICB2ZXJpZnk9RmFsc2UsCiAgICAgICAgICAgICkKICAgICAgICAgICAgc2VsZi5kb21uYWluSG9zdCA9IHIuanNvbigpWyJkYXRhIl1bImx1b2RpIl0uc3BsaXQoIi8iKVsyXQogICAgICAgICAgICAjIHByaW50KHIudGV4dCkKICAgICAgICAgICAgcHJpbnQoZiLotKblj7dbe3NlbGYubmFtZX1d5o+Q5Y+W5Yiw55qE5Z+f5ZCN77yae3NlbGYuZG9tbmFpbkhvc3R9IikKICAgICAgICAgICAgc2VsZi5oZWFkZXJzID0gewogICAgICAgICAgICAgICAgIkNvbm5lY3Rpb24iOiAia2VlcC1hbGl2ZSIsCiAgICAgICAgICAgICAgICAiQWNjZXB0IjogImFwcGxpY2F0aW9uL2pzb24sIHRleHQvamF2YXNjcmlwdCwgKi8qOyBxPTAuMDEiLAogICAgICAgICAgICAgICAgIlVzZXItQWdlbnQiOiAiTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzEwNy4wLjAuMCBTYWZhcmkvNTM3LjM2IE5ldFR5cGUvV0lGSSBNaWNyb01lc3Nlbmdlci83LjAuMjAuMTc4MSgweDY3MDAxNDNCKSBXaW5kb3dzV2VjaGF0KDB4NjMwOTA2MjEpIFhXRUIvODM1MSBGbHVlIiwKICAgICAgICAgICAgICAgICJYLVJlcXVlc3RlZC1XaXRoIjogIlhNTEh0dHBSZXF1ZXN0IiwKICAgICAgICAgICAgICAgICJSZWZlcmVyIjogZiJodHRwOi8ve3NlbGYuZG9tbmFpbkhvc3R9LyIsCiAgICAgICAgICAgICAgICAiT3JpZ2luIjogZiJodHRwOi8ve3NlbGYuZG9tbmFpbkhvc3R9IiwKICAgICAgICAgICAgICAgICMgIkhvc3QiOiBmIntzZWxmLmRvbW5haW5Ib3N0fSIsCiAgICAgICAgICAgICAgICAiQWNjZXB0LUVuY29kaW5nIjogImd6aXAsIGRlZmxhdGUiLAogICAgICAgICAgICAgICAgIkFjY2VwdC1MYW5ndWFnZSI6ICJ6aC1DTix6aCIsCiAgICAgICAgICAgICAgICAiQ29udGVudC1UeXBlIjogImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZDsgY2hhcnNldD1VVEYtOCIsCiAgICAgICAgICAgICAgICAiQ29va2llIjogZiJ5c21fdWlkPXtzZWxmLnlzbV91aWR9OyIsCiAgICAgICAgICAgIH0KICAgICAgICAgICAgIyDojrflj5ZyZXF1ZXN0SWQKICAgICAgICAgICAgc2VsZi5zaWduaWQgPSAiIgogICAgICAgICAgICBmb3IgaSBpbiByYW5nZSgzKToKICAgICAgICAgICAgICAgIHIgPSBzYWZlX3JlcXVlc3QoCiAgICAgICAgICAgICAgICAgICAgIkdFVCIsCiAgICAgICAgICAgICAgICAgICAgZiJodHRwOi8ve3NlbGYuZG9tbmFpbkhvc3R9LyIsCiAgICAgICAgICAgICAgICAgICAgaGVhZGVycz17CiAgICAgICAgICAgICAgICAgICAgICAgICJVcGdyYWRlLUluc2VjdXJlLVJlcXVlc3RzIjogIjEiLAogICAgICAgICAgICAgICAgICAgICAgICAiVXNlci1BZ2VudCI6ICJNb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wOyBXaW42NDsgeDY0KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvMTA3LjAuMC4wIFNhZmFyaS81MzcuMzYgTmV0VHlwZS9XSUZJIE1pY3JvTWVzc2VuZ2VyLzcuMC4yMC4xNzgxKDB4NjcwMDE0M0IpIFdpbmRvd3NXZWNoYXQoMHg2MzA5MDcxZCkgWFdFQi84NDYxIEZsdWUiLAogICAgICAgICAgICAgICAgICAgICAgICAiQWNjZXB0IjogInRleHQvaHRtbCxhcHBsaWNhdGlvbi94aHRtbCt4bWwsYXBwbGljYXRpb24veG1sO3E9MC45LGltYWdlL2F2aWYsaW1hZ2Uvd2VicCxpbWFnZS9hcG5nLCovKjtxPTAuOCxhcHBsaWNhdGlvbi9zaWduZWQtZXhjaGFuZ2U7dj1iMztxPTAuOSIsCiAgICAgICAgICAgICAgICAgICAgICAgICJBY2NlcHQtRW5jb2RpbmciOiAiZ3ppcCwgZGVmbGF0ZSIsCiAgICAgICAgICAgICAgICAgICAgICAgICJBY2NlcHQtTGFuZ3VhZ2UiOiAiemgtQ04semg7cT0wLjkiLAogICAgICAgICAgICAgICAgICAgICAgICAiQ29va2llIjogZiJ5c211aWQ9e3NlbGYueXNtX3VpZH0iLAogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgdmVyaWZ5PUZhbHNlLAogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgaHRtbHRleHQgPSByLnRleHQKICAgICAgICAgICAgICAgIGlmIHIuaGlzdG9yeToKICAgICAgICAgICAgICAgICAgICBmb3IgcmVzcCBpbiByLmhpc3Rvcnk6CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICJvcGVuLndlaXhpbi5xcS5jb20iIGluIHJlc3AuaGVhZGVyc1siTG9jYXRpb24iXToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGYi6LSm5Y+3W3tzZWxmLm5hbWV9XSBDb29raWXlt7Lov4fmnJ/vvIzor7fph43ov5vkuIDkuIvnvZHnq5nvvIzlsLHkvJroh6rliqjmm7TmlrBDb29raWXvvIjnm67liY3kuI3noa7lrprov4fmnJ/mmK/lm6DkuLroh6rlt7HmiYvliqjov5vljrvov4fkuobov5jmmK/ku4DkuYjlhbbku5bljp/lm6DvvIkiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gRmFsc2UKICAgICAgICAgICAgICAgIHJlczEgPSByZS5zdWIoIlxzIiwgIiIsIGh0bWx0ZXh0KQogICAgICAgICAgICAgICAgc2lnbmlkbCA9IHJlLmZpbmRhbGwoJ1wpXHxcfCIoLio/KSI7JywgcmVzMSkKICAgICAgICAgICAgICAgICMgcHJpbnQoc2lnbmlkbCwgaHRtbHRleHQpCiAgICAgICAgICAgICAgICBpZiBzaWduaWRsID09IFtdOgogICAgICAgICAgICAgICAgICAgIHRpbWUuc2xlZXAoMSkKICAgICAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBzZWxmLnNpZ25pZCA9IHNpZ25pZGxbMF0KICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICBpZiBzZWxmLnNpZ25pZCA9PSAiIjoKICAgICAgICAgICAgICAgIHByaW50KGYi6LSm5Y+3W3tzZWxmLm5hbWV9XeWIneWni+WMliByZXF1ZXN0SWQg5aSx6LSlLOi0puWPt+W8guW4uCIpCiAgICAgICAgICAgICAgICByZXR1cm4gRmFsc2UKICAgICAgICAgICAgIyDojrflj5bmj5DnjrDpobXpnaLlnLDlnYAKICAgICAgICAgICAgciA9IHNhZmVfcmVxdWVzdCgKICAgICAgICAgICAgICAgICJHRVQiLAogICAgICAgICAgICAgICAgZiJodHRwOi8ve3NlbGYuZG9tbmFpbkhvc3R9Lz9jYXRlPTAiLAogICAgICAgICAgICAgICAgaGVhZGVycz17CiAgICAgICAgICAgICAgICAgICAgIlVwZ3JhZGUtSW5zZWN1cmUtUmVxdWVzdHMiOiAiMSIsCiAgICAgICAgICAgICAgICAgICAgIlVzZXItQWdlbnQiOiAiTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzEwNy4wLjAuMCBTYWZhcmkvNTM3LjM2IE5ldFR5cGUvV0lGSSBNaWNyb01lc3Nlbmdlci83LjAuMjAuMTc4MSgweDY3MDAxNDNCKSBXaW5kb3dzV2VjaGF0KDB4NjMwOTA3MWQpIFhXRUIvODQ2MSBGbHVlIiwKICAgICAgICAgICAgICAgICAgICAiQWNjZXB0IjogInRleHQvaHRtbCxhcHBsaWNhdGlvbi94aHRtbCt4bWwsYXBwbGljYXRpb24veG1sO3E9MC45LGltYWdlL2F2aWYsaW1hZ2Uvd2VicCxpbWFnZS9hcG5nLCovKjtxPTAuOCxhcHBsaWNhdGlvbi9zaWduZWQtZXhjaGFuZ2U7dj1iMztxPTAuOSIsCiAgICAgICAgICAgICAgICAgICAgIkFjY2VwdC1FbmNvZGluZyI6ICJnemlwLCBkZWZsYXRlIiwKICAgICAgICAgICAgICAgICAgICAiQWNjZXB0LUxhbmd1YWdlIjogInpoLUNOLHpoO3E9MC45IiwKICAgICAgICAgICAgICAgICAgICAiQ29va2llIjogZiJ5c211aWQ9e3NlbGYueXNtX3VpZH0iLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHZlcmlmeT1GYWxzZSwKICAgICAgICAgICAgKQogICAgICAgICAgICBodG1sdGV4dCA9IHIudGV4dAogICAgICAgICAgICByZXMxID0gcmUuc3ViKCJccyIsICIiLCBodG1sdGV4dCkKICAgICAgICAgICAgc2lnbmlkbCA9IHJlLmZpbmRhbGwoJy95dW5vbmxpbmUvdjEvZXhjaGFuZ2UoLio/KSInLCByZXMxKQogICAgICAgICAgICAjIHByaW50KCLliJ3lp4vljJYg5o+Q546w5Y+C5pWwOiIsIHNpZ25pZGxbMF0pCiAgICAgICAgICAgIGlmIHNpZ25pZGwgPT0gW106CiAgICAgICAgICAgICAgICBwcmludChmIui0puWPt1t7c2VsZi5uYW1lfV3liJ3lp4vljJYg5o+Q546w5Y+C5pWwIOWksei0pSzotKblj7flvILluLgiKQogICAgICAgICAgICAgICAgcmV0dXJuIEZhbHNlCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBzZWxmLmV4Y2hhbmdlUGFyYW1zID0gc2lnbmlkbFswXQogICAgICAgICAgICByZXdhcmROdW1SZXN1bHQgPSByZS5zZWFyY2goCiAgICAgICAgICAgICAgICAnZGl2IGNsYXNzPSJudW0gbnVtYmVyIHJld2FyZE51bSI+KC4qPyk8LycsIGh0bWx0ZXh0CiAgICAgICAgICAgICkKICAgICAgICAgICAgIyBwcmludCgi5Yid5aeL5YyWIOaPkOeOsOWPguaVsDoiLCBzaWduaWRsWzBdKQogICAgICAgICAgICBpZiByZXdhcmROdW1SZXN1bHQgPT0gW106CiAgICAgICAgICAgICAgICBwcmludChmIui0puWPt1t7c2VsZi5uYW1lfV3liJ3lp4vljJYg5o+Q546w5Y+C5pWwIOWksei0pSzotKblj7flvILluLgiKQogICAgICAgICAgICAgICAgcmV0dXJuIEZhbHNlCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBzZWxmLmJhbGFuY2UgPSBmbG9hdChyZXdhcmROdW1SZXN1bHRbMV0pCiAgICAgICAgICAgIHJldHVybiBUcnVlCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICAjIHJhaXNlIGUKICAgICAgICAgICAgcHJpbnQoZiLotKblj7dbe3NlbGYubmFtZX1d5Yid5aeL5YyW5aSx6LSlLOivt+ajgOafpeS9oOeahGNrIikKICAgICAgICAgICAgcmV0dXJuIEZhbHNlCgogICAgZGVmIHJ1bihzZWxmKToKICAgICAgICBpZiBzZWxmLmluaXQoKToKICAgICAgICAgICAgc2VsZi51c2VyX2luZm8oKQogICAgICAgICAgICBzZWxmLmhhc1dlY2hhdCgpCiAgICAgICAgICAgIHNlbGYuZ29sZCgpCiAgICAgICAgICAgIHNlbGYucmVhZCgpCiAgICAgICAgICAgIHRpbWUuc2xlZXAoMykKICAgICAgICAgICAgc2VsZi5nb2xkKCkKICAgICAgICAgICAgdGltZS5zbGVlcCgzKQogICAgICAgICAgICBzZWxmLndpdGhkcmF3KCkKCgpkZWYgZ2V0TmV3SW52aXRlVXJsKCk6CiAgICByID0gc2FmZV9yZXF1ZXN0KAogICAgICAgICJHRVQiLCAiaHR0cHM6Ly93d3cuZmlsZXNtZWouY24vd2FpZG9tYWluLnBocCIsIHZlcmlmeT1GYWxzZQogICAgKS5qc29uKCkKICAgIGlmIHIuZ2V0KCJjb2RlIikgPT0gMDoKICAgICAgICBuZXdFbnRyeVVybCA9IHIuZ2V0KCJkYXRhIikuZ2V0KCJsdW9kaSIpCiAgICAgICAgcGFyc2VkX3VybCA9IHVybHBhcnNlKG5ld0VudHJ5VXJsKQogICAgICAgIGhvc3QgPSBwYXJzZWRfdXJsLmhvc3RuYW1lCiAgICAgICAgcmV0dXJuIGYiaHR0cHM6Ly91N2RzLnN5NjczLnNob3AveXVub25saW5lL3YxL2F1dGgvMjYzOWJiOTVkYWJhMWQ5OWU1MzM4YThjMmUyMWUyZjA/Y29kZXVybD11N2RzLnN5NjczLnNob3AmY29kZXVzZXJpZD0yJnRpbWU9MTcwOTAyMTE3NiIucmVwbGFjZSgKICAgICAgICAgICAgInU3ZHMuc3k2NzMuc2hvcCIsIGhvc3Qgb3IgInU3ZHMuc3k2NzMuc2hvcCIKICAgICAgICApCiAgICBlbHNlOgogICAgICAgIHJldHVybiAiaHR0cHM6Ly91N2RzLnN5NjczLnNob3AveXVub25saW5lL3YxL2F1dGgvMjYzOWJiOTVkYWJhMWQ5OWU1MzM4YThjMmUyMWUyZjA/Y29kZXVybD11N2RzLnN5NjczLnNob3AmY29kZXVzZXJpZD0yJnRpbWU9MTcwOTAyMTE3NiIKCgppZiBfX25hbWVfXyA9PSAiX19tYWluX18iOgogICAgIyBhcHBUb2tlbu+8mui/meS4quaYr+Whq3d4cHVzaGVy55qEYXBwVG9rZW4KICAgICMgdG9waWNJZHPvvJrov5nkuKrmmK93eHB1c2hlcueahHRvcGljSWRz5pS55oiQ5L2g6Ieq5bex55qECiAgICAjIOekuuS+izog5bm755SfI29aZEJwMDRwc2dvTjhkTjFFVF91bzgxTlRDMzEjMzAwMCNBVF9VeUlsYmoyMjIybnluRVNiTTJ2SnlBN0RybVVtVVhEIzExNjg2CiAgICBhY2NvdW50cyA9IG9zLmdldGVudigieHl5eWQiKQogICAgaW52aXRlVXJsID0gZ2V0TmV3SW52aXRlVXJsKCkKICAgIGlmIGFjY291bnRzIGlzIE5vbmU6CiAgICAgICAgcHJpbnQoZiLkvaDmsqHmnInloavlhaV4eXl5ZO+8jOWSi+i/kOihjO+8n1xu6LWw5LiL6YKA6K+35ZGX77yae2ludml0ZVVybH0iKQogICAgZWxzZToKICAgICAgICAjIOiOt+WPlueOr+Wig+WPmOmHj+eahOWAvO+8jOW5tuaMieaMh+WumuWtl+espuS4suWIhuWJsuaIkOWkmuS4qui0puWPt+eahOWPguaVsOe7hOWQiAogICAgICAgIGFjY291bnRzX2xpc3QgPSBvcy5lbnZpcm9uLmdldCgieHl5eWQiKS5zcGxpdCgiJiIpCgogICAgICAgICMg6L6T5Ye65pyJ5Yeg5Liq6LSm5Y+3CiAgICAgICAgbnVtX29mX2FjY291bnRzID0gbGVuKGFjY291bnRzX2xpc3QpCiAgICAgICAgbW9yZVRpcCA9ICIiCiAgICAgICAgaWYgcmVhZFBvc3REZWxheSA+IDA6CiAgICAgICAgICAgIG1vcmVUaXAgPSBmIuW3suiuvue9rueahOaOqOmAgeaWh+eroOetieW+heeCueWHu+aXtumXtOS4uiB7cmVhZFBvc3REZWxheX3np5IgIgogICAgICAgIHByaW50KAogICAgICAgICAgICBmIuW9k+WJjeiEmuacrOeJiOacrO+8muW5u+eUn+mtlOaUueiHqueUqOeJiCBWMS42MSBcbuW5u+eUn+aPkOekuu+8muiOt+WPluWIsCB7bnVtX29mX2FjY291bnRzfSDkuKrotKblj7cge21vcmVUaXB9XG7ms6jlhozlnLDlnYDvvJp7aW52aXRlVXJsfSIKICAgICAgICApCgogICAgICAgICMg6YGN5Y6G5omA5pyJ6LSm5Y+3CiAgICAgICAgZm9yIGksIGFjY291bnQgaW4gZW51bWVyYXRlKGFjY291bnRzX2xpc3QsIHN0YXJ0PTEpOgogICAgICAgICAgICAjIHByaW50KCJcbiIpCiAgICAgICAgICAgIHByaW50KCItIiAqIDUwKQogICAgICAgICAgICBwcmludChmIui0puWPt1t7YWNjb3VudC5zcGxpdCgnIycpWzBdfV3lvIDlp4vmiafooYzku7vliqEgPj4+IikKICAgICAgICAgICAgIyBwcmludCgiXG4iKQogICAgICAgICAgICAjIOaMiUDnrKblj7fliIblibLlvZPliY3otKblj7fnmoTkuI3lkIzlj4LmlbAKICAgICAgICAgICAgdmFsdWVzID0gYWNjb3VudC5zcGxpdCgiIyIpCiAgICAgICAgICAgICMgcHJpbnQodmFsdWVzKQogICAgICAgICAgICBjZyA9IHt9CiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIGlmIGxlbih2YWx1ZXMpID09IDM6CiAgICAgICAgICAgICAgICAgICAgY2cgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICJuYW1lIjogdmFsdWVzWzBdLAogICAgICAgICAgICAgICAgICAgICAgICAieXNtX3VpZCI6IHZhbHVlc1sxXSwKICAgICAgICAgICAgICAgICAgICAgICAgInVuaW9uSWQiOiB2YWx1ZXNbMl0sCiAgICAgICAgICAgICAgICAgICAgICAgICJ0eGJ6IjogMzAwMCwKICAgICAgICAgICAgICAgICAgICAgICAgImFsaUFjY291bnQiOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgImFsaU5hbWUiOiAiIiwKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIGNnID0gewogICAgICAgICAgICAgICAgICAgICAgICAibmFtZSI6IHZhbHVlc1swXSwKICAgICAgICAgICAgICAgICAgICAgICAgInlzbV91aWQiOiB2YWx1ZXNbMV0sCiAgICAgICAgICAgICAgICAgICAgICAgICJ1bmlvbklkIjogdmFsdWVzWzJdLAogICAgICAgICAgICAgICAgICAgICAgICAidHhieiI6IHZhbHVlc1szXSBvciAzMDAwLAogICAgICAgICAgICAgICAgICAgICAgICAiYWxpQWNjb3VudCI6ICIiLAogICAgICAgICAgICAgICAgICAgICAgICAiYWxpTmFtZSI6ICIiLAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICAgICAgIyDlpITnkIblvILluLgKICAgICAgICAgICAgICAgIHByaW50KCLlubvnlJ/pgLzpgLzlj6g6IiwgIumFjee9rueahOWVpeeOqeaEj++8jOe8uuWPguaVsOS6huaGqOaJue+8jOeci+a4heiEmuacrOivtOaYju+8gSIpCiAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICBjZ1siYXBwVG9rZW4iXSA9ICIiCiAgICAgICAgICAgIGNnWyJ0b3BpY0lkcyJdID0gIiIKICAgICAgICAgICAgIyBwcmludCgi5omL5Yqo77yaIiwgbGVuKHZhbHVlcyksIHZhbHVlc1s0XSkKICAgICAgICAgICAgaWYgbGVuKHZhbHVlcykgPj0gNToKICAgICAgICAgICAgICAgIGlmIHZhbHVlc1s0XToKICAgICAgICAgICAgICAgICAgICBjZ1siYXBwVG9rZW4iXSA9IHZhbHVlc1s0XQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgY2dbImFwcFRva2VuIl0gPSB3eHB1c2hlckFwcFRva2VuCiAgICAgICAgICAgIGlmIGxlbih2YWx1ZXMpID49IDY6CiAgICAgICAgICAgICAgICBpZiB2YWx1ZXNbNV06CiAgICAgICAgICAgICAgICAgICAgY2dbInRvcGljSWRzIl0gPSB2YWx1ZXNbNV0KICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGNnWyJ0b3BpY0lkcyJdID0gd3hwdXNoZXJUb3BpY0lkCiAgICAgICAgICAgIGlmIGxlbih2YWx1ZXMpID49IDc6CiAgICAgICAgICAgICAgICBpZiB2YWx1ZXNbNl06CiAgICAgICAgICAgICAgICAgICAgY2dbImFsaU5hbWUiXSA9IHZhbHVlc1s2XQogICAgICAgICAgICBpZiBsZW4odmFsdWVzKSA+PSA4OgogICAgICAgICAgICAgICAgaWYgdmFsdWVzWzddOgogICAgICAgICAgICAgICAgICAgIGNnWyJhbGlBY2NvdW50Il0gPSB2YWx1ZXNbN10KICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgaWYgd2VjaGF0QnVzc2luZXNzS2V5ID09ICIiOgogICAgICAgICAgICAgICAgICAgIGlmIGNnWyJhcHBUb2tlbiJdLnN0YXJ0c3dpdGgoIkFUXyIpID09IEZhbHNlOgogICAgICAgICAgICAgICAgICAgICAgICBwcmludChmIuW5u+eUn+aPkOekuu+8jOi0puWPt1t7YWNjb3VudC5zcGxpdCgnIycpWzBdfV0gd3hwdXNoIOmFjee9rumUmeivr++8jOW/q+S7lOe7hueci+WktOmDqOivtOaYju+8gSIpCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgICAgICAgICAgaWYgKGNnWyJhcHBUb2tlbiJdLnN0YXJ0c3dpdGgoIkFUXyIpID09IEZhbHNlKSBvciAoCiAgICAgICAgICAgICAgICAgICAgICAgIGNnWyJ0b3BpY0lkcyJdLmlzZGlnaXQoKSA9PSBGYWxzZQogICAgICAgICAgICAgICAgICAgICk6CiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KGYi5bm755Sf5o+Q56S677yM6LSm5Y+3W3thY2NvdW50LnNwbGl0KCcjJylbMF19XSB3eHB1c2gg6YWN572u6ZSZ6K+v77yM5b+r5LuU57uG55yL5aS06YOo6K+05piO77yBIikKICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICAgICAgICAgIGFwaSA9IEhIWUQoY2cpCiAgICAgICAgICAgICAgICBpZiBjZ1siYWxpTmFtZSJdIGFuZCBjZ1siYWxpQWNjb3VudCJdOgogICAgICAgICAgICAgICAgICAgIHByaW50KAogICAgICAgICAgICAgICAgICAgICAgICBmIuW5u+eUn+aPkOekuu+8jOi0puWPt1t7YWNjb3VudC5zcGxpdCgnIycpWzBdfV0g6YeH55So5LqGIOaUr+S7mOWuneaPkOeOsO+8jOWnk+WQje+8mntjZ1snYWxpTmFtZSddfe+8jOi0puaIt++8mntjZ1snYWxpQWNjb3VudCddfSIKICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIHByaW50KGYi5bm755Sf5o+Q56S677yM6LSm5Y+3W3thY2NvdW50LnNwbGl0KCcjJylbMF19XSDph4fnlKjkuoYg5b6u5L+h5o+Q546wIikKICAgICAgICAgICAgICAgIGFwaS5ydW4oKQogICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgICAgICBpZiAiRXhwZWN0aW5nIHZhbHVlOiBsaW5lIDEgY29sdW1uIDEiIGluIHN0cihlKToKICAgICAgICAgICAgICAgICAgICBwcmludChmIuW5u+eUn+aPkOekuu+8jOi0puWPt1t7YWNjb3VudC5zcGxpdCgnIycpWzBdfV0g55aR5Ly8IHVuaW9uSWTlh7rplJnvvIzmjaLkuIDkuKrlkKfvvIEiKQogICAgICAgICAgICAgICAgZWxpZiAibGluaycgaXMgbm90IGRlZmluZWQiIGluIHN0cihlKToKICAgICAgICAgICAgICAgICAgICBwcmludCgKICAgICAgICAgICAgICAgICAgICAgICAgZiLlubvnlJ/mj5DnpLrvvIzotKblj7dbe2FjY291bnQuc3BsaXQoJyMnKVswXX1dIOeWkeS8vCDmlrDlj7fnmoTmn5Dnp43ljp/lm6Dlr7zoh7TnmoTml6Dms5XpmIXor7vvvIzor7fmiYvliqjpmIXor7vkuKTnr4flho3or5Xor5XlkKfvvIEiCiAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBwcmludChmIuW5u+eUn+aPkOekuu+8jOi0puWPt1t7YWNjb3VudC5zcGxpdCgnIycpWzBdfV0g5Ye66ZSZ5ZWm77yM6K+35bCG5LiL6Z2i5oql6ZSZ5oiq5Zu+5Y+R5YiwdGfkuqTmtYHnvqQ6IikKICAgICAgICAgICAgICAgIHJhaXNlIGUKICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgICMgcHJpbnQoIlxuIikKICAgICAgICAgICAgcHJpbnQoIi0iICogNTApCiAgICAgICAgICAgIHByaW50KGYi6LSm5Y+3W3thY2NvdW50LnNwbGl0KCcjJylbMF19XeaJp+ihjOS7u+WKoeWujOavle+8gSIpCiAgICAgICAgICAgICMgcHJpbnQoIlxuIikK'))
except Exception as e:
    print('脚本执行出错:', str(e))
